(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[216],{87:(e,t,r)=>{"use strict";r.d(t,{iv:()=>Oe});var n=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(n){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),i=Math.abs,s=String.fromCharCode;function o(e){return e.trim()}function a(e,t,r){return e.replace(t,r)}function c(e,t){return e.indexOf(t)}function l(e,t){return 0|e.charCodeAt(t)}function u(e,t,r){return e.slice(t,r)}function h(e){return e.length}function d(e){return e.length}function p(e,t){return t.push(e),e}var b=1,g=1,v=0,f=0,m=0,y="";function O(e,t,r,n,i,s,o){return{value:e,root:t,parent:r,type:n,props:i,children:s,line:b,column:g,length:o,return:""}}function w(e,t,r){return O(e,t.root,t.parent,r,t.props,t.children,0)}function D(){return m=f>0?l(y,--f):0,g--,10===m&&(g=1,b--),m}function S(){return m=f<v?l(y,f++):0,g++,10===m&&(g=1,b++),m}function T(){return l(y,f)}function M(){return f}function $(e,t){return u(y,e,t)}function k(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function E(e){return b=g=1,v=h(y=e),f=0,[]}function A(e){return y="",e}function R(e){return o($(f-1,_(91===e?e+2:40===e?e+1:e)))}function j(e){for(;(m=T())&&m<33;)S();return k(e)>2||k(m)>3?"":" "}function C(e,t){for(;--t&&S()&&!(m<48||m>102||m>57&&m<65||m>70&&m<97););return $(e,M()+(t<6&&32==T()&&32==S()))}function _(e){for(;S();)switch(m){case e:return f;case 34:case 39:return _(34===e||39===e?e:m);case 40:41===e&&_(e);break;case 92:S()}return f}function N(e,t){for(;S()&&e+m!==57&&(e+m!==84||47!==T()););return"/*"+$(t,f-1)+"*"+s(47===e?e:S())}function P(e){for(;!k(T());)S();return $(e,f)}var H="-ms-",I="-moz-",x="-webkit-",F="comm",U="rule",W="decl";function L(e,t){for(var r="",n=d(e),i=0;i<n;i++)r+=t(e[i],i,e,t)||"";return r}function G(e,t,r,n){switch(e.type){case"@import":case W:return e.return=e.return||e.value;case F:return"";case U:e.value=e.props.join(",")}return h(r=L(e.children,n))?e.return=e.value+"{"+r+"}":""}function z(e,t){switch(function(e,t){return(((t<<2^l(e,0))<<2^l(e,1))<<2^l(e,2))<<2^l(e,3)}(e,t)){case 5103:return x+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return x+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return x+e+I+e+H+e+e;case 6828:case 4268:return x+e+H+e+e;case 6165:return x+e+H+"flex-"+e+e;case 5187:return x+e+a(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return x+e+H+"flex-item-"+a(e,/flex-|-self/,"")+e;case 4675:return x+e+H+"flex-line-pack"+a(e,/align-content|flex-|-self/,"")+e;case 5548:return x+e+H+a(e,"shrink","negative")+e;case 5292:return x+e+H+a(e,"basis","preferred-size")+e;case 6060:return x+"box-"+a(e,"-grow","")+x+e+H+a(e,"grow","positive")+e;case 4554:return x+a(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return a(a(a(e,/(zoom-|grab)/,x+"$1"),/(image-set)/,x+"$1"),e,"")+e;case 5495:case 3959:return a(e,/(image-set\([^]*)/,x+"$1$`$1");case 4968:return a(a(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+x+e+e;case 4095:case 3583:case 4068:case 2532:return a(e,/(.+)-inline(.+)/,x+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(h(e)-1-t>6)switch(l(e,t+1)){case 109:if(45!==l(e,t+4))break;case 102:return a(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+I+(108==l(e,t+3)?"$3":"$2-$3"))+e;case 115:return~c(e,"stretch")?z(a(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==l(e,t+1))break;case 6444:switch(l(e,h(e)-3-(~c(e,"!important")&&10))){case 107:return a(e,":",":"+x)+e;case 101:return a(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+x+(45===l(e,14)?"inline-":"")+"box$3$1"+x+"$2$3$1"+H+"$2box$3")+e}break;case 5936:switch(l(e,t+11)){case 114:return x+e+H+a(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return x+e+H+a(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return x+e+H+a(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return x+e+H+e+e}return e}function V(e){return A(X("",null,null,null,[""],e=E(e),0,[0],e))}function X(e,t,r,n,i,o,c,l,u){for(var d=0,b=0,g=c,v=0,f=0,m=0,y=1,O=1,w=1,$=0,k="",E=i,A=o,_=n,H=k;O;)switch(m=$,$=S()){case 34:case 39:case 91:case 40:H+=R($);break;case 9:case 10:case 13:case 32:H+=j(m);break;case 92:H+=C(M()-1,7);continue;case 47:switch(T()){case 42:case 47:p(q(N(S(),M()),t,r),u);break;default:H+="/"}break;case 123*y:l[d++]=h(H)*w;case 125*y:case 59:case 0:switch($){case 0:case 125:O=0;case 59+b:f>0&&h(H)-g&&p(f>32?B(H+";",n,r,g-1):B(a(H," ","")+";",n,r,g-2),u);break;case 59:H+=";";default:if(p(_=K(H,t,r,d,b,i,l,k,E=[],A=[],g),o),123===$)if(0===b)X(H,t,_,_,E,o,g,l,A);else switch(v){case 100:case 109:case 115:X(e,_,_,n&&p(K(e,_,_,0,0,i,l,k,i,E=[],g),A),i,A,g,l,n?E:A);break;default:X(H,_,_,_,[""],A,g,l,A)}}d=b=f=0,y=w=1,k=H="",g=c;break;case 58:g=1+h(H),f=m;default:if(y<1)if(123==$)--y;else if(125==$&&0==y++&&125==D())continue;switch(H+=s($),$*y){case 38:w=b>0?1:(H+="\f",-1);break;case 44:l[d++]=(h(H)-1)*w,w=1;break;case 64:45===T()&&(H+=R(S())),v=T(),b=h(k=H+=P(M())),$++;break;case 45:45===m&&2==h(H)&&(y=0)}}return o}function K(e,t,r,n,s,c,l,h,p,b,g){for(var v=s-1,f=0===s?c:[""],m=d(f),y=0,w=0,D=0;y<n;++y)for(var S=0,T=u(e,v+1,v=i(w=l[y])),M=e;S<m;++S)(M=o(w>0?f[S]+" "+T:a(T,/&\f/g,f[S])))&&(p[D++]=M);return O(e,t,r,0===s?U:h,p,b,g)}function q(e,t,r){return O(e,t,r,F,s(m),u(e,2,-2),0)}function B(e,t,r,n){return O(e,t,r,W,u(e,0,n),u(e,n+1,-1),n)}var J=function(e,t){return A(function(e,t){var r=-1,n=44;do{switch(k(n)){case 0:38===n&&12===T()&&(t[r]=1),e[r]+=P(f-1);break;case 2:e[r]+=R(n);break;case 4:if(44===n){e[++r]=58===T()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=s(n)}}while(n=S());return e}(E(e),t))},Y=new WeakMap,Z=function(e){if("rule"===e.type&&e.parent&&e.length){for(var t=e.value,r=e.parent,n=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||Y.get(r))&&!n){Y.set(e,!0);for(var i=[],s=J(t,i),o=r.props,a=0,c=0;a<s.length;a++)for(var l=0;l<o.length;l++,c++)e.props[c]=i[a]?s[a].replace(/&\f/g,o[l]):o[l]+" "+s[a]}}},Q=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},ee=[function(e,t,r,n){if(!e.return)switch(e.type){case W:e.return=z(e.value,e.length);break;case"@keyframes":return L([w(a(e.value,"@","@"+x),e,"")],n);case U:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return L([w(a(t,/:(read-\w+)/,":-moz-$1"),e,"")],n);case"::placeholder":return L([w(a(t,/:(plac\w+)/,":-webkit-input-$1"),e,""),w(a(t,/:(plac\w+)/,":-moz-$1"),e,""),w(a(t,/:(plac\w+)/,H+"input-$1"),e,"")],n)}return""}))}}];const te=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var i=e.stylisPlugins||ee;var s,o,a={},c=[];s=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)a[t[r]]=!0;c.push(e)}));var l,u,h,p,b=[G,(p=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&p(e)})],g=(u=[Z,Q].concat(i,b),h=d(u),function(e,t,r,n){for(var i="",s=0;s<h;s++)i+=u[s](e,t,r,n)||"";return i});o=function(e,t,r,n){l=r,L(V(e?e+"{"+t.styles+"}":t.styles),g),n&&(v.inserted[t.name]=!0)};var v={key:t,sheet:new n({key:t,container:s,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend}),nonce:e.nonce,inserted:a,registered:{},insert:o};return v.sheet.hydrate(c),v};const re=function(e){for(var t,r=0,n=0,i=e.length;i>=4;++n,i-=4)t=1540483477*(65535&(t=255&e.charCodeAt(n)|(255&e.charCodeAt(++n))<<8|(255&e.charCodeAt(++n))<<16|(255&e.charCodeAt(++n))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(i){case 3:r^=(255&e.charCodeAt(n+2))<<16;case 2:r^=(255&e.charCodeAt(n+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(n)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)};const ne={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var ie=/[A-Z]|^ms/g,se=/_EMO_([^_]+?)_([^]*?)_EMO_/g,oe=function(e){return 45===e.charCodeAt(1)},ae=function(e){return null!=e&&"boolean"!=typeof e},ce=function(e){var t=Object.create(null);return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}((function(e){return oe(e)?e:e.replace(ie,"-$&").toLowerCase()})),le=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(se,(function(e,t,r){return he={name:t,styles:r,next:he},t}))}return 1===ne[e]||oe(e)||"number"!=typeof t||0===t?t:t+"px"};function ue(e,t,r){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return he={name:r.name,styles:r.styles,next:he},r.name;if(void 0!==r.styles){var n=r.next;if(void 0!==n)for(;void 0!==n;)he={name:n.name,styles:n.styles,next:he},n=n.next;return r.styles+";"}return function(e,t,r){var n="";if(Array.isArray(r))for(var i=0;i<r.length;i++)n+=ue(e,t,r[i])+";";else for(var s in r){var o=r[s];if("object"!=typeof o)null!=t&&void 0!==t[o]?n+=s+"{"+t[o]+"}":ae(o)&&(n+=ce(s)+":"+le(s,o)+";");else if(!Array.isArray(o)||"string"!=typeof o[0]||null!=t&&void 0!==t[o[0]]){var a=ue(e,t,o);switch(s){case"animation":case"animationName":n+=ce(s)+":"+a+";";break;default:n+=s+"{"+a+"}"}}else for(var c=0;c<o.length;c++)ae(o[c])&&(n+=ce(s)+":"+le(s,o[c])+";")}return n}(e,t,r);case"function":if(void 0!==e){var i=he,s=r(e);return he=i,ue(e,t,s)}break;case"string":}if(null==t)return r;var o=t[r];return void 0!==o?o:r}var he,de=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var pe=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var n=!0,i="";he=void 0;var s=e[0];null==s||void 0===s.raw?(n=!1,i+=ue(r,t,s)):i+=s[0];for(var o=1;o<e.length;o++)i+=ue(r,t,e[o]),n&&(i+=s[o]);de.lastIndex=0;for(var a,c="";null!==(a=de.exec(i));)c+="-"+a[1];return{name:re(i)+c,styles:i,next:he}};function be(e,t,r){var n="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):n+=r+" "})),n}var ge=function(e,t,r){var n=e.key+"-"+t.name;if(!1===r&&void 0===e.registered[n]&&(e.registered[n]=t.styles),void 0===e.inserted[t.name]){var i=t;do{e.insert(t===i?"."+n:"",i,e.sheet,!0);i=i.next}while(void 0!==i)}};function ve(e,t){if(void 0===e.inserted[t.name])return e.insert("",t,e.sheet,!0)}function fe(e,t,r){var n=[],i=be(e,n,r);return n.length<2?r:i+t(n)}var me=function e(t){for(var r="",n=0;n<t.length;n++){var i=t[n];if(null!=i){var s=void 0;switch(typeof i){case"boolean":break;case"object":if(Array.isArray(i))s=e(i);else for(var o in s="",i)i[o]&&o&&(s&&(s+=" "),s+=o);break;default:s=i}s&&(r&&(r+=" "),r+=s)}}return r};var ye=function(e){var t=te(e);t.sheet.speedy=function(e){this.isSpeedy=e},t.compat=!0;var r=function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=pe(r,t.registered,void 0);return ge(t,i,!1),t.key+"-"+i.name};return{css:r,cx:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return fe(t.registered,r,me(n))},injectGlobal:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=pe(r,t.registered);ve(t,i)},keyframes:function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];var i=pe(r,t.registered),s="animation-"+i.name;return ve(t,{name:i.name,styles:"@keyframes "+s+"{"+i.styles+"}"}),s},hydrate:function(e){e.forEach((function(e){t.inserted[e]=!0}))},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:be.bind(null,t.registered),merge:fe.bind(null,t.registered,r)}}({key:"css"}),Oe=(ye.flush,ye.hydrate,ye.cx,ye.merge,ye.getRegisteredStyles,ye.injectGlobal,ye.keyframes,ye.css);ye.sheet,ye.cache},886:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Controller=void 0;t.Controller=class{}},223:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sensitivity=t.Reentrance=t.Kind=t.TraceLevel=void 0;var n=r(547);Object.defineProperty(t,"TraceLevel",{enumerable:!0,get:function(){return n.TraceLevel}}),function(e){e[e.Data=0]="Data",e[e.Transaction=1]="Transaction",e[e.Reaction=2]="Reaction",e[e.Cache=3]="Cache"}(t.Kind||(t.Kind={})),function(e){e[e.PreventWithError=1]="PreventWithError",e[e.WaitAndRestart=0]="WaitAndRestart",e[e.CancelPrevious=-1]="CancelPrevious",e[e.CancelAndWaitPrevious=-2]="CancelAndWaitPrevious",e[e.OverwritePrevious=-3]="OverwritePrevious",e[e.RunSideBySide=-4]="RunSideBySide"}(t.Reentrance||(t.Reentrance={})),function(e){e[e.ReactOnFinalDifferenceOnly=0]="ReactOnFinalDifferenceOnly",e[e.ReactOnFinalAndIntermediateDifference=1]="ReactOnFinalAndIntermediateDifference",e[e.ReactEvenOnSameValueAssignment=2]="ReactEvenOnSameValueAssignment"}(t.Sensitivity||(t.Sensitivity={}))},532:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trace=t.monitor=t.journal=t.reentrance=t.throttling=t.observableArgs=t.noSideEffects=t.priority=t.cached=t.reaction=t.transaction=t.unobservable=t.sensitive=t.standalone=t.nonreactive=t.Reactronic=void 0;const n=r(987),i=r(223),s=r(893),o=r(319),a=r(30),c=r(282),l=r(807);class u{static why(e=!1){return e?c.OperationController.briefWhy():c.OperationController.why()}static getController(e){return c.OperationController.of(e)}static pullLastResult(e,t){return u.getController(e).pullLastResult(t)}static configureCurrentMethod(e){return c.OperationController.configureImpl(void 0,e)}static takeSnapshot(e){return o.Snapshot.takeSnapshot(e)}static dispose(e){o.Snapshot.dispose(e)}static get reactionsAutoStartDisabled(){return a.Hooks.reactionsAutoStartDisabled}static set reactionsAutoStartDisabled(e){a.Hooks.reactionsAutoStartDisabled=e}static get isTraceEnabled(){return n.Dbg.isOn}static get traceOptions(){return n.Dbg.trace}static setTraceMode(e,t){n.Dbg.setTraceMode(e,t)}static setTraceHint(e,t){a.Hooks.setHint(e,t)}static getTraceHint(e,t=!1){return s.ObjectHolder.getHint(e,t)}static setProfilingMode(e,t){a.Hooks.setProfilingMode(e,t)}}t.Reactronic=u,t.nonreactive=function(e,...t){return c.OperationController.runWithin(void 0,e,...t)},t.standalone=function(e,...t){return c.OperationController.runWithin(void 0,l.Transaction.standalone,e,...t)},t.sensitive=function(e,t,...r){return a.Hooks.sensitive(e,t,...r)},t.unobservable=function(e,t){return a.Hooks.decorateData(!1,e,t)},t.transaction=function e(t,r,n){const s={kind:i.Kind.Transaction};return a.Hooks.decorateOperation(!0,e,s,t,r,n)},t.reaction=function e(t,r,n){const s={kind:i.Kind.Reaction,throttling:-1};return a.Hooks.decorateOperation(!0,e,s,t,r,n)},t.cached=function e(t,r,n){const s={kind:i.Kind.Cache,noSideEffects:!0};return a.Hooks.decorateOperation(!0,e,s,t,r,n)},t.priority=function e(t){return a.Hooks.decorateOperationParametrized(e,{priority:t})},t.noSideEffects=function e(t){return a.Hooks.decorateOperationParametrized(e,{noSideEffects:t})},t.observableArgs=function e(t){return a.Hooks.decorateOperationParametrized(e,{sensitiveArgs:t})},t.throttling=function e(t){return a.Hooks.decorateOperationParametrized(e,{throttling:t})},t.reentrance=function e(t){return a.Hooks.decorateOperationParametrized(e,{reentrance:t})},t.journal=function e(t){return a.Hooks.decorateOperationParametrized(e,{journal:t})},t.monitor=function e(t){return a.Hooks.decorateOperationParametrized(e,{monitor:t})},t.trace=function e(t){return a.Hooks.decorateOperationParametrized(e,{trace:t})}},606:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ToggleRef=t.Ref=void 0;const n=r(807),i=r(532);class s{constructor(e,t,r=-1){this.owner=e,this.name=t,this.index=r}get value(){return this.index<0?this.owner[this.name]:this.owner[this.name][this.index]}set value(e){this.index<0?this.owner[this.name]=e:this.owner[this.name][this.index]=e}nonreactiveValue(){return i.nonreactive((()=>this.value))}observe(){return this.value}unobserve(){throw new Error("not implemented")}static to(e){return new Proxy(e,a)}static toToggle(e){return new Proxy(e,c)}static toCustomToggle(e,t,r){const n=new l(t,r);return new Proxy(e,n)}static sameRefs(e,t){return e.owner===t.owner&&e.name===t.name&&e.index===t.index}static similarRefs(e,t){return e.owner.constructor===t.owner.constructor&&e.name===t.name&&e.index===t.index}}t.Ref=s;class o extends s{constructor(e,t,r,n){super(e,t),this.value1=r,this.value2=n}toggle(){const e=this.owner,t=this.name;n.Transaction.runAs({hint:`toggle ${e.constructor.name}.${t}`},(()=>{const r=e[t],n=r===this.value1||r instanceof s&&this.value1 instanceof s&&s.sameRefs(r,this.value1);e[t]=n?this.value2:this.value1}))}}t.ToggleRef=o;const a={get:(e,t)=>new s(e,t)},c={get:(e,t)=>new o(e,t,!0,!1)};class l{constructor(e,t){this.value1=e,this.value2=t}get(e,t){return new o(e,t,this.value1,this.value2)}}},547:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TraceLevel=void 0,t.TraceLevel={Error:{silent:!1,transaction:!1,operation:!1,step:!1,monitor:!1,read:!1,write:!1,change:!1,obsolete:!1,error:!0,warning:!0,gc:!1,color:37,prefix:"",margin1:0,margin2:0},Minimal:{silent:!1,transaction:!0,operation:!1,step:!1,monitor:!1,read:!1,write:!1,change:!1,obsolete:!0,error:!0,warning:!0,gc:!1,color:37,prefix:"",margin1:0,margin2:0},Info:{silent:!1,transaction:!0,operation:!0,step:!1,monitor:!0,read:!1,write:!1,change:!0,obsolete:!0,error:!0,warning:!0,gc:!1,color:37,prefix:"",margin1:0,margin2:0},Debug:{silent:!1,transaction:!0,operation:!0,step:!0,monitor:!0,read:!0,write:!0,change:!0,obsolete:!0,error:!0,warning:!0,gc:!1,color:37,prefix:"",margin1:0,margin2:0},Suppress:{silent:!0,transaction:!1,operation:!1,step:!1,monitor:!1,read:!1,write:!1,change:!1,obsolete:!1,error:!0,warning:!0,gc:!1,color:37,prefix:"",margin1:0,margin2:0}}},361:(e,t,r)=>{"use strict";t.g4=t.zy=t.HX=t.U5=t.PS=t.vL=t.kv=t.fk=t.lT=t.ug=t.YW=t.Tf=t.do=t.Gu=t.Yn=void 0;var n=r(971);var i=r(19);var s=r(250);var o=r(949);var a=r(223);Object.defineProperty(t,"Yn",{enumerable:!0,get:function(){return a.Sensitivity}}),Object.defineProperty(t,"Gu",{enumerable:!0,get:function(){return a.TraceLevel}});var c=r(886);var l=r(606);Object.defineProperty(t,"do",{enumerable:!0,get:function(){return l.ToggleRef}});var u=r(30);Object.defineProperty(t,"Tf",{enumerable:!0,get:function(){return u.ObservableObject}});var h=r(319);var d=r(807);Object.defineProperty(t,"YW",{enumerable:!0,get:function(){return d.Transaction}});var p=r(900);Object.defineProperty(t,"ug",{enumerable:!0,get:function(){return p.Monitor}});var b=r(327);var g=r(532);Object.defineProperty(t,"lT",{enumerable:!0,get:function(){return g.Reactronic}}),Object.defineProperty(t,"fk",{enumerable:!0,get:function(){return g.nonreactive}}),Object.defineProperty(t,"kv",{enumerable:!0,get:function(){return g.sensitive}}),Object.defineProperty(t,"vL",{enumerable:!0,get:function(){return g.unobservable}}),Object.defineProperty(t,"PS",{enumerable:!0,get:function(){return g.transaction}}),Object.defineProperty(t,"U5",{enumerable:!0,get:function(){return g.reaction}}),Object.defineProperty(t,"HX",{enumerable:!0,get:function(){return g.cached}}),Object.defineProperty(t,"zy",{enumerable:!0,get:function(){return g.observableArgs}}),Object.defineProperty(t,"g4",{enumerable:!0,get:function(){return g.trace}})},893:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ObjectHolder=t.ObjectRevision=t.Observable=t.Meta=void 0;const n=r(987),i=r(915);var s=r(915);Object.defineProperty(t,"Meta",{enumerable:!0,get:function(){return s.Meta}});t.Observable=class{constructor(e){this.value=e}get isOperation(){return!1}};t.ObjectRevision=class{constructor(e,t,r){this.snapshot=e,this.prev={revision:t||this},this.data=r,this.changes=new Map,this.conflicts=new Map,n.Dbg.isOn&&Object.freeze(this)}};class o{constructor(e,t,r,n,i){this.id=++o.generator,this.unobservable=e,this.proxy=t||new Proxy(this,r),this.head=n,this.editing=void 0,this.editors=0,this.hint=i}static getHint(e,t){const r=i.Meta.get(e,i.Meta.Holder);return r?t?`${r.hint}#${r.id}`:r.hint:void 0}}t.ObjectHolder=o,o.generator=19},30:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hooks=t.OptionsImpl=t.ObservableObject=void 0;const n=r(971),i=r(987),s=r(223),o=r(893),a=r(319);class c{constructor(){const e=new.target.prototype,t=o.Meta.getFrom(e,o.Meta.Initial),r=d.createObjectHolder(this,t,new.target.name);if(!d.reactionsAutoStartDisabled){const t=o.Meta.getFrom(e,o.Meta.Reactions);for(const e in t)r.proxy[e][o.Meta.Controller].markObsolete()}return r.proxy}[Symbol.toStringTag](){const e=o.Meta.get(this,o.Meta.Holder);return a.Hints.obj(e)}}t.ObservableObject=c;const l=Object.freeze({kind:s.Kind.Data,priority:0,noSideEffects:!1,sensitiveArgs:!1,throttling:Number.MAX_SAFE_INTEGER,reentrance:s.Reentrance.PreventWithError,journal:void 0,monitor:null,trace:void 0});class u{constructor(e,t,r,n,s){this.getter=void 0!==e?e:r.getter,this.setter=void 0!==t?t:r.setter,this.kind=h(l.kind,r.kind,n.kind,s),this.priority=h(l.priority,r.priority,n.priority,s),this.noSideEffects=h(l.noSideEffects,r.noSideEffects,n.noSideEffects,s),this.sensitiveArgs=h(l.sensitiveArgs,r.sensitiveArgs,n.sensitiveArgs,s),this.throttling=h(l.throttling,r.throttling,n.throttling,s),this.reentrance=h(l.reentrance,r.reentrance,n.reentrance,s),this.journal=h(l.journal,r.journal,n.journal,s),this.monitor=h(l.monitor,r.monitor,n.monitor,s),this.trace=h(l.trace,r.trace,n.trace,s),i.Dbg.isOn&&Object.freeze(this)}}function h(e,t,r,n){return void 0===r||t!==e&&n?t:r}t.OptionsImpl=u,u.INITIAL=Object.freeze(new u(n.UNDEF,n.UNDEF,Object.assign({getter:n.UNDEF,setter:n.UNDEF},l),{},!1));class d{getPrototypeOf(e){return Reflect.getPrototypeOf(e.unobservable)}get(e,t,r){let n;const i=a.Snapshot.current().getCurrentRevision(e,t);return n=i.data[t],n instanceof o.Observable&&!n.isOperation?(a.Snapshot.markUsed(n,i,t,e,s.Kind.Data,!1),n=n.value):t===o.Meta.Holder||(n=Reflect.get(e.unobservable,t,r)),n}set(e,t,r,n){const i=a.Snapshot.edit().getEditableRevision(e,t,r);if(i!==a.NIL_REV){const c=i.data[t];if(void 0!==c||i.prev.revision.snapshot===a.NIL_REV.snapshot&&t in e.unobservable==!1){const n=i.prev.revision.data[t];let l=void 0===n||n.value!==r||d.sensitivity===s.Sensitivity.ReactEvenOnSameValueAssignment;l?n===c?i.data[t]=new o.Observable(r):c.value=r:n!==c&&(d.sensitivity===s.Sensitivity.ReactOnFinalDifferenceOnly?i.data[t]=n:l=!0),a.Snapshot.markEdited(r,l,i,t,e)}else Reflect.set(e.unobservable,t,r,n)}else e.unobservable[t]=r;return!0}has(e,t){return t in a.Snapshot.current().getCurrentRevision(e,t).data||t in e.unobservable}getOwnPropertyDescriptor(e,t){const r=a.Snapshot.current().getCurrentRevision(e,t),n=Reflect.getOwnPropertyDescriptor(r.data,t);return n&&(n.configurable=n.writable=!0),n}ownKeys(e){const t=a.Snapshot.current().getCurrentRevision(e,o.Meta.Holder),r=[];for(const n of Object.getOwnPropertyNames(t.data)){const e=t.data[n];e instanceof o.Observable&&e.isOperation||r.push(n)}return r}static decorateData(e,t,r){if(e){const e=function(){const e=d.acquireObjectHolder(this);return d.proxy.get(e,r,this)},n=function(e){const t=d.acquireObjectHolder(this);return d.proxy.set(t,r,e,this)},i=!0,s=!1;return Object.defineProperty(t,r,{get:e,set:n,enumerable:i,configurable:s})}o.Meta.acquire(t,o.Meta.Initial)[r]=o.Meta.Unobservable}static decorateOperation(e,t,r,s,o,a){var c,l,u,h;a&&a!==s||(a=p);const b=null===(c=a.enumerable)||void 0===c||c,g=null===(l=a.configurable)||void 0===l||l,v=d.rememberOperationOptions(s,o,null!==(u=a.value)&&void 0!==u?u:a.get,null!==(h=a.value)&&void 0!==h?h:a.set,!0,g,r,e);if(v.getter===v.setter){const e=function(){const e=d.acquireObjectHolder(this),t=d.createControllerAndGetHook(e,o,v);return Object.defineProperty(e.unobservable,o,{value:t,enumerable:b,configurable:g}),t};return Object.defineProperty(s,o,{get:e,enumerable:b,configurable:!0})}if(v.setter===n.UNDEF){const e=function(){const e=d.acquireObjectHolder(this),t=d.createControllerAndGetHook(e,o,v);return Object.defineProperty(e.unobservable,o,{get:t,enumerable:b,configurable:g}),t.call(this)};return Object.defineProperty(s,o,{get:e,enumerable:b,configurable:!0})}throw i.misuse(`${s.constructor.name}.${o.toString()} has setter and cannot be decorated with @${t.name}`)}static decorateOperationParametrized(e,t){return function(r,n,i){return d.decorateOperation(!1,e,t,r,n,i)}}static acquireObjectHolder(e){let t=e[o.Meta.Holder];if(!t){if(e!==Object(e)||Array.isArray(e))throw i.misuse("only objects can be reactive");const r=o.Meta.getFrom(Object.getPrototypeOf(e),o.Meta.Initial),n=new o.ObjectRevision(a.NIL_REV.snapshot,a.NIL_REV,Object.assign({},r));o.Meta.set(n.data,o.Meta.Holder,t),i.Dbg.isOn&&a.Snapshot.freezeObjectRevision(n),t=new o.ObjectHolder(e,e,d.proxy,n,e.constructor.name),o.Meta.set(e,o.Meta.Holder,t)}return t}static createObjectHolder(e,t,r){const n=a.Snapshot.edit(),i=new o.ObjectHolder(e,void 0,d.proxy,a.NIL_REV,r);return n.getEditableRevision(i,o.Meta.Holder,t),i}static setProfilingMode(e,t){e?(d.repetitiveUsageWarningThreshold=t&&void 0!==t.repetitiveUsageWarningThreshold?t.repetitiveUsageWarningThreshold:10,d.mainThreadBlockingWarningThreshold=t&&void 0!==t.mainThreadBlockingWarningThreshold?t.mainThreadBlockingWarningThreshold:16.6,d.asyncActionDurationWarningThreshold=t&&void 0!==t.asyncActionDurationWarningThreshold?t.asyncActionDurationWarningThreshold:150,a.Snapshot.garbageCollectionSummaryInterval=t&&void 0!==t.garbageCollectionSummaryInterval?t.garbageCollectionSummaryInterval:100):(d.repetitiveUsageWarningThreshold=Number.MAX_SAFE_INTEGER,d.mainThreadBlockingWarningThreshold=Number.MAX_SAFE_INTEGER,d.asyncActionDurationWarningThreshold=Number.MAX_SAFE_INTEGER,a.Snapshot.garbageCollectionSummaryInterval=Number.MAX_SAFE_INTEGER)}static sensitive(e,t,...r){const n=d.sensitivity;d.sensitivity=e;try{return t(...r)}finally{d.sensitivity=n}}static setHint(e,t){if(t){d.acquireObjectHolder(e).hint=t}return e}}t.Hooks=d,d.reactionsAutoStartDisabled=!1,d.repetitiveUsageWarningThreshold=Number.MAX_SAFE_INTEGER,d.mainThreadBlockingWarningThreshold=Number.MAX_SAFE_INTEGER,d.asyncActionDurationWarningThreshold=Number.MAX_SAFE_INTEGER,d.sensitivity=s.Sensitivity.ReactOnFinalDifferenceOnly,d.proxy=new d,d.createControllerAndGetHook=function(e,t,r){throw i.misuse("createControllerAndGetHook should never be called")},d.rememberOperationOptions=function(e,t,r,n,s,o,a,c){throw i.misuse("rememberOperationOptions should never be called")};const p={configurable:!0,enumerable:!0,value:void 0}},915:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Meta=void 0;const r=Object.freeze({});class n{static get(e,t){return e[t]}static set(e,t,r){return Object.defineProperty(e,t,{value:r,configurable:!1,enumerable:!1}),e}static acquire(e,t){let r=e[t];return e.hasOwnProperty(t)||(r=Object.assign({},r),n.set(e,t,r)),r}static getFrom(e,t){var n;return null!==(n=e[t])&&void 0!==n?n:r}}t.Meta=n,n.Holder=Symbol("rxHolder"),n.Controller=Symbol("rxController"),n.Disposed=Symbol("rxDisposed"),n.Initial=Symbol("rxInitial"),n.Reactions=Symbol("rxReactions"),n.Unobservable=Symbol("rxUnobservable")},900:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MonitorImpl=t.Monitor=void 0;const n=r(30),i=r(807);class s extends n.ObservableObject{static create(e,t,r){return o.create(e,t,r)}}t.Monitor=s;class o extends s{constructor(){super(...arguments),this.isActive=!1,this.workerCount=0,this.workers=new Set,this.internals={activationDelay:-1,activationTimeout:void 0,deactivationDelay:-1,deactivationTimeout:void 0}}enter(e){this.workerCount++;(this.workers=this.workers.toMutable()).add(e),o.activate(this,this.internals.activationDelay)}leave(e){this.workerCount--;(this.workers=this.workers.toMutable()).delete(e),o.deactivate(this,this.internals.deactivationDelay)}static create(e,t,r){return i.Transaction.runAs({hint:"Monitor.create"},o.doCreate,e,t,r)}static enter(e,t){e.enter(t)}static leave(e,t){e.leave(t)}static doCreate(e,t,r){const i=new o;return n.Hooks.setHint(i,e),i.internals.activationDelay=t,i.internals.deactivationDelay=r,i}static activate(e,t){t>=0?e.internals.activationTimeout||(e.internals.activationTimeout=setTimeout((()=>i.Transaction.runAs({hint:"Monitor.activate",standalone:!0},o.activate,e,-1)),t)):e.workerCount>0&&(e.isActive=!0)}static deactivate(e,t){t>=0?(clearTimeout(e.internals.deactivationTimeout),e.internals.deactivationTimeout=setTimeout((()=>i.Transaction.runAs({hint:"Monitor.deactivate",standalone:!0},o.deactivate,e,-1)),t)):e.workerCount<=0&&(e.isActive=!1,e.internals.activationTimeout=void 0)}}t.MonitorImpl=o},282:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rejectRethrow=t.resolveReturn=t.OperationController=void 0;const n=r(987),i=r(223),s=r(886),o=r(893),a=r(319),c=r(807),l=r(900),u=r(30),h=r(327),d=[],p=new o.ObjectHolder(void 0,void 0,u.Hooks.proxy,a.NIL_REV,"N/A"),b={revision:a.NIL_REV,memberName:"???",usageCount:0};class g extends s.Controller{constructor(e,t){super(),this.ownHolder=e,this.memberName=t}configure(e){return g.configureImpl(this,e)}get options(){return this.peek(void 0).operation.options}get nonreactive(){return this.peek(void 0).operation.value}get args(){return this.use().operation.args}get result(){return this.call(!0,void 0).value}get error(){return this.use().operation.error}get stamp(){return this.use().revision.snapshot.timestamp}get isUpToDate(){return this.use().isUpToDate}markObsolete(){c.Transaction.runAs({hint:n.Dbg.isOn?`markObsolete(${a.Hints.obj(this.ownHolder,this.memberName)})`:"markObsolete()"},g.markObsolete,this)}pullLastResult(e){return this.call(!0,e).value}call(e,t){let r=this.peek(t);const s=r.snapshot,l=r.operation,u=l.options;if(r.isUpToDate||void 0!==r.revision.data[o.Meta.Disposed]||e&&l.cause!==b&&l.successor&&!l.successor.transaction.isFinished)n.Dbg.isOn&&n.Dbg.trace.operation&&(void 0===u.trace||void 0===u.trace.operation||!0===u.trace.operation)&&n.Dbg.log(c.Transaction.current.isFinished?"":"║"," (=)",`${a.Hints.rev(r.revision,this.memberName)} result is reused from T${r.operation.transaction.id}[${r.operation.transaction.hint}]`);else{const n=e||u.kind===i.Kind.Reaction||u.kind===i.Kind.Cache&&(r.revision.snapshot.sealed||r.revision.prev.revision!==a.NIL_REV),o=u.noSideEffects?this:void 0,c=this.run(r,n,u,o,t),l=c.operation.revision.snapshot;(!e||s===l||l.sealed&&s.timestamp>=l.timestamp)&&(r=c)}const h=r.operation;return a.Snapshot.markUsed(h,r.revision,this.memberName,this.ownHolder,h.options.kind,e),h}static of(e){const t=o.Meta.get(e,o.Meta.Controller);if(!t)throw n.misuse(`given method is not decorated as reactronic one: ${e.name}`);return t}static configureImpl(e,t){let r;if(r=e?e.edit().operation:v.current,!r||r.transaction.isFinished)throw n.misuse("a method is expected with reactronic decorator");return r.options=new u.OptionsImpl(r.options.getter,r.options.setter,r.options,t,!1),n.Dbg.isOn&&n.Dbg.trace.write&&n.Dbg.log("║","  ♦",`${r.hint()}.options = ...`),r.options}static runWithin(e,t,...r){let n;const i=v.current;try{v.current=e,n=t(...r)}catch(s){throw e&&(e.error=s),s}finally{v.current=i}return n}static why(){const e=v.current;return e?e.why():p.hint}static briefWhy(){const e=v.current;return e?e.briefWhy():p.hint}static dependencies(){const e=v.current;return e?e.dependencies():["Reactronic.dependencies should be called from inside of reactive method"]}peek(e){const t=a.Snapshot.current(),r=t.seekRevision(this.ownHolder,this.memberName),n=this.peekFromRevision(r),s=n.options.kind!==i.Kind.Transaction&&n.cause!==b&&(t===n.revision.snapshot||t.timestamp<n.obsoleteSince)&&(!n.options.sensitiveArgs||void 0===e||n.args.length===e.length&&n.args.every(((t,r)=>t===e[r])))||void 0!==r.data[o.Meta.Disposed];return{operation:n,isUpToDate:s,snapshot:t,revision:r}}use(){const e=this.peek(void 0);return a.Snapshot.markUsed(e.operation,e.revision,this.memberName,this.ownHolder,e.operation.options.kind,!0),e}edit(){const e=this.ownHolder,t=this.memberName,r=a.Snapshot.edit(),n=r.getEditableRevision(e,t,o.Meta.Holder,this);let i=this.peekFromRevision(n);if(i.revision!==n){const s=new v(this,n,i);i=n.data[t]=s.reenterOver(i),r.bumpBy(n.prev.revision.snapshot.timestamp),a.Snapshot.markEdited(i,!0,n,t,e)}return{operation:i,isUpToDate:!0,snapshot:r,revision:n}}peekFromRevision(e){const t=this.memberName;let r=e.data[t];if(r.controller!==this){const i=n.Dbg.isOn?`${a.Hints.obj(this.ownHolder,t)}/boot`:"MethodController/init",s=e.snapshot.sealed||e.prev.revision!==a.NIL_REV;r=c.Transaction.runAs({hint:i,standalone:s,token:this},(()=>{const e=this.ownHolder;let r=a.Snapshot.current().getCurrentRevision(e,t),n=r.data[t];return n.controller!==this&&(r=a.Snapshot.edit().getEditableRevision(e,t,o.Meta.Holder,this),n=r.data[t]=new v(this,r,n),n.cause=b,a.Snapshot.markEdited(n,!0,r,t,e)),n}))}return r}run(e,t,r,s,o){const l=n.Dbg.isOn?`${a.Hints.obj(this.ownHolder,this.memberName)}${o&&o.length>0&&("number"==typeof o[0]||"string"==typeof o[0])?` - ${o[0]}`:""}`:`${a.Hints.obj(this.ownHolder,this.memberName)}`;let u=e;const h={hint:l,standalone:t,journal:r.journal,trace:r.trace,token:s},d=c.Transaction.runAs(h,(e=>(u.operation.transaction.isCanceled?(u=this.peek(e),u.operation.options.kind!==i.Kind.Transaction&&u.isUpToDate||(u=this.edit(),n.Dbg.isOn&&(n.Dbg.trace.transaction||n.Dbg.trace.operation||n.Dbg.trace.obsolete)&&n.Dbg.log("║"," (f)",`${u.operation.why()}`),u.operation.run(this.ownHolder.proxy,e))):(u=this.edit(),n.Dbg.isOn&&(n.Dbg.trace.transaction||n.Dbg.trace.operation||n.Dbg.trace.obsolete)&&n.Dbg.log("║"," (f)",`${u.operation.why()}`),u.operation.run(this.ownHolder.proxy,e)),u.operation.result)),o);return u.operation.result=d,u}static markObsolete(e){const t=e.peek(void 0),r=t.snapshot;t.operation.markObsoleteDueTo(t.operation,{revision:a.NIL_REV,memberName:e.memberName,usageCount:0},r.timestamp,r.reactions)}}t.OperationController=g;class v extends o.Observable{constructor(e,t,r){super(void 0),this.margin=v.current?v.current.margin+1:1,this.transaction=c.Transaction.current,this.controller=e,this.revision=t,this.observables=new Map,r instanceof v?(this.options=r.options,this.args=r.args,this.cause=r.obsoleteDueTo):(this.options=r,this.args=d,this.cause=void 0),this.started=0,this.obsoleteSince=0,this.obsoleteDueTo=void 0,this.successor=void 0}get isOperation(){return!0}hint(){return`${a.Hints.rev(this.revision,this.controller.memberName)}`}get priority(){return this.options.priority}why(){let e=Date.now();const t=this.revision.prev.revision.data[this.controller.memberName];let r;return t instanceof v&&(e=Math.abs(this.started)-Math.abs(t.started)),r=this.cause?`   <<   ${f(this.cause,!0).join("   <<   ")}`:this.controller.options.kind===i.Kind.Transaction?"   <<   operation":`   <<   called within ${this.revision.snapshot.hint}`,`${this.hint()}${r}   (${e}ms since previous revalidation)`}briefWhy(){return this.cause?f(this.cause,!1)[0]:p.hint}dependencies(){throw n.misuse("not implemented yet")}bind(e){return(...t)=>{n.Dbg.isOn&&n.Dbg.trace.step&&this.result&&n.Dbg.logAs({margin2:this.margin},"║","‾\\",`${this.hint()} - step in  `,0,"        │");const r=Date.now(),i=g.runWithin(this,e,...t),s=Date.now()-r;return n.Dbg.isOn&&n.Dbg.trace.step&&this.result&&n.Dbg.logAs({margin2:this.margin},"║","_/",`${this.hint()} - step out `,0,this.started>0?"        │":""),s>u.Hooks.mainThreadBlockingWarningThreshold&&n.Dbg.log("","[!]",this.why(),s,"    *** main thread is too busy ***"),i}}run(e,t){t&&(this.args=t),this.obsoleteSince=a.MAX_TIMESTAMP,this.error?this.result=Promise.reject(this.error):g.runWithin(this,v.run,this,e)}markObsoleteDueTo(e,t,r,s){var o,c,l;if(void 0!==this.observables)if(e.isOperation||this!==t.revision.changes.get(t.memberName)){this.unsubscribeFromAllObservables(),this.obsoleteDueTo=t,this.obsoleteSince=r;const l=this.options.kind===i.Kind.Reaction;n.Dbg.isOn&&(n.Dbg.trace.obsolete||(null===(o=this.options.trace)||void 0===o?void 0:o.obsolete))&&n.Dbg.log(n.Dbg.trace.transaction&&!a.Snapshot.current().sealed?"║":" ",l?"█":"▒",l&&t.revision===a.NIL_REV?`${this.hint()} is a reaction and will run automatically (priority ${this.options.priority})`:`${this.hint()} is obsolete due to ${a.Hints.rev(t.revision,t.memberName)} since v${r}${l?` and will run automatically (priority ${this.options.priority})`:""}`),l?s.push(this):null===(c=this.observers)||void 0===c||c.forEach((e=>e.markObsoleteDueTo(this,{revision:this.revision,memberName:this.controller.memberName,usageCount:0},r,s)));const u=this.transaction;u.snapshot===t.revision.snapshot?n.misuse("not implemented: running reactions within original transaction"):u.isFinished||this===e||u.cancel(new Error(`T${u.id}[${u.hint}] is canceled due to obsolete ${a.Hints.rev(t.revision,t.memberName)} changed by T${t.revision.snapshot.id}[${t.revision.snapshot.hint}]`),null)}else n.Dbg.isOn&&(n.Dbg.trace.obsolete||(null===(l=this.options.trace)||void 0===l?void 0:l.obsolete))&&n.Dbg.log(" ","x",`${this.hint()} is not obsolete due to its own change to ${a.Hints.rev(t.revision,t.memberName)}`)}runIfNotUpToDate(e,t){const r=this.options.throttling,s=Date.now()+this.started,o=r?r-s:0;if(e||o<0){if(!this.error&&(this.options.kind===i.Kind.Transaction||!this.successor||this.successor.transaction.isCanceled))try{const e=this.controller.call(!1,void 0);e.result instanceof Promise&&e.result.catch((t=>{e.options.kind===i.Kind.Reaction&&n.misuse(`reaction ${e.hint()} failed and will not run anymore: ${t}`,t)}))}catch(a){if(!t)throw a;this.options.kind===i.Kind.Reaction&&n.misuse(`reaction ${this.hint()} failed and will not run anymore: ${a}`,a)}}else r<Number.MAX_SAFE_INTEGER&&(o>0?setTimeout((()=>this.runIfNotUpToDate(!0,!0)),o):this.addToDeferredReactions())}reenterOver(e){let t;const r=e.successor;if(r&&!r.transaction.isFinished)switch(n.Dbg.isOn&&n.Dbg.trace.obsolete&&n.Dbg.log("║"," [!]",`${this.hint()} is trying to re-enter over ${r.hint()}`),e.options.reentrance){case i.Reentrance.PreventWithError:if(!r.transaction.isCanceled)throw n.misuse(`${e.hint()} (${e.why()}) is not reentrant over ${r.hint()} (${r.why()})`);t=new Error(`T${this.transaction.id}[${this.transaction.hint}] is on hold/PreventWithError due to canceled T${r.transaction.id}[${r.transaction.hint}]`),this.transaction.cancel(t,r.transaction);break;case i.Reentrance.WaitAndRestart:t=new Error(`T${this.transaction.id}[${this.transaction.hint}] is on hold/WaitAndRestart due to active T${r.transaction.id}[${r.transaction.hint}]`),this.transaction.cancel(t,r.transaction);break;case i.Reentrance.CancelAndWaitPrevious:t=new Error(`T${this.transaction.id}[${this.transaction.hint}] is on hold/CancelAndWaitPrevious due to active T${r.transaction.id}[${r.transaction.hint}]`),this.transaction.cancel(t,r.transaction),r.transaction.cancel(new Error(`T${r.transaction.id}[${r.transaction.hint}] is canceled due to re-entering T${this.transaction.id}[${this.transaction.hint}]`),null);break;case i.Reentrance.CancelPrevious:r.transaction.cancel(new Error(`T${r.transaction.id}[${r.transaction.hint}] is canceled due to re-entering T${this.transaction.id}[${this.transaction.hint}]`),null);break;case i.Reentrance.RunSideBySide:}return t?this.error=t:e.successor=this,this}static run(e,t){e.enter();try{e.result=e.options.getter.call(t,...e.args)}finally{e.leaveOrAsync()}}enter(){this.options.monitor&&this.monitorEnter(this.options.monitor),n.Dbg.isOn&&n.Dbg.trace.operation&&n.Dbg.log("║","‾\\",`${this.hint()} - enter`,void 0,`    [ ${a.Hints.obj(this.controller.ownHolder,this.controller.memberName)} ]`),this.started=Date.now()}leaveOrAsync(){this.result instanceof Promise?(this.result=this.result.then((e=>(this.value=e,this.leave(!1,"  □ ","- finished "," OK ──┘"),e)),(e=>{throw this.error=e,this.leave(!1,"  □ ","- finished ","ERR ──┘"),e})),n.Dbg.isOn&&(n.Dbg.trace.operation?n.Dbg.log("║","_/",`${this.hint()} - leave... `,0,"ASYNC ──┐"):n.Dbg.trace.transaction&&n.Dbg.log("║","  ",`${this.hint()}... `,0,"ASYNC"))):(this.value=this.result,this.leave(!0,"_/","- leave"))}leave(e,t,r,i){const s=Date.now()-this.started;this.started=-this.started,n.Dbg.isOn&&n.Dbg.trace.operation&&n.Dbg.log("║",`${t}`,`${this.hint()} ${r}`,s,i),s>(e?u.Hooks.mainThreadBlockingWarningThreshold:u.Hooks.asyncActionDurationWarningThreshold)&&n.Dbg.log("","[!]",this.why(),s,e?"    *** main thread is too busy ***":"    *** async is too long ***"),this.options.monitor&&this.monitorLeave(this.options.monitor)}monitorEnter(e){const t={hint:"Monitor.enter",standalone:!0,trace:n.Dbg.isOn&&n.Dbg.trace.monitor?void 0:n.Dbg.global};g.runWithin(void 0,c.Transaction.runAs,t,l.MonitorImpl.enter,e,this.transaction)}monitorLeave(e){c.Transaction.standalone((()=>{const t=()=>{const t={hint:"Monitor.leave",standalone:!0,trace:n.Dbg.isOn&&n.Dbg.trace.monitor?void 0:n.Dbg.DefaultLevel};g.runWithin(void 0,c.Transaction.runAs,t,l.MonitorImpl.leave,e,this.transaction)};this.transaction.whenFinished().then(t,t)}))}addToDeferredReactions(){v.deferredReactions.push(this),1===v.deferredReactions.length&&setTimeout(v.processDeferredReactions,0)}static processDeferredReactions(){const e=v.deferredReactions;v.deferredReactions=[];for(const t of e)t.runIfNotUpToDate(!0,!0)}static markUsed(e,t,r,n,s,c){if(s!==i.Kind.Transaction){const s=v.current;if(s&&s.options.kind!==i.Kind.Transaction&&r!==o.Meta.Holder){const i=a.Snapshot.current();i!==t.snapshot&&i.bumpBy(t.snapshot.timestamp);const o=c?-1:i.timestamp;s.subscribeTo(e,t,r,n,o)||s.markObsoleteDueTo(e,{revision:t,memberName:r,usageCount:0},i.timestamp,i.reactions)}}}static markEdited(e,t,r,i,s){t?r.changes.set(i,v.current):r.changes.delete(i),n.Dbg.isOn&&n.Dbg.trace.write&&(t?n.Dbg.log("║","  ♦",`${a.Hints.rev(r,i)} = ${m(e)}`):n.Dbg.log("║","  ♦",`${a.Hints.rev(r,i)} = ${m(e)}`,void 0," (same as previous)"))}static isConflicting(e,t){let r=e!==t;return r&&(r=e instanceof v&&e.cause!==b),r}static propagateAllChangesThroughSubscriptions(e){var t;const r=e.timestamp,n=e.reactions;e.changeset.forEach(((e,t)=>{if(e.changes.has(o.Meta.Disposed))for(const i in e.prev.revision.data)v.propagateMemberChangeThroughSubscriptions(!0,r,e,i,t,n);else e.changes.forEach(((i,s)=>v.propagateMemberChangeThroughSubscriptions(!1,r,e,s,t,n)))})),n.sort(D),null===(t=e.options.journal)||void 0===t||t.remember(h.TransactionJournalImpl.createPatch(e.hint,e.changeset))}static revokeAllSubscriptions(e){e.changeset.forEach(((t,r)=>t.changes.forEach(((n,i)=>v.propagateMemberChangeThroughSubscriptions(!0,e.timestamp,t,i,r,void 0)))))}static propagateMemberChangeThroughSubscriptions(e,t,r,i,s,c){var l;if(c){const e=r.prev.revision.data[i];if(void 0!==e&&e instanceof o.Observable){const n={revision:r,memberName:i,usageCount:0};e instanceof v&&(e.obsoleteSince===a.MAX_TIMESTAMP||e.obsoleteSince<=0)&&(e.obsoleteDueTo=n,e.obsoleteSince=t,e.unsubscribeFromAllObservables()),null===(l=e.observers)||void 0===l||l.forEach((r=>r.markObsoleteDueTo(e,n,t,c)))}}const h=r.data[i];h instanceof v?h.revision===r&&void 0!==h.observables&&(u.Hooks.repetitiveUsageWarningThreshold<Number.MAX_SAFE_INTEGER&&h.observables.forEach(((e,t)=>{e.usageCount>u.Hooks.repetitiveUsageWarningThreshold&&n.Dbg.log("","[!]",`${h.hint()} uses ${a.Hints.rev(e.revision,e.memberName)} ${e.usageCount} times (consider remembering it in a local variable)`,0," *** WARNING ***")})),e&&h.unsubscribeFromAllObservables()):h instanceof o.Observable&&h.observers&&(h.observers.forEach((e=>{e.observables.delete(h),n.Dbg.isOn&&n.Dbg.trace.read&&n.Dbg.log(n.Dbg.trace.transaction&&!a.Snapshot.current().sealed?"║":" ","-",`${e.hint()} is unsubscribed from own-changed ${a.Hints.rev(r,i)}`)})),h.observers=void 0)}unsubscribeFromAllObservables(){var e;null===(e=this.observables)||void 0===e||e.forEach(((e,t)=>{var r;t.observers.delete(this),n.Dbg.isOn&&(n.Dbg.trace.read||(null===(r=this.options.trace)||void 0===r?void 0:r.read))&&n.Dbg.log(n.Dbg.trace.transaction&&!a.Snapshot.current().sealed?"║":" ","-",`${this.hint()} is unsubscribed from ${a.Hints.rev(e.revision,e.memberName)}`)})),this.observables=void 0}subscribeTo(e,t,r,i,s){var o,c;const l=v.isValid(e,t,r,i,s);if(l){let i=0;if(u.Hooks.repetitiveUsageWarningThreshold<Number.MAX_SAFE_INTEGER){const t=this.observables.get(e);i=t?t.usageCount+1:1}e.observers||(e.observers=new Set);const s={revision:t,memberName:r,usageCount:i};e.observers.add(this),this.observables.set(e,s),n.Dbg.isOn&&(n.Dbg.trace.read||(null===(o=this.options.trace)||void 0===o?void 0:o.read))&&n.Dbg.log("║","  ∞ ",`${this.hint()} is subscribed to ${a.Hints.rev(t,r)}${s.usageCount>1?` (${s.usageCount} times)`:""}`)}else n.Dbg.isOn&&(n.Dbg.trace.read||(null===(c=this.options.trace)||void 0===c?void 0:c.read))&&n.Dbg.log("║","  x ",`${this.hint()} is NOT subscribed to already obsolete ${a.Hints.rev(t,r)}`);return l}static isValid(e,t,r,n,i){let s=!t.snapshot.sealed||e===n.head.data[r];return s&&-1!==i&&(s=!(e instanceof v&&i>=e.obsoleteSince)),s}static createControllerAndGetHook(e,t,r){const n=new g(e,t),i=(...e)=>n.call(!1,e).result;return o.Meta.set(i,o.Meta.Controller,n),i}static rememberOperationOptions(e,t,r,n,s,c,l,h){const d=o.Meta.acquire(e,o.Meta.Initial);let b=d[t];const f=b?b.controller:new g(p,t),m=b?b.options:u.OptionsImpl.INITIAL;if(d[t]=b=new v(f,a.NIL_REV,new u.OptionsImpl(r,n,m,l,h)),b.options.kind===i.Kind.Reaction&&b.options.throttling<Number.MAX_SAFE_INTEGER){o.Meta.acquire(e,o.Meta.Reactions)[t]=b}else if(b.options.kind===i.Kind.Reaction&&b.options.throttling>=Number.MAX_SAFE_INTEGER){delete o.Meta.getFrom(e,o.Meta.Reactions)[t]}return b.options}static init(){Object.freeze(d),Object.freeze(b),n.Dbg.getMergedTraceOptions=y,a.Snapshot.markUsed=v.markUsed,a.Snapshot.markEdited=v.markEdited,a.Snapshot.isConflicting=v.isConflicting,a.Snapshot.propagateAllChangesThroughSubscriptions=v.propagateAllChangesThroughSubscriptions,a.Snapshot.revokeAllSubscriptions=v.revokeAllSubscriptions,u.Hooks.createControllerAndGetHook=v.createControllerAndGetHook,u.Hooks.rememberOperationOptions=v.rememberOperationOptions,Promise.prototype.then=w;try{Object.defineProperty(globalThis,"rWhy",{get:g.why,configurable:!1,enumerable:!1}),Object.defineProperty(globalThis,"rBriefWhy",{get:g.briefWhy,configurable:!1,enumerable:!1})}catch(e){}try{Object.defineProperty(r.g,"rWhy",{get:g.why,configurable:!1,enumerable:!1}),Object.defineProperty(r.g,"rBriefWhy",{get:g.briefWhy,configurable:!1,enumerable:!1})}catch(e){}}}function f(e,t){const r=[];let n=e.revision.data[e.memberName];for(;n instanceof v&&n.obsoleteDueTo;)t&&r.push(a.Hints.rev(e.revision,e.memberName)),n=(e=n.obsoleteDueTo).revision.data[e.memberName];return r.push(a.Hints.rev(e.revision,e.memberName)),t&&r.push(e.revision.snapshot.hint),r}function m(e){let t="";return t=Array.isArray(e)?`Array(${e.length})`:e instanceof Set?`Set(${e.size})`:e instanceof Map?`Map(${e.size})`:e instanceof v?`<rerun over ${a.Hints.rev(e.revision.prev.revision)}>`:e===o.Meta.Disposed?"<disposed>":null!=e?e.toString().slice(0,20):"◌",t}function y(e){const t=c.Transaction.current;let r=n.Dbg.merge(t.options.trace,t.id>1?31+t.id%6:37,t.id>1?`T${t.id}`:`-${a.Snapshot.idGen.toString().replace(/[0-9]/g,"-")}`,n.Dbg.global);return r=n.Dbg.merge({margin1:t.margin},void 0,void 0,r),v.current&&(r=n.Dbg.merge({margin2:v.current.margin},void 0,void 0,r)),e&&(r=n.Dbg.merge(e,void 0,void 0,r)),r}v.current=void 0,v.deferredReactions=[];const O=Promise.prototype.then;function w(e,t){const r=c.Transaction.current;if(!r.isFinished){e||(e=S),t||(t=T);const n=v.current;n&&(e=n.bind(e),t=n.bind(t)),e=r.bind(e,!1),t=r.bind(t,!0)}return O.call(this,e,t)}function D(e,t){return e.priority-t.priority}function S(e){return e}function T(e){throw e}t.resolveReturn=S,t.rejectRethrow=T,v.init()},319:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultSnapshotOptions=t.NIL_REV=t.Hints=t.Snapshot=t.UNDEFINED_TIMESTAMP=t.MAX_TIMESTAMP=void 0;const n=r(971),i=r(987),s=r(281),o=r(19),a=r(250),c=r(949),l=r(893);t.MAX_TIMESTAMP=Number.MAX_SAFE_INTEGER,t.UNDEFINED_TIMESTAMP=t.MAX_TIMESTAMP-1,Object.defineProperty(l.ObjectHolder.prototype,"<snapshot>",{configurable:!1,enumerable:!1,get(){const e={},t=u.current().getCurrentRevision(this,"<snapshot>").data;for(const r in t){const n=t[r];n instanceof l.Observable?e[r]=n.value:n===l.Meta.Unobservable?e[r]=this.unobservable[r]:e[r]=n}return e}});class u{constructor(e){this.id=++u.idGen,this.options=null!=e?e:t.DefaultSnapshotOptions,this.stamp=t.UNDEFINED_TIMESTAMP,this.bumper=100,this.changeset=new Map,this.reactions=[],this.sealed=!1}get hint(){var e;return null!==(e=this.options.hint)&&void 0!==e?e:"noname"}get timestamp(){return this.stamp}seekRevision(e,r){let n=e.editing;if(n&&n.snapshot!==this&&(n=this.changeset.get(e),n&&(e.editing=n)),!n)for(n=e.head;n!==t.NIL_REV&&n.snapshot.timestamp>this.timestamp;)n=n.prev.revision;return n}getCurrentRevision(e,r){const n=this.seekRevision(e,r);if(n===t.NIL_REV)throw i.misuse(`object ${h.obj(e)} doesn't exist in snapshot v${this.stamp} (${this.hint})`);return n}getEditableRevision(e,r,n,i){let s=this.seekRevision(e,r);const o=s.data[r];if(o!==l.Meta.Unobservable){if(this.checkIfEditable(e,s,r,o,n,i),s.snapshot!==this){const t=Object.assign({},r===l.Meta.Holder?n:s.data);Reflect.set(t,l.Meta.Holder,e),s=new l.ObjectRevision(this,s,t),this.changeset.set(e,s),e.editing=s,e.editors++}}else s=t.NIL_REV;return s}static takeSnapshot(e){return e[l.Meta.Holder]["<snapshot>"]}static dispose(e){const t=u.edit(),r=l.Meta.get(e,l.Meta.Holder);r&&u.doDispose(t,r)}static doDispose(e,r){const n=e.getEditableRevision(r,l.Meta.Disposed,l.Meta.Disposed);return n!==t.NIL_REV&&(n.data[l.Meta.Disposed]=l.Meta.Disposed,u.markEdited(l.Meta.Disposed,!0,n,l.Meta.Disposed,r)),n}checkIfEditable(e,r,n,s,o,a){if(this.sealed)throw i.misuse(`observable property ${h.obj(e,n)} can only be modified inside transaction`);if(n!==l.Meta.Holder&&o!==l.Meta.Holder){if((r.snapshot!==this||r.prev.revision!==t.NIL_REV)&&void 0!==this.options.token&&a!==this.options.token)throw i.misuse(`${this.hint} should not have side effects (trying to change ${h.rev(r,n)})`);if(r===t.NIL_REV)throw i.misuse(`member ${h.rev(r,n)} doesn't exist in snapshot v${this.stamp} (${this.hint})`)}}acquire(e){if(!this.sealed&&this.stamp===t.UNDEFINED_TIMESTAMP){const r=void 0===this.options.token||e.stamp===t.UNDEFINED_TIMESTAMP;this.stamp=r?u.stampGen:e.stamp,u.pending.push(this),void 0===u.oldest&&(u.oldest=this),i.Dbg.isOn&&i.Dbg.trace.transaction&&i.Dbg.log("╔══",`v${this.stamp}`,`${this.hint}`)}}bumpBy(e){e>this.bumper&&(this.bumper=e)}rebase(){let e;return this.changeset.size>0&&(this.changeset.forEach(((t,r)=>{if(t.prev.revision!==r.head){const n=u.merge(t,r.head);t.conflicts.size>0&&(e||(e=[]),e.push(t)),i.Dbg.isOn&&i.Dbg.trace.change&&i.Dbg.log("╠╝","",`${h.rev(t)} is merged with ${h.rev(r.head)} among ${n} properties with ${t.conflicts.size} conflicts.`)}})),void 0===this.options.token?this.bumper>100?(this.bumper=this.stamp,this.stamp=++u.stampGen):this.stamp=this.bumper+1:this.stamp=this.bumper),e}static merge(e,t){let r=0;const s=t.changes.has(l.Meta.Disposed),o=Object.assign({},t.data);return e.changes.forEach(((n,a)=>{if(r++,o[a]=e.data[a],s||a===l.Meta.Disposed)s!==(a===l.Meta.Disposed)&&(i.Dbg.isOn&&i.Dbg.trace.change&&i.Dbg.log("║╠","",`${h.rev(e,a)} <> ${h.rev(t,a)}`,0," *** CONFLICT ***"),e.conflicts.set(a,t));else{const r=u.isConflicting(t.data[a],e.prev.revision.data[a]);r&&e.conflicts.set(a,t),i.Dbg.isOn&&i.Dbg.trace.change&&i.Dbg.log("║╠","",`${h.rev(e,a)} ${r?"<>":"=="} ${h.rev(t,a)}`,0,r?" *** CONFLICT ***":void 0)}})),n.Utils.copyAllMembers(o,e.data),e.prev.revision=t,r}applyOrDiscard(e){this.sealed=!0,this.changeset.forEach(((r,n)=>{u.sealObjectRevision(n,r),n.editors--,0===n.editors&&(n.editing=void 0),e||(n.head=r,u.garbageCollectionSummaryInterval<Number.MAX_SAFE_INTEGER&&(u.totalObjectRevisionCount++,r.prev.revision===t.NIL_REV&&u.totalObjectHolderCount++))})),i.Dbg.isOn&&(i.Dbg.trace.change&&this.changeset.forEach(((e,r)=>{const n=[];e.changes.forEach(((e,t)=>n.push(t.toString())));const s=n.join(", ");i.Dbg.log("║","√",`${h.rev(e)} (${s}) is ${e.prev.revision===t.NIL_REV?"constructed":`applied on top of ${h.rev(e.prev.revision)}`}`)})),i.Dbg.trace.transaction&&i.Dbg.log(this.stamp<t.UNDEFINED_TIMESTAMP?"╚══":"═══",`v${this.stamp}`,`${this.hint} - ${e?"CANCEL":"APPLY"}(${this.changeset.size})${e?` - ${e}`:""}`)),e||u.propagateAllChangesThroughSubscriptions(this)}static sealObjectRevision(e,t){if(t.changes.has(l.Meta.Disposed))for(const r in t.prev.revision.data)t.data[r]=l.Meta.Disposed;else t.changes.forEach(((r,n)=>u.sealObservable(t.data[n],n,e.proxy.constructor.name)));i.Dbg.isOn&&u.freezeObjectRevision(t)}static sealObservable(e,t,r){if(e instanceof l.Observable){const n=e.value;if(null!=n){const i=Object.getPrototypeOf(n)[s.Sealant.SealedType];i&&(e.value=s.Sealant.seal(n,i,r,t))}}}collectGarbage(){i.Dbg.isOn&&(n.Utils.freezeMap(this.changeset),Object.freeze(this.reactions),Object.freeze(this)),this.triggerGarbageCollection()}static freezeObjectRevision(e){return Object.freeze(e.data),n.Utils.freezeMap(e.changes),n.Utils.freezeMap(e.conflicts),e}triggerGarbageCollection(){if(0!==this.stamp&&this===u.oldest){const e=u.pending;e.sort(((e,t)=>e.stamp-t.stamp));let t=0;for(;t<e.length&&e[t].sealed;)e[t].unlinkHistory(),t++;u.pending=e.slice(t),u.oldest=u.pending[0];const r=Date.now();r-u.lastGarbageCollectionSummaryTimestamp>u.garbageCollectionSummaryInterval&&(i.Dbg.log("","[G]",`Total object/revision count: ${u.totalObjectHolderCount}/${u.totalObjectRevisionCount}`),u.lastGarbageCollectionSummaryTimestamp=r)}}unlinkHistory(){i.Dbg.isOn&&i.Dbg.trace.gc&&i.Dbg.log("","[G]",`Dismiss history below v${this.stamp}t${this.id} (${this.hint})`),this.changeset.forEach(((e,r)=>{i.Dbg.isOn&&i.Dbg.trace.gc&&e.prev.revision!==t.NIL_REV&&i.Dbg.log(" ","  ",`${h.rev(e.prev.revision)} is ready for GC because overwritten by ${h.rev(e)}`),u.garbageCollectionSummaryInterval<Number.MAX_SAFE_INTEGER&&(e.prev.revision!==t.NIL_REV&&u.totalObjectRevisionCount--,e.changes.has(l.Meta.Disposed)&&u.totalObjectHolderCount--),e.prev.revision=t.NIL_REV}))}static _init(){const e=t.NIL_REV.snapshot;e.acquire(e),e.applyOrDiscard(),e.collectGarbage(),u.freezeObjectRevision(t.NIL_REV),u.idGen=100,u.stampGen=101,u.oldest=void 0,o.SealedArray.prototype,a.SealedMap.prototype,c.SealedSet.prototype}}t.Snapshot=u,u.idGen=-1,u.stampGen=1,u.pending=[],u.oldest=void 0,u.garbageCollectionSummaryInterval=Number.MAX_SAFE_INTEGER,u.lastGarbageCollectionSummaryTimestamp=Date.now(),u.totalObjectHolderCount=0,u.totalObjectRevisionCount=0,u.current=n.UNDEF,u.edit=n.UNDEF,u.markUsed=n.UNDEF,u.markEdited=n.UNDEF,u.isConflicting=n.UNDEF,u.propagateAllChangesThroughSubscriptions=e=>{},u.revokeAllSubscriptions=e=>{};class h{static obj(e,t,r,n,i){const s=void 0!==t?`.${t.toString()}`:"";return void 0===e?`nil${s}`:void 0===r?`${e.hint}${s} #${e.id}`:`${e.hint}${s} #${e.id}t${n}v${r}`}static rev(e,t){const r=l.Meta.get(e.data,l.Meta.Holder);return h.obj(r,t,e.snapshot.timestamp,e.snapshot.id)}static conflicts(e){return e.map((e=>{const t=[];return e.conflicts.forEach(((r,n)=>{t.push(h.conflictingMemberHint(n,e,r))})),t.join(", ")})).join(", ")}static conflictingMemberHint(e,t,r){return`${r.snapshot.hint} on ${h.rev(r,e)}`}}t.Hints=h,t.NIL_REV=new l.ObjectRevision(new u({hint:"<nil>"}),void 0,{}),t.DefaultSnapshotOptions=Object.freeze({hint:"noname",standalone:!1,journal:void 0,trace:void 0,token:void 0})},807:function(e,t,r){"use strict";var n=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.Transaction=void 0;const i=r(971),s=r(987),o=r(319);class a{static get current(){return c.current}whenFinished(){return n(this,void 0,void 0,(function*(){}))}static create(e){return new c(e)}static run(e,...t){return c.run(e,...t)}static runAs(e,t,...r){return c.runAs(e,t,...r)}static standalone(e,...t){return c.standalone(e,...t)}}t.Transaction=a;class c extends a{constructor(e){super(),this.margin=c.curr?c.curr.margin+1:-1,this.snapshot=new o.Snapshot(e),this.pending=0,this.sealed=!1,this.canceled=void 0,this.after=void 0,this.promise=void 0,this.resolve=i.UNDEF,this.reject=i.UNDEF}static get current(){return c.curr}get id(){return this.snapshot.id}get hint(){return this.snapshot.hint}get options(){return this.snapshot.options}get timestamp(){return this.snapshot.timestamp}get error(){return this.canceled}run(e,...t){return this.guard(),this.runImpl(void 0,e,...t)}inspect(e,...t){const r=c.inspection;try{return c.inspection=!0,s.Dbg.isOn&&s.Dbg.trace.transaction&&s.Dbg.log(" "," ",`T${this.id}[${this.hint}] is being inspected by T${c.curr.id}[${c.curr.hint}]`),this.runImpl(void 0,e,...t)}finally{c.inspection=r}}apply(){if(this.pending>0)throw s.misuse("cannot apply transaction having active operations running");if(this.canceled)throw s.misuse(`cannot apply transaction that is already canceled: ${this.canceled}`);this.seal()}seal(){return this.sealed||this.run(c.seal,this,void 0,void 0),this}bind(e,t){this.guard();const r=this,n=c.inspection;n?r.inspect(c.boundEnter,r,t):r.run(c.boundEnter,r,t);return(...i)=>n?r.inspect(c.boundLeave,r,t,e,...i):r.runImpl(void 0,c.boundLeave,r,t,e,...i)}static boundEnter(e,t){t||e.pending++}static boundLeave(e,t,r,...n){e.pending--;return r(...n)}cancel(e,t){return this.runImpl(void 0,c.seal,this,e,null===t?c.none:t),this}get isCanceled(){return void 0!==this.canceled}get isFinished(){return this.sealed&&0===this.pending}whenFinished(){return n(this,void 0,void 0,(function*(){this.isFinished||(yield this.acquirePromise())}))}static run(e,...t){return c.runAs(null,e,...t)}static runAs(e,t,...r){const n=c.acquire(e),i=n!==c.curr;n.guard();let s=n.runImpl(null==e?void 0:e.trace,t,...r);return i&&(s instanceof Promise&&(s=c.standalone((()=>n.wrapToRetry(n.wrapToWaitUntilFinish(s),t,...r)))),n.seal()),s}static standalone(e,...t){const r=c.curr;try{return c.curr=c.none,e(...t)}finally{c.curr=r}}static acquire(e){return(null==e?void 0:e.standalone)||c.curr.isFinished?new c(e):c.curr}guard(){if(this.sealed&&c.curr!==this)throw s.misuse("cannot run transaction that is already sealed")}wrapToRetry(e,t,...r){return n(this,void 0,void 0,(function*(){try{const t=yield e;if(this.canceled)throw this.canceled;return t}catch(n){if(this.after!==c.none){if(this.after){yield this.after.whenFinished();const e={hint:`${this.hint} - restart after T${this.after.id}`,standalone:!0,trace:this.snapshot.options.trace,token:this.snapshot.options.token};return c.runAs(e,t,...r)}throw n}return}}))}wrapToWaitUntilFinish(e){return n(this,void 0,void 0,(function*(){const t=yield e;return yield this.whenFinished(),t}))}runImpl(e,t,...r){let n;const i=c.curr;try{if(c.curr=this,this.pending++,this.snapshot.acquire(i.snapshot),n=t(...r),this.sealed&&1===this.pending)if(this.canceled){if(!this.after)throw this.canceled}else this.checkForConflicts()}catch(s){throw c.inspection||this.cancel(s),s}finally{this.pending--,this.sealed&&0===this.pending?(this.applyOrDiscard(),c.curr=i,c.standalone(c.runReactions,this)):c.curr=i}return n}static runReactions(e){e.snapshot.reactions.forEach((e=>e.runIfNotUpToDate(!1,!0)))}static seal(e,t,r){!e.canceled&&t&&(e.canceled=t,e.after=r,s.Dbg.isOn&&s.Dbg.trace.transaction&&(s.Dbg.log("║"," [!]",`${t.message}`,void 0," *** CANCEL ***"),r&&r!==c.none&&s.Dbg.log("║"," [!]",`T${e.id}[${e.hint}] will be restarted${e!==r?` after T${r.id}[${r.hint}]`:""}`)),o.Snapshot.revokeAllSubscriptions(e.snapshot)),e.sealed=!0}checkForConflicts(){const e=this.snapshot.rebase();e&&this.tryResolveConflicts(e)}tryResolveConflicts(e){throw s.error(`T${this.id}[${this.hint}] conflicts with: ${o.Hints.conflicts(e)}`,void 0)}applyOrDiscard(){try{s.Dbg.isOn&&s.Dbg.trace.change&&s.Dbg.log("╠══","","",void 0," changes"),this.snapshot.applyOrDiscard(this.canceled),this.snapshot.collectGarbage(),this.promise&&(this.canceled&&!this.after?this.reject(this.canceled):this.resolve()),s.Dbg.isOn&&Object.freeze(this)}catch(e){throw s.fatal(e),e}}acquirePromise(){return this.promise||(this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))),this.promise}static getCurrentSnapshot(){return c.curr.snapshot}static editSnapshot(){if(c.inspection)throw s.misuse("cannot make changes during transaction inspection");return c.curr.snapshot}static _init(){o.Snapshot.current=c.getCurrentSnapshot,o.Snapshot.edit=c.editSnapshot,c.none.sealed=!0,c.none.snapshot.applyOrDiscard(),o.Snapshot._init()}}c.none=new c({hint:"<none>"}),c.curr=c.none,c.inspection=!1,c._init()},327:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TransactionJournalImpl=t.TransactionJournal=void 0;const n=r(30),i=r(893),s=r(319),o=r(807),a=r(281);class c extends n.ObservableObject{static create(){return new l}}t.TransactionJournal=c;class l extends c{constructor(){super(...arguments),this._capacity=5,this._items=[],this._position=0}get capacity(){return this._capacity}set capacity(e){this._capacity=e,e<this._items.length&&this._items.splice(0,this._items.length-e)}get items(){return this._items}get canUndo(){return this._items.length>0&&this._position>0}get canRedo(){return this._position<this._items.length}remember(e){o.Transaction.runAs({hint:"TransactionJournal.remember",standalone:!0},(()=>{const t=this._items=this._items.toMutable();t.length>=this._capacity?t.shift():t.splice(this._position),t.push(e),this._position=t.length}))}undo(e=1){o.Transaction.runAs({hint:"TransactionJournal.undo",standalone:!0},(()=>{let t=this._position-1;for(;t>=0&&e>0;){const r=this._items[t];l.applyPatch(r,!0),t--,e--}this._position=t+1}))}redo(e=1){o.Transaction.runAs({hint:"TransactionJournal.redo",standalone:!0},(()=>{let t=this._position;for(;t<this._items.length&&e>0;){const r=this._items[t];l.applyPatch(r,!1),t++,e--}this._position=t}))}static createPatch(e,t){const r={hint:e,objects:new Map};return t.forEach(((e,t)=>{const n={current:{},former:{}},o=e.prev.revision!==s.NIL_REV?e.prev.revision.data:void 0;e.changes.forEach(((t,r)=>{n.current[r]=u(e.data[r]),o&&(n.former[r]=u(o[r]))})),o||(delete n.current[i.Meta.Disposed],n.former[i.Meta.Disposed]=i.Meta.Disposed),r.objects.set(t.proxy,n)})),r}static applyPatch(e,t){const r=s.Snapshot.edit();e.objects.forEach(((e,n)=>{const o=i.Meta.get(n,i.Meta.Holder),a=t?e.former:e.current;if(a[i.Meta.Disposed]!==i.Meta.Disposed)for(const t in a){const e=a[t],n=r.getEditableRevision(o,t,e);if(n.snapshot===r){n.data[t]=new i.Observable(e);const r=n.prev.revision.data[t];s.Snapshot.markEdited(e,r!==e,n,t,o)}}else s.Snapshot.doDispose(r,o)}))}}function u(e){const t=e.value,r=null==t?void 0:t[a.Sealant.CreateCopy];return r?r.call(t):t}t.TransactionJournalImpl=l},987:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Dbg=t.fatal=t.misuse=t.error=void 0,t.error=function(e,t){return r.isOn&&r.trace.error&&r.log("█"," ███",e,void 0," *** ERROR ***",t),new Error(e)},t.misuse=function(e,t){const n=new Error(e);return r.log(" "," ███",e,void 0," *** ERROR / MISUSE ***",null!=t?t:n),n},t.fatal=function(e){return r.log(" "," ███",e.message,void 0," *** FATAL ***",e),e};class r{static get trace(){return this.getMergedTraceOptions(void 0)}static setTraceMode(e,t){if(r.isOn=e,r.global=t||r.DefaultLevel,e){const e=r.global,t=Object.keys(r.global).filter((t=>!0===e[t])).join(", ");r.log("","",`Reactronic trace is enabled: ${t}`),r.log("","","Method-level trace can be configured with @trace decorator")}else r.log("","","Reactronic trace is disabled")}static log(e,t,n,i=0,s,o){r.logAs(void 0,e,t,n,i,s,o)}static logAs(e,t,n,i,s=0,o,a){const c=r.getMergedTraceOptions(e),l="  ".repeat(c.margin1>=0?c.margin1:0),u="  ".repeat(c.margin2);(e&&void 0!==e.silent?e.silent:c.silent)||(console.log("[37m%s[0m ["+c.color+"m%s %s%s[0m ["+c.color+"m%s%s[0m ["+c.color+"m%s[0m%s","",c.prefix,c.transaction?l:"",c.transaction?t:t.replace(/./g," "),u,n,i,(void 0!==o?`${o}`:"")+(s>2?`    [ ${s}ms ]`:"")),a&&console.log(a))}static merge(e,t,r,n){const i=e?{silent:void 0!==e.silent?e.silent:n.silent,transaction:void 0!==e.transaction?e.transaction:n.transaction,operation:void 0!==e.operation?e.operation:n.operation,step:void 0!==e.step?e.step:n.step,monitor:void 0!==e.monitor?e.monitor:n.monitor,read:void 0!==e.read?e.read:n.read,write:void 0!==e.write?e.write:n.write,change:void 0!==e.change?e.change:n.change,obsolete:void 0!==e.obsolete?e.obsolete:n.obsolete,error:void 0!==e.error?e.error:n.error,warning:void 0!==e.warning?e.warning:n.warning,gc:void 0!==e.gc?e.gc:n.gc,color:void 0!==e.color?e.color:n.color,prefix:void 0!==e.prefix?e.prefix:n.prefix,margin1:void 0!==e.margin1?e.margin1:n.margin1,margin2:void 0!==e.margin2?e.margin2:n.margin2}:Object.assign({},n);return void 0!==t&&(i.color=t),void 0!==r&&(i.prefix=r),i}}t.Dbg=r,r.DefaultLevel={silent:!1,error:!1,warning:!1,transaction:!1,operation:!1,step:!1,monitor:!1,read:!1,write:!1,change:!1,obsolete:!1,gc:!1,color:37,prefix:"",margin1:0,margin2:0},r.isOn=!1,r.global=r.DefaultLevel,r.getMergedTraceOptions=e=>r.global},281:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Sealant=void 0;const n=r(987);class i{static seal(e,t,r,s){let o=e;const a=o[i.CreateCopy];return a&&(o=a.call(o)),n.Dbg.isOn&&n.Dbg.trace.write&&n.Dbg.log("║"," ",`${r}.${s.toString()} - collection is sealed`),Object.setPrototypeOf(o,t),Object.freeze(o),o}static toMutable(e){const t=e[i.CreateCopy];return t&&(e=t.call(e)),e}static error(e){return n.misuse("use toMutable to create mutable copy of sealed collection")}}t.Sealant=i,i.SealedType=Symbol("rxSealedType"),i.CreateCopy=Symbol("rxCreateCopy")},19:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SealedArray=void 0;const n=r(281);class i extends Array{pop(){throw n.Sealant.error(this)}push(...e){throw n.Sealant.error(this)}sort(e){throw n.Sealant.error(this)}splice(e,t,...r){throw n.Sealant.error(this)}unshift(...e){throw n.Sealant.error(this)}[n.Sealant.CreateCopy](){return this.slice()}slice(e,t){const r=super.slice(e,t);return Object.setPrototypeOf(r,Array.prototype),r}}t.SealedArray=i,Object.defineProperty(Array.prototype,"toMutable",{configurable:!1,enumerable:!1,value(){return n.Sealant.toMutable(this)}}),Object.defineProperty(Array.prototype,n.Sealant.SealedType,{value:i.prototype,configurable:!1,enumerable:!1,writable:!1})},250:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SealedMap=void 0;const n=r(281);class i extends Map{clear(){throw n.Sealant.error(this)}delete(e){throw n.Sealant.error(this)}set(e,t){throw n.Sealant.error(this)}[n.Sealant.CreateCopy](){return new Map(this.entries())}}t.SealedMap=i,Object.defineProperty(Map.prototype,"toMutable",{configurable:!1,enumerable:!1,value(){return n.Sealant.toMutable(this)}}),Object.defineProperty(Map.prototype,n.Sealant.SealedType,{value:i.prototype,configurable:!1,enumerable:!1,writable:!1})},949:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SealedSet=void 0;const n=r(281);class i extends Set{add(e){throw n.Sealant.error(this)}clear(){throw n.Sealant.error(this)}delete(e){throw n.Sealant.error(this)}[n.Sealant.CreateCopy](){return new Set(this.values())}}t.SealedSet=i,Object.defineProperty(Set.prototype,"toMutable",{configurable:!1,enumerable:!1,value(){return n.Sealant.toMutable(this)}}),Object.defineProperty(Set.prototype,n.Sealant.SealedType,{value:i.prototype,configurable:!1,enumerable:!1,writable:!1})},971:function(e,t){"use strict";var r=this&&this.__awaiter||function(e,t,r,n){return new(r||(r=Promise))((function(i,s){function o(e){try{c(n.next(e))}catch(t){s(t)}}function a(e){try{c(n.throw(e))}catch(t){s(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,a)}c((n=n.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0}),t.sleep=t.all=t.UNDEF=t.Utils=void 0;function n(...e){throw new Error("this method should never be called")}t.Utils=class{static freezeSet(e){if(e instanceof Set){const t={configurable:!1,enumerable:!1,get:n,set:n};Object.defineProperty(e,"add",t),Object.defineProperty(e,"delete",t),Object.defineProperty(e,"clear",t),Object.freeze(e)}}static freezeMap(e){if(e instanceof Map){const t={configurable:!1,enumerable:!1,get:n,set:n};Object.defineProperty(e,"set",t),Object.defineProperty(e,"delete",t),Object.defineProperty(e,"clear",t),Object.freeze(e)}}static copyAllMembers(e,t){for(const r of Object.getOwnPropertyNames(e))t[r]=e[r];for(const r of Object.getOwnPropertySymbols(e))t[r]=e[r];return t}},t.UNDEF=n,t.all=function(e){return r(this,void 0,void 0,(function*(){let t;const r=yield Promise.all(e.map((e=>e.catch((e=>(t=t||e,e))))));if(t)throw t;return r}))},t.sleep=function(e){return new Promise((function(t){setTimeout(t.bind(null,(()=>t)),e)}))}}}]);