(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();class It{static freezeSet(e){if(e instanceof Set){const t={configurable:!1,enumerable:!1,get:ae,set:ae};Object.defineProperty(e,"add",t),Object.defineProperty(e,"delete",t),Object.defineProperty(e,"clear",t),Object.freeze(e)}return e}static freezeMap(e){if(e instanceof Map){const t={configurable:!1,enumerable:!1,get:ae,set:ae};Object.defineProperty(e,"set",t),Object.defineProperty(e,"delete",t),Object.defineProperty(e,"clear",t),Object.freeze(e)}return e}static copyAllMembers(e,t){for(const i of Object.getOwnPropertyNames(e))t[i]=e[i];for(const i of Object.getOwnPropertySymbols(e))t[i]=e[i];return t}}function ae(...n){throw new Error("this method should never be called")}function Qi(n){return new Promise(function(e){setTimeout(e.bind(null,()=>e),n)})}function wi(n,e,t){let i;return n instanceof Promise?i=n.then(s=>e(s),s=>t(s)):i=e(n),i}function Zi(n){if(n<0)throw new Error(`emitLetters: argument (${n}) should not be negative or zero`);let e="";for(;n>=0;){const t=n%26;n=Math.floor(n/26)-1,e=String.fromCharCode(65+t)+e}return e}function es(n){const e=Error.stackTraceLimit=20,i=new Error().stack||"";Error.stackTraceLimit=e;const s=i.split(`
`);let r=s.findIndex(d=>d.indexOf(".declare")>=0);r=r>=0?r+2:5;let o=gt(s[r]),a=o;if(o.func.endsWith(".update"))r=r-1,o=gt(s[r]),a=gt(s[r+1]);else{for(;!o.func&&r>0;)r=r-1,o=gt(s[r]);a=gt(s[r+1])}return`${n}·${o.func}@${a.file}`}function gt(n){const e=n.match(/(?:\s*at\s+)?(?:(\S+)\s\()?(?:.*?)([^\/\(\)]+)(?:(:|\d)*\)?)$/);return{func:(e==null?void 0:e[1])||"",file:(e==null?void 0:e[2])||""}}class xi{constructor(e,t=!1){this.getKey=e,this.strict=t,this.map=new Map,this.tag=-1,this.current=new fn,this.added=new fn,this.removed=new fn,this.lastNotFoundKey=void 0,this.strictNextItem=void 0}get isStrict(){return this.strict}set isStrict(e){if(this.isMergeInProgress&&this.current.count>0)throw new Error("cannot change strict mode in the middle of merge");this.strict=e}get count(){return this.current.count}get addedCount(){return this.added.count}get removedCount(){return this.removed.count}get isMergeInProgress(){return this.tag>0}lookup(e){let t;return e!==void 0&&e!==this.lastNotFoundKey&&(t=this.map.get(e),t?this.getKey(t.instance)!==e&&(this.lastNotFoundKey=e,t=void 0):this.lastNotFoundKey=e),t}tryMergeAsExisting(e,t,i){const s=this.tag;if(s<0)throw new Error(i??"merge is not in progress");let r=this.strictNextItem;if(e!==(r?this.getKey(r.instance):void 0)&&(r=this.lookup(e)),r)if(r.tag!==s)r.tag=s,this.strict&&r!==this.strictNextItem&&(r.status=s),this.strictNextItem=r.next,this.removed.exclude(r),r.index=this.current.count,this.current.include(r),t&&(t.isDuplicate=!1);else if(t)t.isDuplicate=!0;else throw new Error(`duplicate collection item: ${e}`);else t&&(t.isDuplicate=!1);return r}mergeAsAdded(e){const t=this.getKey(e);if(this.lookup(t)!==void 0)throw new Error(`key is already in use: ${t}`);let i=this.tag;i<0&&(i=~this.tag+1,this.tag=~i);const s=new qn(e,i);return this.map.set(t,s),this.lastNotFoundKey=void 0,this.strictNextItem=void 0,s.index=this.current.count,this.current.include(s),this.added.aux(s),s}mergeAsRemoved(e){const t=e;this.isRemoved(t)||(this.current.exclude(t),this.removed.include(t),t.tag--)}move(e,t){throw new Error("not implemented")}beginMerge(){if(this.isMergeInProgress)throw new Error("merge is in progress already");this.tag=~this.tag+1,this.strictNextItem=this.current.first,this.removed.grab(this.current,!1),this.added.reset()}endMerge(e){if(!this.isMergeInProgress)throw new Error("merge is ended already");if(this.tag=~this.tag,e===void 0){const t=this.current.count;if(t>0){const i=this.getKey;if(t>this.removed.count){const s=this.map;for(const r of this.removed.items())s.delete(i(r.instance))}else{const s=this.map=new Map;for(const r of this.current.items())s.set(i(r.instance),r)}}else this.map=new Map}else{this.current.grab(this.removed,!0);const t=this.getKey;for(const i of this.added.itemsViaAux())this.map.delete(t(i.instance)),this.current.exclude(i);this.added.reset()}}resetAddedAndRemovedLists(){this.removed.reset(),this.added.reset()}firstMergedItem(){return this.current.first}lastMergedItem(){return this.current.last}*items(e){var t;let i=(t=e==null?void 0:e.next)!==null&&t!==void 0?t:this.current.first;for(;i!==void 0;){const s=i.next;yield i,i=s}}*addedItems(e){let t=this.added.first;for(;t!==void 0;){const i=t.aux;this.isRemoved(t)||(yield t),t=i}e&&this.added.reset()}*removedItems(e){let t=this.removed.first;for(;t!==void 0;){const i=t.next;yield t,t=i}e&&this.removed.reset()}isAdded(e){const t=e;let i=this.tag;return i<0&&(i=~i),t.status===~i&&t.tag>0}isMoved(e){const t=e;let i=this.tag;return i<0&&(i=~i),t.status===i&&t.tag>0}isRemoved(e){const t=e,i=this.tag;return i>0?t.tag<i:t.tag<i-1}isActual(e){return e.tag===this.tag}markAsMoved(e){const t=e;t.tag>0&&(t.status=t.tag)}static createItem(e){return new qn(e,0)}}class qn{constructor(e,t){this.instance=e,this.index=-1,this.tag=t,this.status=~t,this.next=void 0,this.prev=void 0,this.aux=void 0}}class fn{constructor(){this.count=0,this.first=void 0,this.last=void 0}*items(){let e=this.first;for(;e!==void 0;){const t=e.next;yield e,e=t}}*itemsViaAux(){let e=this.first;for(;e!==void 0;){const t=e.aux;yield e,e=t}}reset(){this.count=0,this.first=void 0,this.last=void 0}grab(e,t){const i=e.first;if(t&&i){const s=this.last;i.prev=s,s?this.last=s.next=i:this.first=this.last=i,this.count+=e.count}else this.count=e.count,this.first=i,this.last=e.last;e.reset()}include(e){const t=this.last;e.prev=t,e.next=void 0,t?this.last=t.next=e:this.first=this.last=e,this.count++}exclude(e){e.prev!==void 0&&(e.prev.next=e.next),e.next!==void 0&&(e.next.prev=e.prev),e===this.first&&(this.first=e.next),this.count--}aux(e){e.aux=void 0;const t=this.last;t?this.last=t.aux=e:this.first=this.last=e,this.count++}}function ts(n,e){return f.isOn&&f.opt.error&&f.write("█"," ███",n,void 0," *** ERROR ***",e),new Error(n)}function G(n,e){const t=new Error(n);return f.write(" "," ███",n,void 0," *** ERROR / MISUSE ***",e??t),t}function ns(n){return f.write(" "," ███",n.message,void 0," *** FATAL ***",n),n}class f{static get opt(){return this.getMergedLoggingOptions(void 0)}static setMode(e,t){if(f.global=t||f.DefaultLevel,e){const i=f.global,s=Object.keys(f.global).filter(r=>i[r]===!0).join(", ");f.write("","",`Reactronic logging is turned on: ${s}`),f.write("","","Member-level logging can be configured with @options({ logging: ... }) decorator")}else f.isOn&&f.write("","","Reactronic logging is turned off");f.isOn=e}static write(e,t,i,s=0,r=void 0,o){f.writeAs(void 0,e,t,i,s,r,o)}static writeAs(e,t,i,s,r=0,o=void 0,a){const c=f.getMergedLoggingOptions(e),d="  ".repeat(c.margin1>=0?c.margin1:0),l="  ".repeat(c.margin2);(e&&e.enabled!==void 0?e.enabled:c.enabled)&&(console.log("\x1B[37m%s\x1B[0m \x1B["+c.color+"m%s %s%s\x1B[0m \x1B["+c.color+"m%s%s\x1B[0m \x1B["+c.color+"m%s\x1B[0m%s","",c.prefix,c.transaction?d:"",c.transaction?t:t.replace(/./g," "),l,i,s,(o!==void 0?`${o}`:"")+(r>2?`    [ ${r}ms ]`:"")),a&&console.log(a))}static merge(e,t,i,s){const r=e?{enabled:e.enabled!==void 0?e.enabled:s.enabled,transaction:e.transaction!==void 0?e.transaction:s.transaction,operation:e.operation!==void 0?e.operation:s.operation,step:e.step!==void 0?e.step:s.step,indicator:e.indicator!==void 0?e.indicator:s.indicator,read:e.read!==void 0?e.read:s.read,write:e.write!==void 0?e.write:s.write,change:e.change!==void 0?e.change:s.change,obsolete:e.obsolete!==void 0?e.obsolete:s.obsolete,error:e.error!==void 0?e.error:s.error,warning:e.warning!==void 0?e.warning:s.warning,gc:e.gc!==void 0?e.gc:s.gc,color:e.color!==void 0?e.color:s.color,prefix:e.prefix!==void 0?e.prefix:s.prefix,margin1:e.margin1!==void 0?e.margin1:s.margin1,margin2:e.margin2!==void 0?e.margin2:s.margin2}:Object.assign({},s);return t!==void 0&&(r.color=t),i!==void 0&&(r.prefix=i),r}}f.DefaultLevel={enabled:!0,error:!1,warning:!1,transaction:!1,operation:!1,step:!1,indicator:!1,read:!1,write:!1,change:!1,obsolete:!1,gc:!1,color:37,prefix:"",margin1:0,margin2:0};f.isOn=!1;f.global=f.DefaultLevel;f.getMergedLoggingOptions=n=>f.global;class V{static seal(e,t,i,s){let r=e;const o=r[V.CreateCopy];return o&&(r=o.call(r)),f.isOn&&f.opt.write&&f.write("║"," ",`${i}.${s.toString()} - collection is sealed`),Object.setPrototypeOf(r,t),Object.freeze(r),r}static toMutable(e){const i=e[V.CreateCopy];return i&&(e=i.call(e)),e}static error(e){return G("use toMutable to create mutable copy of sealed collection")}}V.SealedType=Symbol("rxSealedType");V.CreateCopy=Symbol("rxCreateCopy");class is extends Array{pop(){throw V.error(this)}push(...e){throw V.error(this)}sort(e){throw V.error(this)}splice(e,t,...i){throw V.error(this)}unshift(...e){throw V.error(this)}[V.CreateCopy](){return this.slice()}slice(e,t){const i=super.slice(e,t);return Object.setPrototypeOf(i,Array.prototype),i}}Object.defineProperty(Array.prototype,"toMutable",{configurable:!1,enumerable:!1,value(){return V.toMutable(this)}});Object.defineProperty(Array.prototype,V.SealedType,{value:is.prototype,configurable:!1,enumerable:!1,writable:!1});class ss extends Map{clear(){throw V.error(this)}delete(e){throw V.error(this)}set(e,t){throw V.error(this)}[V.CreateCopy](){return new Map(this.entries())}}Object.defineProperty(Map.prototype,"toMutable",{configurable:!1,enumerable:!1,value(){return V.toMutable(this)}});Object.defineProperty(Map.prototype,V.SealedType,{value:ss.prototype,configurable:!1,enumerable:!1,writable:!1});class rs extends Set{add(e){throw V.error(this)}clear(){throw V.error(this)}delete(e){throw V.error(this)}[V.CreateCopy](){return new Set(this.values())}}Object.defineProperty(Set.prototype,"toMutable",{configurable:!1,enumerable:!1,value(){return V.toMutable(this)}});Object.defineProperty(Set.prototype,V.SealedType,{value:rs.prototype,configurable:!1,enumerable:!1,writable:!1});const $={Off:{enabled:!1,transaction:!1,operation:!1,step:!1,indicator:!1,read:!1,write:!1,change:!1,obsolete:!1,error:!0,warning:!0,gc:!1,color:37,prefix:"",margin1:0,margin2:0},ErrorsOnly:{enabled:!0,transaction:!1,operation:!1,step:!1,indicator:!1,read:!1,write:!1,change:!1,obsolete:!1,error:!0,warning:!0,gc:!1,color:37,prefix:"",margin1:0,margin2:0},Reactions:{enabled:!0,transaction:!1,operation:!1,step:!1,indicator:!1,read:!1,write:!1,change:!1,obsolete:!0,error:!0,warning:!0,gc:!1,color:37,prefix:"",margin1:0,margin2:0},Transactions:{enabled:!0,transaction:!0,operation:!1,step:!1,indicator:!1,read:!1,write:!1,change:!1,obsolete:!0,error:!0,warning:!0,gc:!1,color:37,prefix:"",margin1:0,margin2:0},Operations:{enabled:!0,transaction:!0,operation:!0,step:!1,indicator:!0,read:!1,write:!1,change:!0,obsolete:!0,error:!0,warning:!0,gc:!1,color:37,prefix:"",margin1:0,margin2:0},Debug:{enabled:!0,transaction:!0,operation:!0,step:!0,indicator:!0,read:!0,write:!0,change:!0,obsolete:!0,error:!0,warning:!0,gc:!1,color:37,prefix:"",margin1:0,margin2:0}};var ne;(function(n){n[n.plain=0]="plain",n[n.transactional=1]="transactional",n[n.reactive=2]="reactive",n[n.cached=3]="cached"})(ne||(ne={}));var ve;(function(n){n[n.preventWithError=1]="preventWithError",n[n.waitAndRestart=0]="waitAndRestart",n[n.cancelPrevious=-1]="cancelPrevious",n[n.cancelAndWaitPrevious=-2]="cancelAndWaitPrevious",n[n.overwritePrevious=-3]="overwritePrevious",n[n.runSideBySide=-4]="runSideBySide"})(ve||(ve={}));var Y;(function(n){n[n.joinToCurrentTransaction=0]="joinToCurrentTransaction",n[n.joinAsNestedTransaction=1]="joinAsNestedTransaction",n[n.disjoinFromOuterTransaction=2]="disjoinFromOuterTransaction",n[n.disjoinFromOuterAndInnerTransactions=3]="disjoinFromOuterAndInnerTransactions",n[n.disjoinForInternalDisposal=4]="disjoinForInternalDisposal"})(Y||(Y={}));const os=Object.freeze({});class w{static get(e,t){return e[t]}static set(e,t,i){return Object.defineProperty(e,t,{value:i,configurable:!1,enumerable:!1}),e}static acquire(e,t){let i=e[t];return e.hasOwnProperty(t)||(i=Object.assign({},i),w.set(e,t,i)),i}static getFrom(e,t){var i;return(i=e[t])!==null&&i!==void 0?i:os}}w.Handle=Symbol("rx-handle");w.Revision=Symbol("rx-revision");w.Controller=Symbol("rx-controller");w.Initial=Symbol("rx-initial");w.Reactive=Symbol("rx-reactive");w.Raw=Symbol("rx-raw");w.Undefined=Symbol("rx-undefined");class be{get isLaunch(){return!1}constructor(e,t){this.content=e,this.lastEditorChangesetId=t}}class Tn{constructor(e,t,i){this.changeset=e,this.former={objectVersion:t||this},this.data=i,this.changes=new Set,this.conflicts=new Map,f.isOn&&Object.freeze(this)}get revision(){var e,t;return(t=(e=this.data[w.Revision])===null||e===void 0?void 0:e.content)!==null&&t!==void 0?t:0}get disposed(){return this.revision<0}set disposed(e){const t=this.revision;t<0!==e&&(this.data[w.Revision].content=~t)}}class We{constructor(e,t,i,s,r){this.id=++We.generator,this.data=e,this.proxy=t||new Proxy(this,i),this.applied=s,this.editing=void 0,this.editors=0,this.hint=r}static getHint(e,t){const i=w.get(e,w.Handle);return i!==void 0?t?`${i.hint}#${i.id}`:i.hint:void 0}}We.generator=19;const xn=Number.MAX_SAFE_INTEGER,Mt=xn-1;Object.defineProperty(We.prototype,"#this#",{configurable:!1,enumerable:!1,get(){const n={},e=m.current().getObjectVersion(this,"#this#").data;for(const t in e){const i=e[t];i instanceof be?n[t]=i.content:i===w.Raw?n[t]=this.data[t]:n[t]=i}return n}});const as=Object.freeze([]),cs=It.freezeMap(new Map);class m{get hint(){var e;return(e=this.options.hint)!==null&&e!==void 0?e:"noname"}get timestamp(){return this.revision}constructor(e,t){this.id=++m.idGen,this.options=e??ds,this.parent=t,this.revision=Mt,this.bumper=100,this.items=new Map,this.obsolete=[],this.sealed=!1}lookupObjectVersion(e,t,i){let s=e.editing;s&&s.changeset!==this&&(s=this.items.get(e),s&&(e.editing=s));const r=this.parent;if(s)!i&&r&&!s.changes.has(t)&&s.former.objectVersion!==X&&(s=r.lookupObjectVersion(e,t,i));else if(r)s=r.lookupObjectVersion(e,t,i);else for(s=e.applied;s!==X&&s.changeset.timestamp>this.timestamp;)s=s.former.objectVersion;return s}getObjectVersion(e,t){const i=this.lookupObjectVersion(e,t,!1);if(i===X)throw G(`${A.obj(e,t)} is not yet available for T${this.id}[${this.hint}] because ${e.editing?`T${e.editing.changeset.id}[${e.editing.changeset.hint}]`:""} is not yet applied (last applied T${e.applied.changeset.id}[${e.applied.changeset.hint}])`);return i}getEditableObjectVersion(e,t,i,s){let r=this.lookupObjectVersion(e,t,!0);const o=r.data[t];if(o!==w.Raw){if(this.isNewObjectVersionRequired(e,r,t,o,i,s)){this.bumpBy(r.changeset.timestamp);const a=t===w.Handle?1:r.revision+1,c=Object.assign({},t===w.Handle?i:r.data);w.set(c,w.Handle,e),w.set(c,w.Revision,new be(a,this.id)),r=new Tn(this,r,c),this.items.set(e,r),e.editing=r,e.editors++,f.isOn&&f.opt.write&&f.write("║"," ++",`${A.obj(e)} - new snapshot is created (revision ${a})`)}}else r=X;return r}setFieldContent(e,t,i,s,r,o){let a=i.data[t];if(a!==void 0||i.former.objectVersion.changeset===X.changeset&&!(t in e.data)){if(a===void 0||a.content!==s||o){const c=a==null?void 0:a.content;i.former.objectVersion.data[t]===a?(a=i.data[t]=new be(s,this.id),m.markEdited(c,s,!0,i,t,e)):(a.content=s,a.lastEditorChangesetId=this.id,m.markEdited(c,s,!0,i,t,e))}}else Reflect.set(e.data,t,s,r)}static takeSnapshot(e){return e[w.Handle]["#this#"]}static dispose(e){const t=m.edit(),i=w.get(e,w.Handle);i!==void 0&&m.doDispose(t,i)}static doDispose(e,t){const i=e.getEditableObjectVersion(t,w.Revision,w.Undefined);return i!==X&&(i.disposed=!0),i}isNewObjectVersionRequired(e,t,i,s,r,o){if(this.sealed&&t.changeset!==X.changeset)throw G(`observable property ${A.obj(e,i)} can only be modified inside transaction`);if(i!==w.Handle&&r!==w.Handle&&(t.changeset!==this||t.former.objectVersion!==X)&&this.options.token!==void 0&&o!==this.options.token)throw G(`${this.hint} should not have side effects (trying to change ${A.snapshot(t,i)})`);return t.changeset!==this&&!this.sealed}acquire(e){const t=!this.sealed&&this.revision===Mt;if(t){const i=this.options.token===void 0||e.revision===Mt;this.revision=i?m.stampGen:e.revision,m.pending.push(this),m.oldest===void 0&&(m.oldest=this),f.isOn&&f.opt.transaction&&f.write("╔══",`s${this.revision}`,`${this.hint}`)}return t}bumpBy(e){e>this.bumper&&(this.bumper=e)}rebase(){let e;return this.items.size>0&&(this.items.forEach((t,i)=>{const s=this.parent?this.parent.lookupObjectVersion(i,w.Handle,!0):i.applied;if(t.former.objectVersion!==s){const r=this.merge(i,t,s);t.conflicts.size>0&&(e||(e=[]),e.push(t)),f.isOn&&f.opt.transaction&&f.write("╠╝","",`${A.snapshot2(i,t.changeset)} is merged with ${A.snapshot2(i,s.changeset)} among ${r} properties with ${t.conflicts.size} conflicts.`)}}),this.options.token===void 0?this.bumper>100?(this.bumper=this.revision,this.revision=++m.stampGen):this.revision=this.bumper+1:this.revision=this.bumper),e}merge(e,t,i){let s=0;const r=i.disposed,o=t.disposed,a=Object.assign({},i.data);return t.changes.forEach((c,d)=>{s++;const l=t.data[d];if(a[d]=l,r||o)r!==o&&(r||this.options.isolation!==Y.disjoinForInternalDisposal)&&(f.isOn&&f.opt.change&&f.write("║╠","",`${A.snapshot2(e,t.changeset,d)} <> ${A.snapshot2(e,i.changeset,d)}`,0," *** CONFLICT ***"),t.conflicts.set(d,i));else{const u=i.data[d],p=t.former.objectVersion.data[d],{isResolved:v,resolvedValue:b}=m.tryResolveConflict(u,p,l);v?b.isLaunch&&(a[d]=b):t.conflicts.set(d,i),f.isOn&&f.opt.change&&f.write("║╠","",`${A.snapshot2(e,t.changeset,d)} ${v?"==":"<>"} ${A.snapshot2(e,i.changeset,d)}`,0,v?void 0:" *** CONFLICT ***")}}),It.copyAllMembers(a,t.data),t.former.objectVersion=i,s}seal(){this.sealed=!0}sealObjectVersion(e,t){if(!this.parent){if(!t.disposed)t.changes.forEach((i,s)=>m.sealFieldVersion(t.data[s],s,e.proxy.constructor.name));else for(const i in t.former.objectVersion.data)t.data[i]=w.Undefined;f.isOn&&m.freezeObjectVersion(t)}e.editors--,e.editors===0&&(e.editing=void 0)}static sealFieldVersion(e,t,i){if(e instanceof be){const s=e.content;if(s!=null){const r=Object.getPrototypeOf(s)[V.SealedType];r&&(e.content=V.seal(s,r,i,t))}}}static freezeObjectVersion(e){return Object.freeze(e.data),It.freezeSet(e.changes),It.freezeMap(e.conflicts),e}triggerGarbageCollection(){if(this.revision!==0&&this===m.oldest){const e=m.pending;e.sort((s,r)=>s.revision-r.revision);let t=0;for(;t<e.length&&e[t].sealed;)e[t].unlinkHistory(),t++;m.pending=e.slice(t),m.oldest=m.pending[0];const i=Date.now();i-m.lastGarbageCollectionSummaryTimestamp>m.garbageCollectionSummaryInterval&&(f.write("","[G]",`Total object/snapshot count: ${m.totalObjectHandleCount}/${m.totalObjectSnapshotCount}`),m.lastGarbageCollectionSummaryTimestamp=i)}}unlinkHistory(){f.isOn&&f.opt.gc&&f.write("","[G]",`Dismiss history below t${this.id}s${this.revision} (${this.hint})`),this.items.forEach((e,t)=>{f.isOn&&f.opt.gc&&e.former.objectVersion!==X&&f.write(" ","  ",`${A.snapshot2(t,e.former.objectVersion.changeset)} is ready for GC because overwritten by ${A.snapshot2(t,e.changeset)}`),m.garbageCollectionSummaryInterval<Number.MAX_SAFE_INTEGER&&(e.former.objectVersion!==X&&m.totalObjectSnapshotCount--,e.disposed&&m.totalObjectHandleCount--),e.former.objectVersion=X}),this.items=cs,this.obsolete=as,f.isOn&&Object.freeze(this)}static _init(){const e=X.changeset;e.acquire(e),e.seal(),e.triggerGarbageCollection(),m.freezeObjectVersion(X),m.idGen=100,m.stampGen=101,m.oldest=void 0}}m.idGen=-1;m.stampGen=1;m.pending=[];m.oldest=void 0;m.garbageCollectionSummaryInterval=Number.MAX_SAFE_INTEGER;m.lastGarbageCollectionSummaryTimestamp=Date.now();m.totalObjectHandleCount=0;m.totalObjectSnapshotCount=0;m.current=ae;m.edit=ae;m.markUsed=ae;m.markEdited=ae;m.tryResolveConflict=ae;m.propagateAllChangesThroughSubscriptions=n=>{};m.revokeAllSubscriptions=n=>{};m.enqueueReactiveFunctionsToRun=n=>{};class A{static obj(e,t,i,s,r,o){const a=t!==void 0?`.${t.toString()}`:"";let c;if(e!==void 0){const d=o!==void 0&&o!==w.Undefined?`[=${A.valueHint(o)}]`:"";i===void 0?c=`${e.hint}${a}${d} #${e.id}`:c=`${e.hint}${a}${d} #${e.id}t${s}s${i}${r!==void 0?`e${r}`:""}`}else c=`boot${a}`;return c}static snapshot2(e,t,i,s){var r;return A.obj(e,i,t.timestamp,t.id,s==null?void 0:s.lastEditorChangesetId,(r=s==null?void 0:s.content)!==null&&r!==void 0?r:w.Undefined)}static snapshot(e,t){const i=w.get(e.data,w.Handle),s=t!==void 0?e.data[t]:void 0;return A.obj(i,t,e.changeset.timestamp,e.changeset.id,s==null?void 0:s.lastEditorChangesetId)}static conflicts(e){return e.map(t=>{const i=[];return t.conflicts.forEach((s,r)=>{i.push(A.conflictingMemberHint(r,t,s))}),i.join(", ")}).join(", ")}static conflictingMemberHint(e,t,i){return`${i.changeset.hint} (${A.snapshot(i,e)})`}}A.valueHint=n=>"???";const X=new Tn(new m({hint:"<boot>"}),void 0,{}),ds=Object.freeze({hint:"noname",isolation:Y.joinToCurrentTransaction,journal:void 0,logging:void 0,token:void 0});var zt=function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(l){try{d(i.next(l))}catch(u){o(u)}}function c(l){try{d(i.throw(l))}catch(u){o(u)}}function d(l){l.done?r(l.value):s(l.value).then(a,c)}d((i=i.apply(n,e||[])).next())})};class S{static get current(){return x.current}whenFinished(e){return zt(this,void 0,void 0,function*(){})}static create(e,t){return new x(e,t)}static run(e,t,...i){return x.run(e,t,...i)}static isolate(e,...t){return x.isolate(e,...t)}static outside(e,...t){return x.outside(e,...t)}static isFrameOver(e=1,t=10){return x.isFrameOver(e,t)}static requestNextFrame(e=0){return x.requestNextFrame(e)}static get isCanceled(){return x.current.isCanceled}}class x extends S{constructor(e,t){super(),this.margin=x.curr!==void 0?x.curr.margin+1:-1,this.parent=t,this.changeset=new m(e,t==null?void 0:t.changeset),this.pending=0,this.sealed=!1,this.canceled=void 0,this.after=void 0,this.promise=void 0,this.resolve=ae,this.reject=ae}static get current(){return x.curr}get id(){return this.changeset.id}get hint(){return this.changeset.hint}get options(){return this.changeset.options}get timestamp(){return this.changeset.timestamp}get error(){return this.canceled}run(e,...t){return this.guard(),this.runImpl(void 0,e,...t)}inspect(e,...t){const i=x.inspection;try{return x.inspection=!0,f.isOn&&f.opt.transaction&&f.write(" "," ",`T${this.id}[${this.hint}] is being inspected by T${x.curr.id}[${x.curr.hint}]`),this.runImpl(void 0,e,...t)}finally{x.inspection=i}}apply(){if(this.pending>0)throw G("cannot apply transaction having active operations running");if(this.canceled)throw G(`cannot apply transaction that is already canceled: ${this.canceled}`);this.seal()}seal(){return this.sealed||this.run(x.seal,this,void 0,void 0),this}wrap(e,t){this.guard();const i=this,s=x.inspection;return s?i.inspect(x.wrapperEnter,i,t):i.run(x.wrapperEnter,i,t),(...o)=>s?i.inspect(x.wrapperLeave,i,t,e,...o):i.runImpl(void 0,x.wrapperLeave,i,t,e,...o)}static wrapperEnter(e,t){t||e.pending++}static wrapperLeave(e,t,i,...s){return e.pending--,i(...s)}cancel(e,t){return this.runImpl(void 0,x.seal,this,e,t===null?x.none:t),this}get isCanceled(){return this.canceled!==void 0}get isFinished(){return this.sealed&&this.pending===0}whenFinished(e){return zt(this,void 0,void 0,function*(){e&&this.parent?yield this.parent.whenFinished(e):this.isFinished||(yield this.acquirePromise())})}static run(e,t,...i){const s=x.acquire(e),r=s!==x.curr;s.guard();let o=s.runImpl(e==null?void 0:e.logging,t,...i);return r&&(o instanceof Promise&&(o=x.outside(()=>s.wrapToRetry(s.wrapToWaitUntilFinish(o),t,...i))),s.seal()),o}static isolate(e,...t){return x.run({isolation:Y.disjoinFromOuterTransaction},e,...t)}static outside(e,...t){const i=x.curr;try{return x.curr=x.none,e(...t)}finally{x.curr=i}}static isFrameOver(e=1,t=10){x.frameOverCounter++;let i=x.frameOverCounter%e===0;return i&&(i=performance.now()-x.frameStartTime>t),i}static requestNextFrame(e=0){return Qi(e)}static acquire(e){var t;const i=x.curr,s=(t=e==null?void 0:e.isolation)!==null&&t!==void 0?t:Y.joinToCurrentTransaction;return i.isFinished||i.options.isolation===Y.disjoinFromOuterAndInnerTransactions?new x(e):s===Y.joinAsNestedTransaction?new x(e,i):s!==Y.joinToCurrentTransaction?new x(e):i}guard(){if(this.sealed&&x.curr!==this)throw G("cannot run transaction that is already sealed")}wrapToRetry(e,t,...i){return zt(this,void 0,void 0,function*(){try{const s=yield e;if(this.canceled)throw this.canceled;return s}catch(s){if(this.after!==x.none)if(this.after){yield this.after.whenFinished();const r={hint:`${this.hint} - restart after T${this.after.id}`,isolation:this.options.isolation===Y.joinToCurrentTransaction?Y.disjoinFromOuterTransaction:this.options.isolation,logging:this.changeset.options.logging,token:this.changeset.options.token};return x.run(r,t,...i)}else throw s;else return}})}wrapToWaitUntilFinish(e){return zt(this,void 0,void 0,function*(){const t=yield e;return yield this.whenFinished(),t})}runImpl(e,t,...i){let s;const r=x.curr,o=this.parent;try{if(r===x.none&&(x.frameStartTime=performance.now(),x.frameOverCounter=0),x.curr=this,this.pending++,this.changeset.acquire(r.changeset)&&o&&o.run(()=>o.pending++),s=t(...i),this.sealed&&this.pending===1){if(!this.canceled)this.checkForConflicts();else if(!this.after)throw this.canceled}}catch(a){throw x.inspection||this.cancel(a),a}finally{if(this.pending--,this.sealed&&this.pending===0){const a=this.applyOrDiscard();o&&o.runImpl(void 0,()=>o.pending--),x.curr=r,x.outside(m.enqueueReactiveFunctionsToRun,a)}else x.curr=r}return s}static seal(e,t,i){!e.canceled&&t&&(e.canceled=t,e.after=i,f.isOn&&f.opt.transaction&&(f.write("║"," [!]",`${t.message}`,void 0," *** CANCEL ***"),i&&i!==x.none&&f.write("║"," [!]",`T${e.id}[${e.hint}] will be restarted${e!==i?` after T${i.id}[${i.hint}]`:""}`)),m.revokeAllSubscriptions(e.changeset)),e.sealed=!0}checkForConflicts(){const e=this.changeset.rebase();e&&this.tryResolveConflicts(e)}tryResolveConflicts(e){throw ts(`T${this.id}[${this.hint}] conflicts with: ${A.conflicts(e)}`,void 0)}applyOrDiscard(){let e;try{f.isOn&&f.opt.change&&f.write("╠═","","",void 0,"changes"),this.changeset.seal(),e=this.applyOrDiscardChangeset(),this.changeset.triggerGarbageCollection(),this.promise&&(this.canceled&&!this.after?this.reject(this.canceled):this.resolve()),f.isOn&&Object.freeze(this)}catch(t){throw ns(t),t}return e}applyOrDiscardChangeset(){const e=this.canceled,t=this.changeset;t.items.forEach((s,r)=>{t.sealObjectVersion(r,s),e||(this.applyObjectChanges(r,s),m.garbageCollectionSummaryInterval<Number.MAX_SAFE_INTEGER&&(m.totalObjectSnapshotCount++,s.former.objectVersion===X&&m.totalObjectHandleCount++))}),f.isOn&&(f.opt.change&&!e&&!t.parent&&t.items.forEach((s,r)=>{const o=[];s.changes.forEach((c,d)=>o.push(d.toString()));const a=o.join(", ");f.write("║","√",`${A.snapshot2(r,s.changeset)} (${a}) is ${s.former.objectVersion===X?"constructed":`applied over #${r.id}t${s.former.objectVersion.changeset.id}s${s.former.objectVersion.changeset.timestamp}`}`)}),f.opt.transaction&&f.write(t.timestamp<Mt?"╚══":"═══",`s${this.timestamp}`,`${this.hint} - ${e?"CANCEL":"APPLY"}(${this.changeset.items.size})${e?` - ${e}`:""}`));let i=t.obsolete;if(t.parent){if(t.obsolete.length>0){for(const s of t.obsolete)t.parent.obsolete.push(s);i=[]}}else e||m.propagateAllChangesThroughSubscriptions(t);return i}applyObjectChanges(e,t){const i=this.parent;i?x.migrateObjectChangesToAnotherTransaction(e,t,i):e.applied=t}static migrateObjectChangesToAnotherTransaction(e,t,i){const r=i.changeset.getEditableObjectVersion(e,w.Undefined,void 0);if(t.former.objectVersion.changeset===X.changeset)for(const o in t.data)x.migrateFieldVersionToAnotherTransaction(e,o,t,r,i);else t.changes.forEach((o,a)=>{x.migrateFieldVersionToAnotherTransaction(e,a,t,r,i)})}static migrateFieldVersionToAnotherTransaction(e,t,i,s,r){const o=r.changeset,a=i.data[t],c=s.data[t];if(a.isLaunch){const d=x.migrateFieldVersion(a,r);if(s.former.objectVersion.data[t]!==c){let l=c.observers;if(l){const v=d.observers=new Set;l.forEach(b=>{var y,O;const D=b.observables.get(c);(y=b.observables)===null||y===void 0||y.delete(c),(O=b.observables)===null||O===void 0||O.set(d,D),v.add(b)}),c.observers=void 0}if(l=a.observers,l){let v=d.observers;v===void 0&&(v=d.observers=new Set),l.forEach(b=>{var y,O;const D=b.observables.get(a);(y=b.observables)===null||y===void 0||y.delete(a),(O=b.observables)===null||O===void 0||O.set(d,D),v==null||v.add(b)}),a.observers=void 0}const u=a.observables,p=d.observables;u&&(u.forEach((v,b)=>{var y,O;(y=b.observers)===null||y===void 0||y.delete(a),(O=b.observers)===null||O===void 0||O.add(d),p==null||p.set(b,v)}),u.clear()),s.data[t]=d}else{const l=a.observers;if(l){const v=d.observers=new Set;l.forEach(b=>{var y,O;const D=b.observables.get(a);(y=b.observables)===null||y===void 0||y.delete(a),(O=b.observables)===null||O===void 0||O.set(d,D),v.add(b)}),a.observers=void 0}const u=a.observables,p=d.observables;u&&(u.forEach((v,b)=>{var y,O;(y=b.observers)===null||y===void 0||y.delete(a),(O=b.observers)===null||O===void 0||O.add(d),p==null||p.set(b,v)}),u.clear()),s.data[t]=d}o.bumpBy(s.former.objectVersion.changeset.timestamp),m.markEdited(void 0,d,!0,s,t,e)}else{const d=c==null?void 0:c.content;if(s.former.objectVersion.data[t]!==c){c.content=a.content;const l=a.observers;l&&l.forEach(u=>{var p,v,b;const y=u.observables.get(a);(p=u.observables)===null||p===void 0||p.delete(a),(v=u.observables)===null||v===void 0||v.set(c,y),(b=c.observers)===null||b===void 0||b.add(u)})}else s.data[t]=a;m.markEdited(d,a.content,!0,s,t,e)}}acquirePromise(){return this.promise||(this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})),this.promise}static getCurrentChangeset(){return x.curr.changeset}static getEditableChangeset(){if(x.inspection)throw G("cannot make changes during transaction inspection");return x.curr.changeset}static _init(){m.current=x.getCurrentChangeset,m.edit=x.getEditableChangeset,x.none.sealed=!0,x.none.changeset.seal(),m._init()}}x.none=new x({hint:"<none>"});x.curr=x.none;x.inspection=!1;x.frameStartTime=0;x.frameOverCounter=0;x.migrateFieldVersion=function(n,e){throw G("this implementation of cloneLaunch should never be called")};x._init();class ls{constructor(e){const t=new.target.prototype,i=w.getFrom(t,w.Initial);return E.createHandleForMvccObject(t,this,i,new.target.name,e).proxy}[Symbol.toStringTag](){const e=w.get(this,w.Handle);return A.obj(e)}}class $e extends ls{constructor(){super(!0)}}const Oe=Object.freeze({kind:ne.plain,isolation:Y.joinToCurrentTransaction,order:0,noSideEffects:!1,triggeringArgs:!1,throttling:Number.MAX_SAFE_INTEGER,reentrance:ve.preventWithError,allowObsoleteToFinish:!1,journal:void 0,indicator:null,logging:void 0});class Ot{constructor(e,t,i,s,r){this.getter=e!==void 0?e:i.getter,this.setter=t!==void 0?t:i.setter,this.kind=De(Oe.kind,i.kind,s.kind,r),this.isolation=De(Oe.isolation,i.isolation,s.isolation,r),this.order=De(Oe.order,i.order,s.order,r),this.noSideEffects=De(Oe.noSideEffects,i.noSideEffects,s.noSideEffects,r),this.triggeringArgs=De(Oe.triggeringArgs,i.triggeringArgs,s.triggeringArgs,r),this.throttling=De(Oe.throttling,i.throttling,s.throttling,r),this.reentrance=De(Oe.reentrance,i.reentrance,s.reentrance,r),this.allowObsoleteToFinish=De(Oe.allowObsoleteToFinish,i.allowObsoleteToFinish,s.allowObsoleteToFinish,r),this.journal=De(Oe.journal,i.journal,s.journal,r),this.indicator=De(Oe.indicator,i.indicator,s.indicator,r),this.logging=De(Oe.logging,i.logging,s.logging,r),f.isOn&&Object.freeze(this)}}Ot.INITIAL=Object.freeze(new Ot(ae,ae,Object.assign({getter:ae,setter:ae},Oe),{},!1));function De(n,e,t,i){return t!==void 0&&(e===n||!i)?t:e}class E{constructor(e){this.isObservable=e}getPrototypeOf(e){return Reflect.getPrototypeOf(e.data)}get(e,t,i){let s;if(t!==w.Handle){const o=m.current().getObjectVersion(e,t);s=o.data[t],s instanceof be&&!s.isLaunch?(this.isObservable&&m.markUsed(s,o,t,e,ne.plain,!1),s=s.content):s=Reflect.get(e.data,t,i)}else s=e;return s}set(e,t,i,s){const r=m.edit(),o=r.getEditableObjectVersion(e,t,i);return o!==X?r.setFieldContent(e,t,o,i,s,E.sensitivity):e.data[t]=i,!0}has(e,t){const i=m.current().getObjectVersion(e,t);return t in i.data||t in e.data}defineProperty(e,t,i){const s=i.get!==void 0&&i.set!==void 0;return s&&Object.defineProperty(e.data,t,i),s}getOwnPropertyDescriptor(e,t){const i=m.current().getObjectVersion(e,t),s=Reflect.getOwnPropertyDescriptor(i.data,t);return s&&(s.configurable=s.writable=!0),s}ownKeys(e){const t=m.current().getObjectVersion(e,w.Handle),i=[];for(const s of Object.getOwnPropertyNames(t.data)){const r=t.data[s];(!(r instanceof be)||!r.isLaunch)&&i.push(s)}return i}static decorateData(e,t,i){if(e)return w.acquire(t,w.Initial)[i]=new be(void 0,0),Object.defineProperty(t,i,{get:function(){const c=E.acquireHandle(this);return E.observable.get(c,i,this)},set:function(c){const d=E.acquireHandle(this);return E.observable.set(d,i,c,this)},enumerable:!0,configurable:!1});w.acquire(t,w.Initial)[i]=w.Raw}static decorateOperation(e,t,i,s,r,o){var a,c,d,l;(o===void 0||o===s)&&(o=us);const u=(a=o.enumerable)!==null&&a!==void 0?a:!0,p=(c=o.configurable)!==null&&c!==void 0?c:!0,v=E.rememberOperationOptions(s,r,(d=o.value)!==null&&d!==void 0?d:o.get,(l=o.value)!==null&&l!==void 0?l:o.set,!0,p,i,e);if(v.getter===v.setter)return Object.defineProperty(s,r,{get:function(){const y=E.acquireHandle(this),O=E.createOperation(y,r,v);return Object.defineProperty(y.data,r,{value:O,enumerable:u,configurable:p}),O},enumerable:u,configurable:!0});if(v.setter===ae)return Object.defineProperty(s,r,{get:function(){const y=E.acquireHandle(this),O=E.createOperation(y,r,v);return Object.defineProperty(y.data,r,{get:O,enumerable:u,configurable:p}),O.call(this)},enumerable:u,configurable:!0});throw G(`${s.constructor.name}.${r.toString()} has setter and cannot be decorated with @${t.name}`)}static decorateOperationParametrized(e,t){return function(i,s,r){return E.decorateOperation(!1,e,t,i,s,r)}}static acquireHandle(e){let t=e[w.Handle];if(!t){if(e!==Object(e)||Array.isArray(e))throw G("only objects can be observable");const i=w.getFrom(Object.getPrototypeOf(e),w.Initial),s=new Tn(X.changeset,X,Object.assign({},i));t=new We(e,e,E.observable,s,e.constructor.name),w.set(s.data,w.Handle,t),w.set(e,w.Handle,t),w.set(s.data,w.Revision,new be(1,0))}return t}static createHandleForMvccObject(e,t,i,s,r){const o=m.edit(),a=r?E.observable:E.transactional,c=new We(t,void 0,a,X,s);if(o.getEditableObjectVersion(c,w.Handle,i),!E.reactivityAutoStartDisabled)for(const d in w.getFrom(e,w.Reactive))c.proxy[d][w.Controller].markObsolete();return c}static setProfilingMode(e,t){e?(E.repetitiveUsageWarningThreshold=t&&t.repetitiveUsageWarningThreshold!==void 0?t.repetitiveUsageWarningThreshold:10,E.mainThreadBlockingWarningThreshold=t&&t.mainThreadBlockingWarningThreshold!==void 0?t.mainThreadBlockingWarningThreshold:14,E.asyncActionDurationWarningThreshold=t&&t.asyncActionDurationWarningThreshold!==void 0?t.asyncActionDurationWarningThreshold:300,m.garbageCollectionSummaryInterval=t&&t.garbageCollectionSummaryInterval!==void 0?t.garbageCollectionSummaryInterval:100):(E.repetitiveUsageWarningThreshold=Number.MAX_SAFE_INTEGER,E.mainThreadBlockingWarningThreshold=Number.MAX_SAFE_INTEGER,E.asyncActionDurationWarningThreshold=Number.MAX_SAFE_INTEGER,m.garbageCollectionSummaryInterval=Number.MAX_SAFE_INTEGER)}static sensitive(e,t,...i){const s=E.sensitivity;E.sensitivity=e;try{return t(...i)}finally{E.sensitivity=s}}static setHint(e,t){if(t){const i=E.acquireHandle(e);i.hint=t}return e}static getHint(e){return E.acquireHandle(e).hint}}E.reactivityAutoStartDisabled=!1;E.repetitiveUsageWarningThreshold=Number.MAX_SAFE_INTEGER;E.mainThreadBlockingWarningThreshold=Number.MAX_SAFE_INTEGER;E.asyncActionDurationWarningThreshold=Number.MAX_SAFE_INTEGER;E.sensitivity=!1;E.transactional=new E(!1);E.observable=new E(!0);E.createOperation=function(n,e,t){throw G("this implementation of createOperation should never be called")};E.rememberOperationOptions=function(n,e,t,i,s,r,o,a){throw G("this implementation of rememberOperationOptions should never be called")};const us={configurable:!0,enumerable:!0,value:void 0};var Kn=function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(l){try{d(i.next(l))}catch(u){o(u)}}function c(l){try{d(i.throw(l))}catch(u){o(u)}}function d(l){l.done?r(l.value):s(l.value).then(a,c)}d((i=i.apply(n,e||[])).next())})};class fs extends $e{static create(e,t,i,s){return Se.create(e,t,i,s)}}class Se extends fs{constructor(){super(...arguments),this.isBusy=!1,this.counter=0,this.workers=new Set,this.busyDuration=0,this.internals={whenBusy:void 0,resolveWhenBusy:void 0,whenIdle:void 0,resolveWhenIdle:void 0,started:0,activationDelay:-1,activationTimeout:void 0,deactivationDelay:-1,deactivationTimeout:void 0,durationResolution:1}}whenBusy(){return Kn(this,void 0,void 0,function*(){this.internals.started===0&&(this.internals.whenBusy||(this.internals.whenBusy=new Promise((e,t)=>{this.internals.resolveWhenBusy=e})),yield this.internals.whenBusy)})}whenIdle(){return Kn(this,void 0,void 0,function*(){this.internals.started!==0&&(this.internals.whenIdle||(this.internals.whenIdle=new Promise((e,t)=>{this.internals.resolveWhenIdle=e})),yield this.internals.whenIdle)})}enter(e){this.counter++,(this.workers=this.workers.toMutable()).add(e),Se.activate(this,this.internals.activationDelay)}leave(e){this.counter--,(this.workers=this.workers.toMutable()).delete(e),Se.deactivate(this,this.internals.deactivationDelay)}static create(e,t,i,s){return S.run({hint:"Indicator.create"},Se.doCreate,e,t,i,s)}static enter(e,t){e.enter(t)}static leave(e,t){e.leave(t)}static doCreate(e,t,i,s){const r=new Se;return E.setHint(r,e),r.internals.activationDelay=t,r.internals.deactivationDelay=i,r.internals.durationResolution=s,r}static activate(e,t){const i=e.counter>0;if(e.internals.started===0&&i){if(e.busyDuration=0,e.internals.started=performance.now(),e.internals.whenBusy){const s=e.internals.resolveWhenBusy;e.internals.whenBusy=void 0,e.internals.resolveWhenBusy=void 0,s()}Se.tick(e)}t>=0?e.internals.activationTimeout===void 0&&(e.internals.activationTimeout=setTimeout(()=>S.run({hint:"Indicator.activate",isolation:Y.disjoinFromOuterAndInnerTransactions},Se.activate,e,-1),t)):i&&(e.isBusy=!0)}static deactivate(e,t){if(t>=0?(clearTimeout(e.internals.deactivationTimeout),e.internals.deactivationTimeout=setTimeout(()=>S.run({hint:"Indicator.deactivate",isolation:Y.disjoinFromOuterAndInnerTransactions},Se.deactivate,e,-1),t)):e.counter<=0&&(e.isBusy=!1,e.internals.activationTimeout=void 0),e.counter===0&&e.internals.started!==0){const i=e.internals.durationResolution;if(e.busyDuration=Math.round(i*(performance.now()-e.internals.started))/i,e.internals.started=0,e.internals.whenIdle){const s=e.internals.resolveWhenIdle;e.internals.whenIdle=void 0,e.internals.resolveWhenIdle=void 0,s()}}}static tick(e){if(e.internals.started!==0){const t=e.internals.durationResolution;e.busyDuration=Math.round(t*(performance.now()-e.internals.started))/t,(globalThis??global).requestAnimationFrame&&requestAnimationFrame(()=>{S.run(hs,()=>Se.tick(e))})}}}const hs=Object.freeze({hint:"Indicator.tick"});class gs extends $e{static create(){return new St}}class St extends gs{constructor(){super(...arguments),this._capacity=5,this._edits=[],this._unsaved=new Map,this._position=0}get capacity(){return this._capacity}set capacity(e){this._capacity=e,e<this._edits.length&&this._edits.splice(0,this._edits.length-e)}get edits(){return this._edits}get unsaved(){return this._unsaved}get canUndo(){return this._edits.length>0&&this._position>0}get canRedo(){return this._position<this._edits.length}edited(e){S.run({hint:"EditJournal.edited",isolation:Y.disjoinFromOuterAndInnerTransactions},()=>{const t=this._edits=this._edits.toMutable();t.length>=this._capacity?t.shift():t.splice(this._position),this.mergePatchToUnsaved(e,!1),t.push(e),this._position=t.length})}saved(e){if(this._unsaved===e)this._unsaved=new Map;else throw new Error("not implemented")}undo(e=1){S.run({hint:"Journal.undo",isolation:Y.disjoinFromOuterAndInnerTransactions},()=>{let t=this._position-1;for(;t>=0&&e>0;){const i=this._edits[t];St.applyPatch(i,!0),this.mergePatchToUnsaved(i,!0),t--,e--}this._position=t+1})}redo(e=1){S.run({hint:"Journal.redo",isolation:Y.disjoinFromOuterAndInnerTransactions},()=>{let t=this._position;for(;t<this._edits.length&&e>0;){const i=this._edits[t];St.applyPatch(i,!1),this.mergePatchToUnsaved(i,!1),t++,e--}this._position=t})}static buildPatch(e,t){const i=new Map;return t.forEach((s,r)=>{const o=new Map,a=s.former.objectVersion!==X?s.former.objectVersion.data:void 0;if(s.changes.forEach(c=>{const d={fieldKey:c,patchKind:"update",freshContent:Jn(s.data[c]),formerContent:void 0};a&&(d.formerContent=Jn(a[c])),o.set(c,d)}),!a){const c={fieldKey:w.Revision,patchKind:"remove",freshContent:w.Undefined,formerContent:void 0};o.set(w.Revision,c)}i.set(r.proxy,o)}),i}static applyPatch(e,t){const i=m.edit();e.forEach((s,r)=>{const o=w.get(r,w.Handle),a=s.get(w.Revision);a&&(t?a.formerContent:a.freshContent)===w.Undefined?m.doDispose(i,o):s.forEach((d,l)=>{const u=t?d.formerContent:d.freshContent,p=i.getEditableObjectVersion(o,l,u);if(p.changeset===i){p.data[l]=new be(u,i.id);const v=p.former.objectVersion.data[l];m.markEdited(v,u,v!==u,p,l,o)}})})}mergePatchToUnsaved(e,t){const i=this._unsaved=this._unsaved.toMutable();e.forEach((s,r)=>{let o=i.get(r);o||i.set(r,o=new Map),s.forEach((a,c)=>{let d=o.get(c);d||o.set(c,d={fieldKey:c,patchKind:"update",freshContent:void 0,formerContent:void 0});const l=t?a.formerContent:a.freshContent,u=t?a.freshContent:a.formerContent;l!==d.formerContent?(d.freshContent=l,d.formerContent=u):(o.delete(c),o.size===0&&i.delete(r))})})}}function Jn(n){const e=n.content,t=e==null?void 0:e[V.CreateCopy];return t!==void 0?t.call(e):e}const Qn=[],Ne="<boot>",Oi=new We(void 0,void 0,E.observable,X,"<boot>");class Z{configure(e){return Z.configureImpl(this,e)}get options(){return this.peek(void 0).launch.options}get unobs(){return this.peek(void 0).launch.content}get args(){return this.use().launch.args}get result(){return this.reuseOrRelaunch(!0,void 0).content}get error(){return this.use().launch.error}get stamp(){return this.use().objectVersion.changeset.timestamp}get isReusable(){return this.use().isReusable}markObsolete(){S.run({hint:f.isOn?`markObsolete(${A.obj(this.ownerHandle,this.fieldKey)})`:"markObsolete()"},Z.markObsolete,this)}pullLastResult(e){return this.reuseOrRelaunch(!0,e).content}constructor(e,t){this.ownerHandle=e,this.fieldKey=t}reuseOrRelaunch(e,t){let i=this.peek(t);const s=i.changeset,r=i.launch,o=r.options;if(!i.isReusable&&!i.objectVersion.disposed&&(!e||r.cause===Ne||!r.successor||r.successor.transaction.isFinished)){const c=e?Y.disjoinFromOuterTransaction:o.isolation,d=o.noSideEffects?this:void 0,l=this.relaunch(i,c,o,d,t),u=l.launch.changeset;(!e||s===u||u.sealed&&s.timestamp>=u.timestamp)&&(i=l)}else f.isOn&&f.opt.operation&&(o.logging===void 0||o.logging.operation===void 0||o.logging.operation===!0)&&f.write(S.current.isFinished?"":"║"," (=)",`${A.snapshot2(i.launch.operation.ownerHandle,i.changeset,this.fieldKey)} result is reused from T${i.launch.transaction.id}[${i.launch.transaction.hint}]`);const a=i.launch;return m.markUsed(a,i.objectVersion,this.fieldKey,this.ownerHandle,a.options.kind,e),a}static getControllerOf(e){const t=w.get(e,w.Controller);if(!t)throw G(`given method is not decorated as reactronic one: ${e.name}`);return t}static configureImpl(e,t){let i;if(e?i=e.edit().launch:i=k.current,!i)throw G("reactronic decorator is only applicable to methods");return i.options=new Ot(i.options.getter,i.options.setter,i.options,t,!1),f.isOn&&f.opt.write&&f.write("║","  =",`${i.hint()}.options are changed`),i.options}static proceedWithinGivenLaunch(e,t,...i){let s;const r=k.current;try{k.current=e,s=t(...i)}catch(o){throw e&&(e.error=o),o}finally{k.current=r}return s}static why(){var e,t;return(t=(e=k.current)===null||e===void 0?void 0:e.why())!==null&&t!==void 0?t:Ne}static briefWhy(){var e,t;return(t=(e=k.current)===null||e===void 0?void 0:e.briefWhy())!==null&&t!==void 0?t:Ne}static dependencies(){const e=k.current;return e?e.dependencies():["RxSystem.dependencies should be called from inside of reactive method"]}peek(e){const t=m.current(),i=t.lookupObjectVersion(this.ownerHandle,this.fieldKey,!1),s=this.acquireFromObjectVersion(i,e),r=this.ownerHandle.applied.data[this.fieldKey],o=s.options.kind!==ne.transactional&&s.cause!==Ne&&(t===s.changeset||t.timestamp<s.obsoleteSince||r.obsoleteDueTo===void 0)&&(!s.options.triggeringArgs||e===void 0||s.args.length===e.length&&s.args.every((a,c)=>a===e[c]))||i.disposed;return{launch:s,isReusable:o,changeset:t,objectVersion:i}}use(){const e=this.peek(void 0);return m.markUsed(e.launch,e.objectVersion,this.fieldKey,this.ownerHandle,e.launch.options.kind,!0),e}edit(){const e=this.ownerHandle,t=this.fieldKey,i=m.edit(),s=i.getEditableObjectVersion(e,t,w.Handle,this);let r=this.acquireFromObjectVersion(s,void 0);if(r.changeset!==s.changeset){const o=new k(S.current,this,s.changeset,r,!1);s.data[t]=o.reenterOver(r),i.bumpBy(s.former.objectVersion.changeset.timestamp),m.markEdited(r,o,!0,s,t,e),r=o}return{launch:r,isReusable:!0,changeset:i,objectVersion:s}}acquireFromObjectVersion(e,t){const i=this.fieldKey;let s=e.data[i];if(s.operation!==this)if(e.changeset!==X.changeset){const r=f.isOn?`${A.obj(this.ownerHandle,i)}/init`:"MethodController/init",o=Y.joinToCurrentTransaction;s=S.run({hint:r,isolation:o,token:this},()=>{const a=this.ownerHandle;let c=m.current().getObjectVersion(a,i),d=c.data[i];if(d.operation!==this){c=m.edit().getEditableObjectVersion(a,i,w.Handle,this);const l=new k(S.current,this,c.changeset,d,!1);t&&(l.args=t),l.cause=Ne,c.data[i]=l,m.markEdited(d,l,!0,c,i,a),d=l}return d})}else{const r=new k(S.current,this,e.changeset,s,!1);t&&(r.args=t),r.cause=Ne,e.data[i]=r,s=r,f.isOn&&f.opt.write&&f.write("║"," ++",`${A.obj(this.ownerHandle,i)} is initialized (revision ${e.revision})`)}return s}relaunch(e,t,i,s,r){const o=f.isOn?`${A.obj(this.ownerHandle,this.fieldKey)}${r&&r.length>0&&(typeof r[0]=="number"||typeof r[0]=="string")?` - ${r[0]}`:""}`:`${A.obj(this.ownerHandle,this.fieldKey)}`;let a=e;const c={hint:o,isolation:t,journal:i.journal,logging:i.logging,token:s},d=S.run(c,l=>(a.launch.transaction.isCanceled?(a=this.peek(l),(a.launch.options.kind===ne.transactional||!a.isReusable)&&(a=this.edit(),f.isOn&&f.opt.operation&&f.write("║","  o",`${a.launch.why()}`),a.launch.proceed(this.ownerHandle.proxy,l))):(a=this.edit(),f.isOn&&f.opt.operation&&f.write("║","  o",`${a.launch.why()}`),a.launch.proceed(this.ownerHandle.proxy,l)),a.launch.result),r);return a.launch.result=d,a}static markObsolete(e){const t=e.peek(void 0),i=t.changeset,s=t.launch.transaction.isFinished?i.obsolete:t.launch.transaction.changeset.obsolete;t.launch.markObsoleteDueTo(t.launch,e.fieldKey,X.changeset,Oi,Ne,i.timestamp,s)}}class k extends be{constructor(e,t,i,s,r){super(void 0,0),this.margin=k.current?k.current.margin+1:1,this.transaction=e,this.operation=t,this.changeset=i,this.observables=new Map,s instanceof k?(this.options=s.options,this.cause=s.obsoleteDueTo,this.args=s.args,r?(this.lastEditorChangesetId=s.lastEditorChangesetId,this.result=s.result,this.error=s.error,this.started=s.started,this.obsoleteSince=s.obsoleteSince,this.obsoleteDueTo=s.obsoleteDueTo,this.successor=s.successor):(this.lastEditorChangesetId=i.id,this.result=void 0,this.error=void 0,this.started=0,this.obsoleteSince=0,this.obsoleteDueTo=void 0,this.successor=void 0)):(this.lastEditorChangesetId=i.id,this.options=s,this.cause=void 0,this.args=Qn,this.result=void 0,this.error=void 0,this.started=0,this.obsoleteSince=0,this.obsoleteDueTo=void 0,this.successor=void 0)}get isLaunch(){return!0}hint(){return`${A.snapshot2(this.operation.ownerHandle,this.changeset,this.operation.fieldKey,this)}`}get order(){return this.options.order}get"#this#"(){return`Operation: ${this.why()}`}clone(e,t){return new k(e,this.operation,t,this,!0)}why(){let e;return this.cause?e=`   ◀◀   ${this.cause}`:this.operation.options.kind===ne.transactional?e="   ◀◀   operation":e=`   ◀◀   T${this.changeset.id}[${this.changeset.hint}]`,`${this.hint()}${e}`}briefWhy(){return this.why()}dependencies(){throw G("not implemented yet")}wrap(e){return(...i)=>{f.isOn&&f.opt.step&&this.result&&f.writeAs({margin2:this.margin},"║","‾\\",`${this.hint()} - step in  `,0,"        │");const s=Date.now(),r=Z.proceedWithinGivenLaunch(this,e,...i),o=Date.now()-s;return f.isOn&&f.opt.step&&this.result&&f.writeAs({margin2:this.margin},"║","_/",`${this.hint()} - step out `,0,this.started>0?"        │":""),o>E.mainThreadBlockingWarningThreshold&&f.write("","[!]",this.why(),o,"    *** main thread is too busy ***"),r}}proceed(e,t){t&&(this.args=t),this.obsoleteSince=xn,this.error?this.result=Promise.reject(this.error):Z.proceedWithinGivenLaunch(this,k.proceed,this,e)}markObsoleteDueTo(e,t,i,s,r,o,a){var c,d,l;if(this.observables!==void 0)if(!e.isLaunch&&i.id===this.lastEditorChangesetId)f.isOn&&(f.opt.obsolete||!((l=this.options.logging)===null||l===void 0)&&l.obsolete)&&f.write(" ","x",`${this.hint()} is not obsolete due to its own change to ${A.snapshot2(s,i,t,e)}`);else{const p=`${A.snapshot2(s,i,t,e)}    ◀◀    ${r}`,v=this.options.kind===ne.reactive;this.obsoleteDueTo=p,this.obsoleteSince=o,f.isOn&&(f.opt.obsolete||!((c=this.options.logging)===null||c===void 0)&&c.obsolete)&&f.write(f.opt.transaction&&!m.current().sealed?"║":" ",v?"█":"▒",v&&i===X.changeset?`${this.hint()} is reactive and will run automatically (order ${this.options.order})`:`${this.hint()} is obsolete due to ${A.snapshot2(s,i,t)} since s${o}${v?` and will run automatically (order ${this.options.order})`:""}`),this.unsubscribeFromAllObservables(),v?a.push(this):(d=this.observers)===null||d===void 0||d.forEach(y=>y.markObsoleteDueTo(this,this.operation.fieldKey,this.changeset,this.operation.ownerHandle,p,o,a));const b=this.transaction;b.changeset===i||!b.isFinished&&this!==e&&!this.options.allowObsoleteToFinish&&b.cancel(new Error(`T${b.id}[${b.hint}] is canceled due to obsolete ${A.snapshot2(s,i,t)} changed by T${i.id}[${i.hint}]`),null)}}relaunchIfNotUpToDate(e,t){const i=this.options.throttling,s=Date.now()+this.started,r=i?i-s:0;if(e||r<0){if(this.isNotUpToDate())try{const o=this.operation.reuseOrRelaunch(!1,void 0);o.result instanceof Promise&&o.result.catch(a=>{o.options.kind===ne.reactive&&G(`reactive function ${o.hint()} failed and will not run anymore: ${a}`,a)})}catch(o){if(t)this.options.kind===ne.reactive&&G(`reactive ${this.hint()} failed and will not run anymore: ${o}`,o);else throw o}}else i<Number.MAX_SAFE_INTEGER&&(r>0?setTimeout(()=>this.relaunchIfNotUpToDate(!0,!0),r):this.addToDeferredReactiveFunctions())}isNotUpToDate(){return!this.error&&(this.options.kind===ne.transactional||!this.successor||this.successor.transaction.isCanceled)}reenterOver(e){let t;const i=e.successor;if(i&&!i.transaction.isFinished)switch(f.isOn&&f.opt.obsolete&&f.write("║"," [!]",`${this.hint()} is trying to re-enter over ${i.hint()}`),e.options.reentrance){case ve.preventWithError:if(!i.transaction.isCanceled)throw G(`${e.hint()} (${e.why()}) is not reentrant over ${i.hint()} (${i.why()})`);t=new Error(`T${this.transaction.id}[${this.transaction.hint}] is on hold/PreventWithError due to canceled T${i.transaction.id}[${i.transaction.hint}]`),this.transaction.cancel(t,i.transaction);break;case ve.waitAndRestart:t=new Error(`T${this.transaction.id}[${this.transaction.hint}] is on hold/WaitAndRestart due to active T${i.transaction.id}[${i.transaction.hint}]`),this.transaction.cancel(t,i.transaction);break;case ve.cancelAndWaitPrevious:t=new Error(`T${this.transaction.id}[${this.transaction.hint}] is on hold/CancelAndWaitPrevious due to active T${i.transaction.id}[${i.transaction.hint}]`),this.transaction.cancel(t,i.transaction),i.transaction.cancel(new Error(`T${i.transaction.id}[${i.transaction.hint}] is canceled due to re-entering T${this.transaction.id}[${this.transaction.hint}]`),null);break;case ve.cancelPrevious:i.transaction.cancel(new Error(`T${i.transaction.id}[${i.transaction.hint}] is canceled due to re-entering T${this.transaction.id}[${this.transaction.hint}]`),null);break;case ve.runSideBySide:break}return t?this.error=t:e.successor=this,this}static proceed(e,t){e.enter();try{e.options.getter===void 0&&console.log("(!)"),e.result=e.options.getter.call(t,...e.args)}finally{e.leaveOrAsync()}}enter(){this.options.indicator&&this.indicatorEnter(this.options.indicator),f.isOn&&f.opt.operation&&f.write("║","‾\\",`${this.hint()} - enter`,void 0,`    [ ${A.obj(this.operation.ownerHandle,this.operation.fieldKey)} ]`),this.started=Date.now()}leaveOrAsync(){this.result instanceof Promise?(this.result=this.result.then(e=>(this.content=e,this.leave(!1,"  ⚐","- finished  "," OK ──┘"),e),e=>{throw this.error=e,this.leave(!1,"  ⚐","- finished  ","ERR ──┘"),e}),f.isOn&&(f.opt.operation?f.write("║","_/",`${this.hint()} - leave... `,0,"ASYNC ──┐"):f.opt.transaction&&f.write("║","  ",`${this.why()} ...`,0,"ASYNC"))):(this.content=this.result,this.leave(!0,"_/","- leave"))}leave(e,t,i,s=void 0){const r=Date.now()-this.started;this.started=-this.started,f.isOn&&f.opt.operation&&f.write("║",`${t}`,`${this.hint()} ${i}`,r,s),r>(e?E.mainThreadBlockingWarningThreshold:E.asyncActionDurationWarningThreshold)&&f.write("","[!]",this.why(),r,e?"    *** main thread is too busy ***":"    *** async is too long ***"),this.cause=void 0,this.options.indicator&&this.indicatorLeave(this.options.indicator)}indicatorEnter(e){const t={hint:"Indicator.enter",isolation:Y.disjoinFromOuterAndInnerTransactions,logging:f.isOn&&f.opt.indicator?void 0:f.global};Z.proceedWithinGivenLaunch(void 0,S.run,t,Se.enter,e,this.transaction)}indicatorLeave(e){S.outside(()=>{const t=()=>{const i={hint:"Indicator.leave",isolation:Y.disjoinFromOuterAndInnerTransactions,logging:f.isOn&&f.opt.indicator?void 0:f.DefaultLevel};Z.proceedWithinGivenLaunch(void 0,S.run,i,Se.leave,e,this.transaction)};this.transaction.whenFinished().then(t,t)})}addToDeferredReactiveFunctions(){k.deferredReactiveOperations.push(this),k.deferredReactiveOperations.length===1&&setTimeout(k.processDeferredReactiveFunctions,0)}static processDeferredReactiveFunctions(){const e=k.deferredReactiveOperations;k.deferredReactiveOperations=[];for(const t of e)t.relaunchIfNotUpToDate(!0,!0)}static markUsed(e,t,i,s,r,o){if(r!==ne.transactional){const a=k.current;if(a&&a.options.kind!==ne.transactional&&a.transaction===S.current&&i!==w.Handle){const c=m.current();c!==t.changeset&&c.bumpBy(t.changeset.timestamp);const d=o?-1:c.timestamp;a.subscribeTo(e,t,i,s,d)||a.markObsoleteDueTo(e,i,s.applied.changeset,s,Ne,c.timestamp,c.obsolete)}}}static markEdited(e,t,i,s,r,o){i?s.changes.add(r):s.changes.delete(r),f.isOn&&f.opt.write&&(i?f.write("║","  =",`${A.snapshot2(o,s.changeset,r)} is changed: ${pt(e)} ▸▸ ${pt(t)}`):f.write("║","  =",`${A.snapshot2(o,s.changeset,r)} is changed: ${pt(e)} ▸▸ ${pt(t)}`,void 0," (same as previous)"))}static tryResolveConflict(e,t,i){let s=e===t,r=i;return s||(i instanceof k&&i.obsoleteDueTo===void 0?(s=!0,r=i):e instanceof k&&(e.obsoleteDueTo===void 0||e.cause===Ne)&&(s=!0,r=e)),{isResolved:s,resolvedValue:r}}static propagateAllChangesThroughSubscriptions(e){var t;const i=e.timestamp,s=e.obsolete;e.items.forEach((r,o)=>{if(k.propagateFieldChangeThroughSubscriptions(!1,i,r,w.Revision,o,s),!r.disposed)r.changes.forEach((a,c)=>k.propagateFieldChangeThroughSubscriptions(!1,i,r,c,o,s));else for(const a in r.former.objectVersion.data)k.propagateFieldChangeThroughSubscriptions(!0,i,r,a,o,s)}),s.sort(bs),(t=e.options.journal)===null||t===void 0||t.edited(St.buildPatch(e.hint,e.items))}static revokeAllSubscriptions(e){e.items.forEach((t,i)=>{k.propagateFieldChangeThroughSubscriptions(!0,e.timestamp,t,w.Revision,i,void 0),t.changes.forEach((s,r)=>k.propagateFieldChangeThroughSubscriptions(!0,e.timestamp,t,r,i,void 0))})}static propagateFieldChangeThroughSubscriptions(e,t,i,s,r,o){var a;const c=i.data[s];if(o!==void 0){const d=i.former.objectVersion.data[s];if(d!==void 0&&d instanceof be){const l=`T${i.changeset.id}[${i.changeset.hint}]`;if(d instanceof k){(d.obsoleteSince===xn||d.obsoleteSince<=0)&&(d.obsoleteDueTo=l,d.obsoleteSince=t,d.unsubscribeFromAllObservables());const u=d.successor;u!==c?u&&!u.transaction.isFinished&&u.transaction.cancel(new Error(`T${u.transaction.id}[${u.transaction.hint}] is canceled by T${i.changeset.id}[${i.changeset.hint}] and will not run anymore`),null):d.successor=void 0}(a=d.observers)===null||a===void 0||a.forEach(u=>{const p=u.transaction,v=p.isFinished?o:p.changeset.obsolete;return u.markObsoleteDueTo(d,s,i.changeset,r,l,t,v)})}}c instanceof k?c.changeset===i.changeset&&c.observables!==void 0&&(E.repetitiveUsageWarningThreshold<Number.MAX_SAFE_INTEGER&&c.observables.forEach((d,l)=>{d.usageCount>E.repetitiveUsageWarningThreshold&&f.write("","[!]",`${c.hint()} uses ${d.memberHint} ${d.usageCount} times (consider remembering it in a local variable)`,0," *** WARNING ***")}),e&&c.unsubscribeFromAllObservables()):c instanceof be&&c.observers}static enqueueReactiveFunctionsToRun(e){const t=k.queuedReactiveOperations,i=t.length===0;for(const s of e)t.push(s);i&&Z.proceedWithinGivenLaunch(void 0,k.processQueuedReactiveOperations)}static migrateFieldVersion(e,t){let i;return e instanceof k?i=new k(t,e.operation,t.changeset,e,!0):i=new be(e.content,e.lastEditorChangesetId),i}static processQueuedReactiveOperations(){const e=k.queuedReactiveOperations;let t=0;for(;t<e.length;)e[t].relaunchIfNotUpToDate(!1,!0),t++;k.queuedReactiveOperations=[]}unsubscribeFromAllObservables(){var e;(e=this.observables)===null||e===void 0||e.forEach((t,i)=>{var s;i.observers.delete(this),f.isOn&&(f.opt.read||!((s=this.options.logging)===null||s===void 0)&&s.read)&&f.write(f.opt.transaction&&!m.current().sealed?"║":" ","-",`${this.hint()} is unsubscribed from ${t.memberHint}`)}),this.observables=void 0}subscribeTo(e,t,i,s,r){var o,a,c;const d=this.transaction.changeset.parent,l=k.canSubscribeTo(e,t,d,i,s,r);if(l){let u=0;if(E.repetitiveUsageWarningThreshold<Number.MAX_SAFE_INTEGER){const p=this.observables.get(e);u=p?p.usageCount+1:1}if(this.observables!==void 0){e.observers||(e.observers=new Set);const p={memberHint:A.snapshot2(s,t.changeset,i),usageCount:u};e.observers.add(this),this.observables.set(e,p),f.isOn&&(f.opt.read||!((o=this.options.logging)===null||o===void 0)&&o.read)&&f.write("║","  ∞",`${this.hint()} is subscribed to ${A.snapshot2(s,t.changeset,i,e)}${p.usageCount>1?` (${p.usageCount} times)`:""}`)}else f.isOn&&(f.opt.read||!((a=this.options.logging)===null||a===void 0)&&a.read)&&f.write("║","  x",`${this.hint()} is obsolete and is NOT subscribed to ${A.snapshot2(s,t.changeset,i,e)}`)}else f.isOn&&(f.opt.read||!((c=this.options.logging)===null||c===void 0)&&c.read)&&f.write("║","  x",`${this.hint()} is NOT subscribed to already obsolete ${A.snapshot2(s,t.changeset,i,e)}`);return l}static canSubscribeTo(e,t,i,s,r,o){const c=(i?i.lookupObjectVersion(r,s,!1):r.applied).data[s];let d=e===c||!t.changeset.sealed&&t.former.objectVersion.data[s]===c;return d&&o!==-1&&(d=!(e instanceof k&&o>=e.obsoleteSince)),d}static createOperation(e,t,i){const s=new Z(e,t),r=(...o)=>s.reuseOrRelaunch(!1,o).result;return w.set(r,w.Controller,s),r}static rememberOperationOptions(e,t,i,s,r,o,a,c){const d=w.acquire(e,w.Initial);let l=d[t];const u=l?l.operation:new Z(Oi,t),p=l?l.options:Ot.INITIAL;if(d[t]=l=new k(S.current,u,X.changeset,new Ot(i,s,p,a,c),!1),l.options.kind===ne.reactive&&l.options.throttling<Number.MAX_SAFE_INTEGER){const v=w.acquire(e,w.Reactive);v[t]=l}else if(l.options.kind===ne.reactive&&l.options.throttling>=Number.MAX_SAFE_INTEGER){const v=w.getFrom(e,w.Reactive);delete v[t]}return l.options}static init(){Object.freeze(Qn),f.getMergedLoggingOptions=ps,A.valueHint=pt,m.markUsed=k.markUsed,m.markEdited=k.markEdited,m.tryResolveConflict=k.tryResolveConflict,m.propagateAllChangesThroughSubscriptions=k.propagateAllChangesThroughSubscriptions,m.revokeAllSubscriptions=k.revokeAllSubscriptions,m.enqueueReactiveFunctionsToRun=k.enqueueReactiveFunctionsToRun,x.migrateFieldVersion=k.migrateFieldVersion,E.createOperation=k.createOperation,E.rememberOperationOptions=k.rememberOperationOptions,Promise.prototype.then=vs;try{Object.defineProperty(globalThis,"rWhy",{get:Z.why,configurable:!1,enumerable:!1}),Object.defineProperty(globalThis,"rBriefWhy",{get:Z.briefWhy,configurable:!1,enumerable:!1})}catch{}try{Object.defineProperty(global,"rWhy",{get:Z.why,configurable:!1,enumerable:!1}),Object.defineProperty(global,"rBriefWhy",{get:Z.briefWhy,configurable:!1,enumerable:!1})}catch{}}}k.current=void 0;k.queuedReactiveOperations=[];k.deferredReactiveOperations=[];function pt(n){let e="";return Array.isArray(n)?e=`Array(${n.length})`:n instanceof Set?e=`Set(${n.size})`:n instanceof Map?e=`Map(${n.size})`:n instanceof k?e=`#${n.operation.ownerHandle.id}t${n.changeset.id}s${n.changeset.timestamp}${n.lastEditorChangesetId!==void 0&&n.lastEditorChangesetId!==0?`t${n.lastEditorChangesetId}`:""}`:n===w.Undefined?e="undefined":typeof n=="string"?e=`"${n.toString().slice(0,20)}${n.length>20?"...":""}"`:n!=null?e=n.toString().slice(0,40):e="undefined",e}function ps(n){const e=S.current;let t=f.merge(e.options.logging,e.id>1?31+e.id%6:37,e.id>1?`T${e.id}`:`-${m.idGen.toString().replace(/[0-9]/g,"-")}`,f.global);return t=f.merge({margin1:e.margin},void 0,void 0,t),k.current&&(t=f.merge({margin2:k.current.margin},void 0,void 0,t)),n&&(t=f.merge(n,void 0,void 0,t)),t}const ms=Promise.prototype.then;function vs(n,e){const t=S.current;if(!t.isFinished){n||(n=ys),e||(e=ws);const i=k.current;i&&(n=i.wrap(n),e=i.wrap(e)),n=t.wrap(n,!1),e=t.wrap(e,!0)}return ms.call(this,n,e)}function bs(n,e){return n.order-e.order}function ys(n){return n}function ws(n){throw n}k.init();class Ee{static why(e=!1){return e?Z.briefWhy():Z.why()}static getOperation(e){return Z.getControllerOf(e)}static pullLastResult(e,t){return Ee.getOperation(e).pullLastResult(t)}static configureCurrentOperation(e){return Z.configureImpl(void 0,e)}static getRevisionOf(e){return e[w.Revision]}static takeSnapshot(e){return m.takeSnapshot(e)}static dispose(e){m.dispose(e)}static get reactivityAutoStartDisabled(){return E.reactivityAutoStartDisabled}static set reactivityAutoStartDisabled(e){E.reactivityAutoStartDisabled=e}static get isLogging(){return f.isOn}static get loggingOptions(){return f.opt}static setLoggingMode(e,t){f.setMode(e,t)}static setLoggingHint(e,t){E.setHint(e,t)}static getLoggingHint(e,t=!1){return We.getHint(e,t)}static setProfilingMode(e,t){E.setProfilingMode(e,t)}}function Me(n,...e){return Z.proceedWithinGivenLaunch(void 0,n,...e)}function Zn(n,e,...t){return E.sensitive(n,e,...t)}function N(n,e){return E.decorateData(!1,n,e)}function at(n,e){return E.decorateData(!0,n,e)}function P(n,e,t){const i={kind:ne.transactional,isolation:Y.joinToCurrentTransaction};return E.decorateOperation(!0,P,i,n,e,t)}function ze(n,e,t){const i={kind:ne.reactive,isolation:Y.joinAsNestedTransaction,throttling:-1};return E.decorateOperation(!0,ze,i,n,e,t)}function Si(n,e,t){const i={kind:ne.cached,isolation:Y.joinToCurrentTransaction,noSideEffects:!0};return E.decorateOperation(!0,Si,i,n,e,t)}function T(n){return E.decorateOperationParametrized(T,n)}class yt{constructor(e,t,i=-1){this.owner=e,this.name=t,this.index=i}get variable(){return this.index<0?this.owner[this.name]:this.owner[this.name][this.index]}set variable(e){this.index<0?this.owner[this.name]=e:this.owner[this.name][this.index]=e}unobs(){return Me(()=>this.variable)}observe(){return this.variable}unobserve(){throw new Error("not implemented")}static sameRefs(e,t){return e.owner===t.owner&&e.name===t.name&&e.index===t.index}static similarRefs(e,t){return e.owner.constructor===t.owner.constructor&&e.name===t.name&&e.index===t.index}}class xs extends yt{constructor(e,t,i,s){super(e,t),this.valueOn=i,this.valueOff=s}toggle(){const e=this.owner,t=this.name;S.run({hint:`toggle ${e.constructor.name}.${t}`},()=>{const i=e[t];i===this.valueOn||i instanceof yt&&this.valueOn instanceof yt&&yt.sameRefs(i,this.valueOn)?e[t]=this.valueOff:e[t]=this.valueOn})}}const Os={get:(n,e)=>new yt(n,e)};Object.defineProperty(Object.prototype,"$$",{configurable:!1,enumerable:!1,get(){return new Proxy(this,Os)}});var Ss=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},hn=function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)};class Es extends $e{constructor(e){super(),this.action=e}launch(){return this.action()}}Ss([ze,hn("design:type",Function),hn("design:paramtypes",[]),hn("design:returntype",Object)],Es.prototype,"launch",null);var An=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},xt=function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)},Zt=function(n,e,t,i){function s(r){return r instanceof t?r:new t(function(o){o(r)})}return new(t||(t=Promise))(function(r,o){function a(l){try{d(i.next(l))}catch(u){o(u)}}function c(l){try{d(i.throw(l))}catch(u){o(u)}}function d(l){l.done?r(l.value):s(l.value).then(a,c)}d((i=i.apply(n,e||[])).next())})},ge;(function(n){n[n.default=0]="default",n[n.autonomous=1]="autonomous",n[n.manualMount=2]="manualMount"})(ge||(ge={}));var je;(function(n){n[n.realtime=0]="realtime",n[n.normal=1]="normal",n[n.background=2]="background"})(je||(je={}));class R{static declare(e,t,i,s,r,o,a,c,d,l){let u,p;t instanceof Function?p={content:t,contentAsync:i,key:s,mode:r,preparation:o,preparationAsync:a,finalization:c,triggers:d,basis:l}:p=t??{};let v=p.key;const b=Le==null?void 0:Le.instance;if(b){let y=b.driver.child(b,e,p,p.basis);const O=b.children;if(y??(y=O.tryMergeAsExisting(v=v||ei(b),void 0,"nested elements can be declared inside content script only")),y){if(u=y.instance,u.driver!==e&&e!==void 0)throw new Error(`changing element driver is not yet supported: "${u.driver.name}" -> "${e==null?void 0:e.name}"`);const D=u.declaration.triggers;ii(p.triggers,D)&&(p.triggers=D),u.declaration=p}else u=new L(v||ei(b),e,p,b),u.slot=O.mergeAsAdded(u)}else u=new L(v||"",e,p,b),u.slot=xi.createItem(u),Ut(u.slot);return u}static withBasis(e,t){return e?e.basis=t:e=t??{},e}static get isFirstUpdate(){return L.ownSlot.instance.stamp===1}static get key(){return L.ownSlot.instance.key}static get stamp(){return L.ownSlot.instance.stamp}static get triggers(){return L.ownSlot.instance.declaration.triggers}static get priority(){return L.ownSlot.instance.priority}static set priority(e){L.ownSlot.instance.priority=e}static get childrenShuffling(){return L.ownSlot.instance.childrenShuffling}static set childrenShuffling(e){L.ownSlot.instance.childrenShuffling=e}static triggerUpdate(e,t){const i=e,s=i.declaration;ii(t,s.triggers)||(s.triggers=t,Ut(i.slot))}static triggerFinalization(e){_n(e.slot,!0,!0)}static updateNestedNodesThenDo(e){Vt(L.ownSlot,void 0,e)}static markAsMounted(e,t){const i=e;if(i.stamp<0)throw new Error("deactivated node cannot be mounted or unmounted");if(i.stamp>=Number.MAX_SAFE_INTEGER)throw new Error("node must be activated before mounting");i.stamp=t?0:Number.MAX_SAFE_INTEGER-1}static findMatchingHost(e,t){let i=e.host;for(;i!==i.host&&!t(i);)i=i.host;return i}static findMatchingPrevSibling(e,t){let i=e.slot.prev;for(;i&&!t(i.instance);)i=i.prev;return i==null?void 0:i.instance}static forEachChildRecursively(e,t){t(e);for(const i of e.children.items())R.forEachChildRecursively(i.instance,t)}static getDefaultLoggingOptions(){return L.logging}static setDefaultLoggingOptions(e){L.logging=e}}R.shortFrameDuration=16;R.longFrameDuration=300;R.currentUpdatePriority=je.realtime;R.frameDuration=R.longFrameDuration;class ks{constructor(e,t,i){this.name=e,this.isPartition=t,this.initialize=i}prepare(e){var t;return(t=this.initialize)===null||t===void 0||t.call(this,e.element),Lt(e.element,e.declaration)}finalize(e,t){return On(e.element,e.declaration),t}mount(e){}update(e){return Nt(e.element,e.declaration)}child(e,t,i,s){}provideHost(e){return e}}class Fn{constructor(e){this.defaultValue=e}set value(e){L.setNodeVariableValue(this,e)}get value(){return L.useNodeVariableValue(this)}get valueOrUndefined(){return L.tryUseNodeVariableValue(this)}}function ei(n){const e=n.numerator++,t=Zi(e);let i;return Ee.isLogging?i=`·${es(t)}`:i=`·${t}`,i}function Ei(n){var e;return(e=n==null?void 0:n.mode)!==null&&e!==void 0?e:n!=null&&n.basis?Ei(n==null?void 0:n.basis):ge.default}function Nt(n,e){let t;const i=e.basis,s=e.content,r=e.contentAsync;if(s&&r)throw G("'content' and 'contentAsync' cannot be defined together");return s?t=s(n,i?()=>Nt(n,i):qe):r?t=r(n,i?()=>Nt(n,i):Pi):i&&(t=Nt(n,i)),t}function Lt(n,e){let t;const i=e.basis,s=e.preparation,r=e.preparationAsync;if(s&&r)throw G("'preparation' and 'preparationAsync' cannot be defined together");return s?t=s(n,i?()=>Lt(n,i):qe):r?t=r(n,i?()=>Lt(n,i):Pi):i&&(t=Lt(n,i)),t}function On(n,e){const t=e.basis,i=e.finalization;i?i(n,t?()=>On(n,t):qe):t&&On(n,t)}class $n extends $e{constructor(e,t){super(),this.next=void 0,this.variable=e,this.value=t}}An([N,xt("design:type",Object)],$n.prototype,"next",void 0);An([N,xt("design:type",Fn)],$n.prototype,"variable",void 0);class L extends R{constructor(e,t,i,s){super();const r=this;if(this.key=e,this.driver=t,this.declaration=i,s){const o=s;this.level=o.level+1,this.owner=s,this.outer=o.context?s:o.outer}else this.level=1,this.owner=s=r,this.outer=r;this.element=t.create(this),this.host=r,this.children=new xi(Ps,!0),this.slot=void 0,this.stamp=Number.MAX_SAFE_INTEGER,this.context=void 0,this.numerator=0,this.priority=je.realtime,this.childrenShuffling=!1,L.grandNodeCount++,this.has(ge.autonomous)&&L.disposableNodeCount++}get strictOrder(){return this.children.isStrict}set strictOrder(e){this.children.isStrict=e}get isMoved(){return this.owner.children.isMoved(this.slot)}has(e){return(Ei(this.declaration)&e)===e}update(e){ki(this.slot)}configureReactronic(e){if(this.stamp<Number.MAX_SAFE_INTEGER-1||!this.has(ge.autonomous))throw new Error("reactronic can be configured only for elements with autonomous mode and only during activation");return Ee.getOperation(this.update).configure(e)}static get ownSlot(){if(!Le)throw new Error("current element is undefined");return Le}static tryUseNodeVariableValue(e){var t,i;let s=L.ownSlot.instance;for(;((t=s.context)===null||t===void 0?void 0:t.variable)!==e&&s.owner!==s;)s=s.outer.slot.instance;return(i=s.context)===null||i===void 0?void 0:i.value}static useNodeVariableValue(e){var t;const i=(t=L.tryUseNodeVariableValue(e))!==null&&t!==void 0?t:e.defaultValue;if(!i)throw new Error("unknown node variable");return i}static setNodeVariableValue(e,t){const i=L.ownSlot.instance,s=i.owner,r=Me(()=>{var o;return(o=s.context)===null||o===void 0?void 0:o.value});t&&t!==r?(r?i.outer=s:i.outer=s.outer,S.run({isolation:Y.joinAsNestedTransaction},()=>{const o=i.context;o?(o.variable=e,o.value=t):i.context=new $n(e,t)})):r?i.outer=s:i.outer=s.outer}}L.logging=void 0;L.grandNodeCount=0;L.disposableNodeCount=0;An([ze,T({reentrance:ve.cancelAndWaitPrevious,allowObsoleteToFinish:!0,triggeringArgs:!0,noSideEffects:!1}),xt("design:type",Function),xt("design:paramtypes",[Object]),xt("design:returntype",void 0)],L.prototype,"update",null);function Ps(n){return n.stamp>=0?n.key:void 0}function Vt(n,e,t){Rn(n,()=>{var i;const s=n.instance,r=s.children;if(r.isMergeInProgress){let o;try{r.endMerge(e);for(const a of r.removedItems(!0))_n(a,!0,!0);if(!e){const a=r.isStrict;let c,d,l=!1,u=s;for(const p of r.items()){if(S.isCanceled)break;const v=p.instance,b=v.driver.isPartition;l=Ds(l,b?s:u,p,r,a);const O=(i=v.priority)!==null&&i!==void 0?i:je.realtime;O===je.realtime?Ut(p):O===je.normal?c=si(p,c):d=si(p,d),b&&(u=v)}!S.isCanceled&&(c!==void 0||d!==void 0)&&(o=Ts(n,r,c,d).then(()=>t(e),p=>t(p)))}}finally{o||t(e)}}})}function Ds(n,e,t,i,s){const r=t.instance;return r.element.native&&!r.has(ge.manualMount)?(n||r.host!==e)&&(i.markAsMoved(t),n=!1):s&&i.isMoved(t)&&(n=!0),r.host=e,n}function Ts(n,e,t,i){return Zt(this,void 0,void 0,function*(){const s=n.instance.stamp;t&&(yield ti(n,s,e,t,je.normal)),i&&(yield ti(n,s,e,i,je.background))})}function ti(n,e,t,i,s){return Zt(this,void 0,void 0,function*(){yield S.requestNextFrame();const r=n.instance;if(!S.isCanceled||!S.isFrameOver(1,R.shortFrameDuration/3)){let o=R.currentUpdatePriority;R.currentUpdatePriority=s;try{r.childrenShuffling&&$s(i);const a=s===je.background?R.shortFrameDuration:1/0;let c=Math.min(a,Math.max(R.frameDuration/4,R.shortFrameDuration));for(const d of i)if(Ut(d),S.isFrameOver(1,c)&&(R.currentUpdatePriority=o,yield S.requestNextFrame(0),o=R.currentUpdatePriority,R.currentUpdatePriority=s,c=Math.min(4*c,Math.min(a,R.frameDuration))),S.isCanceled&&S.isFrameOver(1,R.shortFrameDuration/3))break}finally{R.currentUpdatePriority=o}}})}function Ut(n){const e=n.instance;e.stamp>=0&&(e.has(ge.autonomous)?(e.stamp===Number.MAX_SAFE_INTEGER&&S.outside(()=>{Ee.isLogging&&Ee.setLoggingHint(e.element,e.key),Ee.getOperation(e.update).configure({order:e.level})}),Me(e.update,e.declaration.triggers)):ki(n))}function As(n){const e=n.driver;n.stamp===Number.MAX_SAFE_INTEGER?Me(()=>{n.stamp=Number.MAX_SAFE_INTEGER-1,e.prepare(n),n.has(ge.manualMount)||(n.stamp=0,n.host!==n&&e.mount(n))}):n.isMoved&&!n.has(ge.manualMount)&&n.host!==n&&Me(()=>e.mount(n))}function ki(n){const e=n.instance;if(e.stamp>=0){let t;Rn(n,()=>{if(As(e),e.stamp<Number.MAX_SAFE_INTEGER-1)try{e.stamp++,e.numerator=0,e.children.beginMerge(),t=e.driver.update(e),t=wi(t,s=>(Vt(n,void 0,qe),s),s=>{console.log(s),Vt(n,s??new Error("unknown error"),qe)})}catch(i){Vt(n,i,qe),console.log(`Update failed: ${e.key}`),console.log(`${i}`)}})}}function _n(n,e,t){const i=n.instance;if(i.stamp>=0){const s=i.driver;t&&i.key!==i.declaration.key&&!s.isPartition&&console.log(`WARNING: it is recommended to assign explicit key for conditional element in order to avoid unexpected side effects: ${i.key}`),i.stamp=~i.stamp;const r=Me(()=>s.finalize(i,e));if(i.has(ge.autonomous)){n.aux=void 0;const o=Ht;o?Ht=o.aux=n:Gt=Ht=n,Gt===n&&S.run({isolation:Y.disjoinForInternalDisposal,hint:`runDisposalLoop(initiator=${n.instance.key})`},()=>{Fs().then(qe,a=>console.log(a))})}for(const o of i.children.items())_n(o,r,!1);L.grandNodeCount--}}function Fs(){return Zt(this,void 0,void 0,function*(){yield S.requestNextFrame();let n=Gt;for(;n!==void 0;)S.isFrameOver(500,5)&&(yield S.requestNextFrame()),Ee.dispose(n.instance),n=n.aux,L.disposableNodeCount--;Gt=Ht=void 0})}function ni(n){let e;const t=Le;return t?e=(...i)=>Rn(t,n,...i):e=n,e}function Rn(n,e,...t){const i=Le;try{return Le=n,e(...t)}finally{Le=i}}function ii(n,e){let t=n===e;if(!t){if(Array.isArray(n))t=Array.isArray(e)&&n.length===e.length&&n.every((i,s)=>i===e[s]);else if(n===Object(n)&&e===Object(e)){for(const i in n)if(t=n[i]===e[i],!t)break}}return t}function si(n,e){return e==null&&(e=new Array),e.push(n),e}function $s(n){const e=n.length-1;let t=e;for(;t>=0;){const i=Math.floor(Math.random()*e),s=n[t];n[t]=n[i],n[i]=s,t--}return n}const _s=Promise.prototype.then;function Rs(n,e){return n=n?ni(n):Cs,e=e?ni(e):js,_s.call(this,n,e)}function Cs(n){return n}function js(n){throw n}Promise.prototype.then=Rs;const qe=(...n)=>{},Pi=(...n)=>Zt(void 0,void 0,void 0,function*(){});let Le,Gt,Ht;var Di=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},tt=function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)};class Ti extends $e{constructor(e=1e3){super(),this.hour=0,this.minute=0,this.second=0,this.ms=0,this.interval=0,this.paused=!1,this.interval=e,this.tick()}pause(e=!0){this.paused=e}tick(){let e=0;try{const t=new Date;this.hour=t.getHours(),this.minute=t.getMinutes(),this.second=t.getSeconds(),this.ms=t.getMilliseconds(),e=t.getTime()%this.interval}finally{setTimeout(()=>this.tick(),this.interval-e)}}}Di([P,tt("design:type",Function),tt("design:paramtypes",[Boolean]),tt("design:returntype",void 0)],Ti.prototype,"pause",null);Di([P,tt("design:type",Function),tt("design:paramtypes",[]),tt("design:returntype",void 0)],Ti.prototype,"tick",null);function Is(){Ee.setLoggingMode(!0,$.ErrorsOnly),Ee.setProfilingMode(!1,{repetitiveUsageWarningThreshold:Number.MAX_SAFE_INTEGER,mainThreadBlockingWarningThreshold:5,asyncActionDurationWarningThreshold:Number.MAX_SAFE_INTEGER,garbageCollectionSummaryInterval:Number.MAX_SAFE_INTEGER})}var Ms=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},gn=function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)};function Cn(n){return S.run(null,()=>new Ai(n))}class Ai{constructor(e){this.restyle=e}cache(){return this.restyle()}get class(){return this.cache()}}Ms([Si,gn("design:type",Function),gn("design:paramtypes",[]),gn("design:returntype",Object)],Ai.prototype,"cache",null);function Xe(n,e){return n===Object(n)&&!Array.isArray(n)&&e in n}function jn(n,e,t){return Math.min(t,Math.max(e,n))}function zs(n,e){let t=0,i=0,s=1,r=0;for(;t<n.length;){const o=n.charCodeAt(t);if(Hs(o))r%2===0?i=i*26+o-64:console.error(`Digit is expected, but letter ("${n[t]}") was read`);else if(Xs(o))r%2===0?i=i*26+o-96:console.error(`Digit is expected, but letter ("${n[t]}") was read`);else if(Vs(o))r%2===0&&(i!==0&&(r===0?e.x1=i*s:e.x2=i*s,i=0),r++),i=i*10+o-48;else if(o===40)r===0?e.x1=i*s:r===2&&(e.x2=i*s),s>0?(s=-1,r&=-2,i=0):console.error("Sign must not be negative");else if(o===41){switch(s>0&&console.error("Sign must be negative"),r){case 0:e.x1=i*s;break;case 1:e.y1=i*s;break;case 2:e.x2=i*s;break;case 3:e.y2=i*s;break}s=1,i=0,r++}else o===58?(s<0&&console.error(`area "${n}": e1`),r===1?e.y1=i*s:r!==2&&console.error(`area "${n}": [e2] component = ${r}`),r=2,i=0):Ls(o)||console.error(`Unknown symbol "${n[t]}" in "${n}"`);t++}if(i!==0)switch(r){case 0:{e.x1=i*s,s<0&&e.y1===0&&(e.y1=s);break}case 1:{s<0&&e.x1===0&&(e.x1=s),e.y1=i*s;break}case 2:{e.x2=i*s,s<0&&e.y2===0&&(e.y2=s);break}case 3:{s<0&&e.x2===0&&(e.x2=s),e.y2=i*s;break}}else s<0&&(r===0?(e.x1===0&&(e.x1=s),e.y1===0&&(e.y1=s)):(e.x2===0&&(e.x2=s),e.y2===0&&(e.y2=s)));return e}function Ns(n,e){return n.x1===e.x1&&n.y1===e.y1&&n.x2===e.x2&&n.y1===e.y2}function Ls(n){return n===32||n>=9&&n<=13||n===133||n===160}function Vs(n,e){return 48<=n&&n<=57}function Hs(n){return 65<=n&&n<=90}function Xs(n){return 97<=n&&n<=122}var h;(function(n){n[n.panel=0]="panel",n[n.table=1]="table",n[n.note=2]="note",n[n.group=3]="group",n[n.part=4]="part",n[n.splitter=5]="splitter",n[n.cursor=6]="cursor",n[n.native=7]="native"})(h||(h={}));var W;(function(n){n[n.left=0]="left",n[n.center=1]="center",n[n.right=2]="right",n[n.stretch=3]="stretch",n[n.stretchAndFix=4]="stretchAndFix"})(W||(W={}));var te;(function(n){n[n.top=0]="top",n[n.center=1]="center",n[n.bottom=2]="bottom",n[n.stretch=3]="stretch",n[n.stretchAndFix=4]="stretchAndFix"})(te||(te={}));var ke;(function(n){n[n.horizontal=0]="horizontal",n[n.vertical=1]="vertical"})(ke||(ke={}));var ct=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},dt=function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)};class In extends ks{create(e){return new U(e)}}class U{constructor(e){this.node=e,this.maxColumnCount=0,this.maxRowCount=0,this.layoutInfo=void 0,this.native=void 0,this.model=void 0,this._kind=h.part,this._place=void 0,this._coords=Ys,this._width=new ri,this._height=new ri,this._horizontal=void 0,this._vertical=void 0,this._contentHorizontal=void 0,this._contentVertical=void 0,this._stretchingStrengthHorizontally=void 0,this._stretchingStrengthVertically=void 0,this._contentWrapping=!0,this._overlayVisible=void 0,this._sealed=void 0,this._splitView=void 0,this._hasStylingPresets=!1}prepareForUpdate(){this._place=void 0,this._hasStylingPresets=!1}get index(){return this.node.slot.index}get isPanel(){return this.kind===h.panel}get isTable(){return this.kind===h.table}get isAuxiliary(){return this.kind>h.note}get kind(){return this._kind}set kind(e){(e!==this._kind||this.node.stamp>=Number.MAX_SAFE_INTEGER-1)&&(this.native!==void 0&&U.applyKind(this,e),this._kind=e)}get place(){return this._place}set place(e){var t,i;const s=this.node,r=s.driver;if(r.isPartition)this.rowBreak();else{const o=s.owner,a=o.element,c=(t=s.slot.prev)===null||t===void 0?void 0:t.instance.element,d=(i=c==null?void 0:c.layoutInfo)!==null&&i!==void 0?i:Ge,l=this.layoutInfo=o.children.isStrict?new he(d):void 0,u=r instanceof Fi,p=Bs(!u,e,a.maxColumnCount,a.maxRowCount,d,l);Ns(p,this._coords)||(this.native!==void 0&&U.applyCoords(this,p),this._coords=p),this._place=e??{}}}get width(){return this._width.raw}set width(e){const t=this._width.raw;(e.min!==t.min||e.max!==t.max||e.preferred!==void 0)&&(U.applyWidth(this,e),this._width.raw=e)}get widthPx(){return this._width}set widthPx(e){const t=this._width;e.minPx!==t.minPx&&(this._width.minPx=e.minPx),e.maxPx!==t.maxPx&&(this._width.maxPx=e.maxPx)}get height(){return this._height.raw}set height(e){const t=this._height.raw;(e.min!==t.min||e.max!==t.max||e.preferred!==void 0)&&(U.applyHeight(this,e),this._height.raw=e)}get heightPx(){return this._height}set heightPx(e){const t=this._height;e.minPx!==t.minPx&&(this._height.minPx=e.minPx),e.maxPx!==t.maxPx&&(this._height.maxPx=e.maxPx)}get horizontally(){return this._horizontal}set horizontally(e){const t=this._horizontal;e!==t&&(U.applyHorizontal(this,t,e,this._contentHorizontal,this._contentHorizontal,this._stretchingStrengthHorizontally),this._horizontal=e)}get vertically(){return this._vertical}set vertically(e){const t=this._vertical;e!==t&&(U.applyVertical(this,t,e,this._contentVertical,this._contentVertical,this._stretchingStrengthVertically),this._vertical=e)}get contentHorizontally(){return this._contentHorizontal}set contentHorizontally(e){const t=this._contentHorizontal;e!==t&&(U.applyHorizontal(this,this._horizontal,this._horizontal,t,e,this._stretchingStrengthHorizontally),this._contentHorizontal=e)}get contentVertically(){return this._contentVertical}set contentVertically(e){const t=this._contentVertical;e!==t&&(U.applyVertical(this,this._vertical,this._vertical,t,e,this._stretchingStrengthVertically),this._contentVertical=e)}get stretchingStrengthHorizontally(){return this._stretchingStrengthHorizontally}set stretchingStrengthHorizontally(e){const t=this._stretchingStrengthHorizontally;e!==t&&(U.applyStretchingStrengthH(this,t,e),this._stretchingStrengthHorizontally=e)}get stretchingStrengthVertically(){return this._stretchingStrengthVertically}set stretchingStrengthVertically(e){const t=this._stretchingStrengthVertically;e!==t&&(U.applyStretchingStrengthV(this,t,e),this._stretchingStrengthVertically=e)}get contentWrapping(){return this._contentWrapping}set contentWrapping(e){e!==this._contentWrapping&&(U.applyContentWrapping(this,e),this._contentWrapping=e)}get overlayVisible(){return this._overlayVisible}set overlayVisible(e){e!==this._overlayVisible&&(U.applyOverlayVisible(this,e),this._overlayVisible=e)}get sealed(){return this._sealed}set sealed(e){e!==this._sealed&&(U.applySealed(this,e),this._sealed=e)}get splitView(){return this._splitView}set splitView(e){e!==this._splitView&&(U.applySplitView(this,e),this._splitView=e)}get partitionSizeInSplitViewPx(){var e;return this.layoutInfo===void 0&&(this.layoutInfo=new he(Ge)),(e=this.layoutInfo.effectiveSizePx)!==null&&e!==void 0?e:0}get style(){return this.native.style}useStylingPreset(e,t){U.applyStylingPreset(this,this._hasStylingPresets,e,t),this._hasStylingPresets=!0}*children(e){const t=e==null?void 0:e.node.slot;for(const i of this.node.children.items(t))yield i.instance.element}static*childrenOf(e,t){return e.element.children(t)}rowBreak(){var e,t;const s=(e=this.node.slot.prev)===null||e===void 0?void 0:e.instance.element,r=(t=s==null?void 0:s.layoutInfo)!==null&&t!==void 0?t:Ge,o=this.layoutInfo=new he(r);o.x=1,o.y=o.runningMaxY+1}static applyKind(e,t){const i=Te.layouts[t];i&&e.native.setAttribute(Te.kindAttrName,i),Us[t](e)}static applyCoords(e,t){const i=e.style;if(t){const s=t.x1||1,r=t.y1||1,o=t.x2||s,a=t.y2||r;i.gridArea=`${r} / ${s} / span ${a-r+1} / span ${o-s+1}`}else i.gridArea=""}static applyWidth(e,t){var i,s;const r=e.style;e.node.owner.element.splitView===ke.horizontal||(r.minWidth=(i=t.min)!==null&&i!==void 0?i:"",r.maxWidth=(s=t.max)!==null&&s!==void 0?s:"")}static applyHeight(e,t){var i,s;const r=e.style;e.node.owner.element.splitView===ke.vertical||(r.minHeight=(i=t.min)!==null&&i!==void 0?i:"",r.maxHeight=(s=t.max)!==null&&s!==void 0?s:"")}static applyHorizontal(e,t,i,s,r,o){var a,c;t??(t=W.left),i??(i=W.left),r??(r=i);const d=e.style;let l;if(e.node.host.driver.isPartition){const p=e.node.host.element;l=p.layoutInfo,l===void 0&&(l=p.layoutInfo=new he(Ge))}let u=!1;if(l){if(u=(i===W.center||i===W.right)&&(l.alignerX===void 0||e.index<=l.alignerX.index),l.alignerX===e){if(!u)throw d.marginLeft="",new Error("changing alignment leader is not implemented yet")}else if(u){const v=(c=(a=l.alignerX)===null||a===void 0?void 0:a.native)===null||c===void 0?void 0:c.style;v&&(v.marginLeft=""),l.alignerX=e}}switch(i){default:case W.left:d.justifySelf="start",t===W.center?(d.marginLeft="",d.marginRight=""):t===W.right&&(d.marginLeft="");break;case W.center:d.justifySelf="center",l&&(d.marginLeft=u?"auto":""),d.marginRight="auto";break;case W.right:d.justifySelf="end",l&&(d.marginLeft=u?"auto":""),t===W.center&&(d.marginRight="");break;case W.stretch:case W.stretchAndFix:d.justifySelf="stretch",t===W.center?(d.marginLeft="",d.marginRight=""):t===W.right&&(d.marginLeft="");break}switch(r){default:case W.left:d.alignItems="start",d.textAlign="left";break;case W.center:d.alignItems="center",d.textAlign="center";break;case W.right:d.alignItems="end",d.textAlign="right";break;case W.stretch:case W.stretchAndFix:d.alignItems="stretch",d.textAlign="justify";break}i>=W.stretch&&o===void 0&&U.applyStretchingStrengthH(e,0,1)}static applyVertical(e,t,i,s,r,o){t??(t=te.top),i??(i=te.top),r??(r=i);const a=e.style;let c,d;if(e.node.host.driver.isPartition){const u=e.node.host.element;d=u.style,c=u.layoutInfo,c===void 0&&(c=u.layoutInfo=new he(Ge))}let l=!1;switch(c&&(l=(i===te.center||i===te.bottom)&&(c.alignerY===void 0||c.alignerY.vertically!==te.center),c.alignerY===e?l||(d.marginTop=""):l&&(d.marginTop="auto",c.alignerY=e)),i){default:case te.top:a.alignSelf="start";break;case te.center:a.alignSelf="center";break;case te.bottom:a.alignSelf="end";break;case te.stretch:case te.stretchAndFix:a.alignSelf="stretch";break}switch(r){default:case te.top:a.justifyContent="start";break;case te.center:a.justifyContent="center";break;case te.bottom:a.justifyContent="end";break;case te.stretch:case te.stretchAndFix:a.justifyContent="stretch";break}i>=te.stretch&&o===void 0&&U.applyStretchingStrengthV(e,0,1)}static applyStretchingStrengthH(e,t,i){const s=e.style,r=e.node.host;if(r.driver.isPartition){const o=r.element;o._stretchingStrengthHorizontally=i,i??(i=0)}i??(i=0),i>0?(s.flexGrow=`${i}`,s.flexBasis="0"):(s.flexGrow="",s.flexBasis="")}static applyStretchingStrengthV(e,t,i){var s;const r=e.node.host;if(r.driver.isPartition){const o=r.element;o._stretchingStrengthVertically=i;let a=0;if(t??(t=0),i??(i=0),t===0?i!==0&&(a=1):i===0&&t!==0&&(a=-1),a!==0){const c=(s=o._stretchingStrengthVertically)!==null&&s!==void 0?s:0+a,d=o.style;c===1?d.flexGrow=`${i}`:c===0&&(d.flexGrow="")}}}static applyContentWrapping(e,t){const i=e.style;t?(i.flexFlow="wrap",i.overflow="",i.textOverflow="",i.whiteSpace=""):(i.flexFlow="",i.overflow="hidden",i.textOverflow="ellipsis",i.whiteSpace="nowrap")}static applyOverlayVisible(e,t){const i=e.style,s=R.findMatchingHost(e.node,o=>o.element.native instanceof HTMLElement||o.element.native instanceof SVGElement),r=s==null?void 0:s.element.native;if(t===!0){const o=document.body,a=r.getBoundingClientRect();o.offsetWidth-a.left>a.right?(i.left="0",i.right=""):(i.left="",i.right="0"),o.clientHeight-a.top>a.bottom?(i.top="100%",i.bottom=""):(i.top="",i.bottom="100%"),i.display="",i.position="absolute",i.minWidth="100%",i.boxSizing="border-box",r.style.position="relative"}else r.style.position="",t===!1?i.display="none":i.position=i.display=i.left=i.right=i.top=i.bottom=""}static applySealed(e,t){e.native}static applySplitView(e,t){const i=e.native;if(i instanceof HTMLElement){e.sealed=t;const s=S.current;S.outside(()=>{s.whenFinished(!0).then(()=>{i.sensors.resize.observeResizing(e,t!==void 0)},r=>{})})}}static applyStylingPreset(e,t,i,s){const r=e.native;s??(s=!0),t?r.classList.toggle(i,s):r.className=s?i:""}}class ri extends $e{constructor(){super(),this.raw={min:"",max:""},this.minPx=0,this.maxPx=Number.POSITIVE_INFINITY}}class he{constructor(e){this.x=e.x,this.y=e.y,this.runningMaxX=e.runningMaxX,this.runningMaxY=e.runningMaxY,this.alignerX=void 0,this.alignerY=void 0,this.flags=e.flags&~Ke.ownCursorPosition,this.effectiveSizePx=0,this.contentSizeXpx=0,this.contentSizeYpx=0,this.borderSizeXpx=0,this.borderSizeYpx=0,this.isUpdateFinished=!1}}ct([at,dt("design:type",Number)],he.prototype,"effectiveSizePx",void 0);ct([at,dt("design:type",Number)],he.prototype,"contentSizeXpx",void 0);ct([at,dt("design:type",Number)],he.prototype,"contentSizeYpx",void 0);ct([at,dt("design:type",Number)],he.prototype,"borderSizeYpx",void 0);ct([at,dt("design:type",Number)],he.prototype,"borderSizeXpx",void 0);ct([at,dt("design:type",Boolean)],he.prototype,"isUpdateFinished",void 0);var Ke;(function(n){n[n.none=0]="none",n[n.ownCursorPosition=1]="ownCursorPosition",n[n.usesRunningColumnCount=2]="usesRunningColumnCount",n[n.usesRunningRowCount=4]="usesRunningRowCount",n[n.childrenRelayoutIsNeeded=8]="childrenRelayoutIsNeeded"})(Ke||(Ke={}));const Ys=Object.freeze({x1:0,y1:0,x2:0,y2:0}),Ge=Object.freeze(new he({x:1,y:1,runningMaxX:0,runningMaxY:0,flags:Ke.none,effectiveSizePx:0,contentSizeXpx:0,contentSizeYpx:0,borderSizeXpx:0,borderSizeYpx:0,isUpdateFinished:!1}));function Bs(n,e,t,i,s,r){var o,a;let c;if(typeof e=="string")c=zs(e,{x1:0,y1:0,x2:0,y2:0}),Ws(c,s.x,s.y,t||1/0,i||1/0,c),r&&(r.x=n?c.x2+1:c.x1,r.y=c.y1,r.flags=Ke.ownCursorPosition);else if(r){let d,l;e?(d=(o=e.cellsOverWidth)!==null&&o!==void 0?o:1,l=(a=e.cellsOverHeight)!==null&&a!==void 0?a:1):d=l=1;const u=t!==0?t:s.runningMaxX,p=i!==0?i:s.runningMaxY;c={x1:0,y1:0,x2:0,y2:0},d===0&&n&&(d=u||1,r.flags=Ke.usesRunningColumnCount),d>=0?n?(c.x1=s.x,c.x2=et(c.x1+d-1,0,t||1/0),r.x=c.x2+1):(c.x1=c.x2=s.x+d,r.x=c.x2):n?(c.x1=Math.max(s.x+d,1),c.x2=s.x,r.x=c.x2+1):(c.x1=c.x2=s.x+d,r.x=c.x2),l===0&&n&&(l=p||1,r.flags|=Ke.usesRunningRowCount),l>=0?n?(c.y1=s.y,c.y2=et(c.y1+l-1,0,i||1/0),c.y2>r.runningMaxY&&(r.runningMaxY=c.y2)):c.y1=c.y2=s.y+l:n?(c.y1=Math.max(s.y+l,1),c.y2=s.y):c.y1=c.y2=s.y+l}else throw new Error("relative layout requires sequential children");return c}function Ws(n,e,t,i,s,r){const o=et(n.x1,e,i),a=et(n.x2,o,i);o<=a?(r.x1=o,r.x2=a):(r.x1=a,r.x2=o);const c=et(n.y1,t,s),d=et(n.y2,c,s);return c<=d?(r.y1=c,r.y2=d):(r.y1=d,r.y2=c),r}function et(n,e,t){return n===0?n=e:n<0?n=Math.max(t+n,1):n=Math.min(n,t),n}class Fi extends In{constructor(){super("cursor",!1,e=>e.kind=h.cursor)}}const Te={element:"el",partition:"part",wrapper:"wrapper",splitter:"splitter",group:"group",layouts:["panel","table","note","group","","",""],keyAttrName:"key",kindAttrName:"kind"},Us=[n=>{const e=n.node.owner.element,t=n.style;t.display="flex",t.flexDirection="column",t.alignSelf=e.isTable?"stretch":"center",t.textAlign="initial",t.flexShrink="1",t.minWidth="0"},n=>{const e=n.node.owner.element,t=n.style;t.alignSelf=e.isTable?"stretch":"center",t.display="grid",t.flexBasis="0",t.gridAutoRows="minmax(min-content, 1fr)",t.gridAutoColumns="minmax(min-content, 1fr)",t.textAlign="initial"},n=>{const e=n.node.owner.element,t=n.style;t.alignSelf=e.isTable?"stretch":"center",t.display="inline-grid",t.flexShrink="1"},n=>{const e=n.style;e.display="contents"},n=>{const e=n.node.owner.element,t=n.style;t.display=e.isTable?"contents":"flex",t.flexDirection="row",t.alignItems="center",t.gap="inherit",t.position=e.sealed!==void 0?"relative":""},n=>{const e=n.style,t=n.node.owner.element;e.position="absolute",e.zIndex=`${Number.MAX_SAFE_INTEGER}`,t.splitView===ke.horizontal?(e.width="4px",e.marginLeft="-2px",e.top=e.bottom="0",e.cursor="col-resize"):(e.height="4px",e.marginTop="-2px",e.left=e.right="0",e.cursor="row-resize")},n=>{},n=>{}];class $i extends In{setNativeElement(e){}prepare(e){this.setNativeElement(e);const t=e.element.native;Ee.isLogging&&t!==void 0&&!e.driver.isPartition&&t.setAttribute(Te.keyAttrName,e.key);const i=super.prepare(e);return t==null&&Ee.isLogging&&!e.driver.isPartition&&e.element.native.setAttribute(Te.keyAttrName,e.key),i}finalize(e,t){var i;const s=e.element,r=s.native;return r&&((i=r.resizeObserver)===null||i===void 0||i.unobserve(r),t&&r.remove()),super.finalize(e,t),s.native=null,!1}mount(e){const i=e.element.native;if(i){const s=e.owner.children.isStrict,r=R.findMatchingHost(e,a=>a.element.native instanceof HTMLElement||a.element.native instanceof SVGElement),o=r!==e.owner?r==null?void 0:r.driver.provideHost(r).element.native:r==null?void 0:r.element.native;if(o)if(s&&!e.driver.isPartition){const a=R.findMatchingPrevSibling(e,c=>c.element.native instanceof HTMLElement||c.element.native instanceof SVGElement);if(a===void 0||a.driver.isPartition)(o!==i.parentNode||!i.previousSibling)&&o.prepend(i);else{const c=a.element.native;c instanceof Element&&c.nextSibling!==i&&o.insertBefore(i,c.nextSibling)}}else o.appendChild(i)}}update(e){const t=e.element;t instanceof U&&t.prepareForUpdate();let i=super.update(e);return i=wi(i,s=>{if(t.place===void 0){const r=e.owner.element;r instanceof U&&r.isTable&&(t.place=void 0)}Xt&&qs(t.native,R.currentUpdatePriority,e.stamp)},s=>{}),i}static findBrotherlyHost(e){return R.findMatchingHost(e,t=>t.element.native instanceof HTMLElement||t.element.native instanceof SVGElement)}static findBrotherlyPrevSibling(e){return R.findMatchingPrevSibling(e,t=>t.element.native instanceof HTMLElement||t.element.native instanceof SVGElement)}static get blinkingEffectMarker(){return Xt}static set blinkingEffectMarker(e){Xt=e}}class Gs extends $i{constructor(e,t,i,s){super(t,i,s),this.native=e}setNativeElement(e){e.element.native=this.native}}class g extends $i{setNativeElement(e){e.element.native=document.createElement(e.driver.name)}}function qs(n,e,t){if(n!==void 0){const i=t%2,s=1>>i,r=Xt;n.classList.toggle(`${r}${e}${i}`,!0),n.classList.toggle(`${r}${e}${s}`,!1)}}let Xt;var Et;(function(n){n[n.X=0]="X",n[n.Y=1]="Y"})(Et||(Et={}));class Ae{constructor(e,t){this.num=e,this.unit=t}clone(){return new Ae(this.num,this.unit)}equalsTo(e){return this.num===e.num&&this.unit===e.unit}static parse(e){e=e.trim();const t=e.search(/[^0-9.]/),i=Number.parseFloat(~t?e.substring(0,t):e),s=~t?e.substring(t,e.length).trim():void 0;return Ks(i,s)}static emit(e){var t;return`${e.num}${(t=e.unit)!==null&&t!==void 0?t:""}`}static get lineSizePx(){return Ae.gLineSizePx.value}static set lineSizePx(e){Ae.gLineSizePx.value=e}static getLineSizePx(){return Ae.gLineSizePx}}Ae.gFontSizePx=new Fn;Ae.gLineSizePx=new Fn;function Ks(n,e){return new Ae(n,e)}const Sn=Number.parseFloat(getComputedStyle(document.body).fontSize);function pn(n,...e){const t=typeof n=="number",{num:i,unit:s}=t?{num:n,unit:e[0]}:n,r=t?e[1]:e[0];let o=0;switch(s){case"px":o=i;break;case"ln":o=oi(i,r.lineSizePx);break;case"em":o=oi(i,r.fontSizePx);break;case"rem":o=Js(i);break;case"vw":o=mn(i,r.containerSizeXpx);break;case"vh":o=mn(i,r.containerSizeYpx);break;case"%":o=mn(i,r.axis===Et.X?r.containerSizeXpx:r.containerSizeYpx);break;default:o=i;break}return o}function mn(n,e){return n*e/100}function Js(n){return Math.round(n*Sn)}function oi(n,e){return Math.round(n*e)}function Qs(n,e,t,i,s,r,o,a,c){const d=new Gs(global.document.body,"Page",!1,l=>l.kind=h.panel);return R.declare(d,n,e,t,i,s,r,o,a,c)}function Zs(n,e,t,i,s,r,o,a,c){return R.declare(Je.splitter,n,e,t,i,s,r,o,a,c)}function er(n){R.declare(Je.partition)}function tr(n,e){const t=`splitter-${n}`;return Zs({key:t,mode:ge.autonomous,preparation:i=>i.native.className=`splitter ${t}`,content:i=>{const s=i.native,r=i.model,o=s.dataForSensor;o.draggable=t,o.drag=t,_i(()=>{var a,c,d,l;const u=s.sensors.pointer;if(u.dragSource===t&&u.dragStarted){if(u.draggingOver){u.dropAllowed=!0;const p=u.getData(),v=Math.floor(e.element.splitView===ke.horizontal?u.positionX-u.startX:u.positionY-u.startY),b=[];for(const y of p)b.push({node:y.node,sizePx:y.sizePx});Me(()=>rr(e,v,n,b)),u.dropped&&((a=r==null?void 0:r.droppedAction)===null||a===void 0||a.call(r,u))}else{s.setAttribute("rx-dragging","true");const p=[];for(const v of e.children.items()){const b=v.instance;if(Be(b.driver)){const y=(d=(c=b.element.layoutInfo)===null||c===void 0?void 0:c.effectiveSizePx)!==null&&d!==void 0?d:0;p.push({node:b,sizePx:y})}}u.setData(p)}u.dragFinished&&((l=r==null?void 0:r.dragFinishedAction)===null||l===void 0||l.call(r,u),s.setAttribute("rx-dragging","false"))}})}})}function _i(n){return Ri({mode:ge.autonomous,content:n})}function Ri(n,e,t,i,s,r,o,a,c){return R.declare(Je.synthetic,n,e,t,i,s,r,o,a,c)}class nr extends g{update(e){er();const t=e.element,i=super.update(e);if(t.splitView!==void 0){t.layoutInfo===void 0&&(t.layoutInfo=new he(Ge));const s=t.layoutInfo;s.isUpdateFinished=!1,_i(o=>{const c=t.native.sensors.resize;for(const d of c.resizedElements){const l=d.borderBoxSize[0],u=d.contentBoxSize[0];s.borderSizeXpx=l.inlineSize,s.borderSizeYpx=l.blockSize,s.contentSizeXpx=u.inlineSize,s.contentSizeYpx=u.blockSize}});const r=Ri({mode:ge.autonomous,content:()=>{const o=t.native,a=t.splitView===ke.horizontal;if(s.isUpdateFinished){const c=s.borderSizeXpx-s.contentSizeXpx,d=s.borderSizeYpx-s.contentSizeYpx;let l=0;const u=[],p=[];for(const b of e.children.items()){const y=b.instance.element;if(Be(b.instance.driver)&&y!==void 0){const O=a?y.width:y.height,D={axis:a?Et.X:Et.Y,lineSizePx:Sn,fontSizePx:Sn,containerSizeXpx:o.scrollWidth-c,containerSizeYpx:o.scrollHeight-d},z=O.min?pn(Ae.parse(O.min),D):0;let H=O.max?pn(Ae.parse(O.max),D):Number.POSITIVE_INFINITY;H=Math.max(z,H),y.layoutInfo===void 0&&(y.layoutInfo=new he(Ge)),a?y.widthPx={minPx:z,maxPx:H}:y.heightPx={minPx:z,maxPx:H};const B=O.preferred?pn(Ae.parse(O.preferred),D):0;B>0&&(y.layoutInfo.effectiveSizePx=B,O.preferred=void 0,u.push(l));const Pe=y.layoutInfo.effectiveSizePx=jn(y.layoutInfo.effectiveSizePx,z,H);p.push({node:b.instance,sizePx:Pe}),l++}}const v=u.length>0?cr(a,e.children,u):dr(a,e.children);Me(()=>or(e,v.resizable,v.manuallyResizable,p))}}});R.updateNestedNodesThenDo(()=>{s.isUpdateFinished=!0,R.triggerUpdate(r,{stamp:e.stamp})})}return i}child(e,t,i,s){var r;let o;const a=e.element;if(a.splitView!==void 0){if(Be(t)){let c=0;for(const l of e.children.items())Be(l.instance.driver)&&c++;const d=a.splitView===ke.horizontal;i!==void 0&&(i.triggers===void 0&&(i.triggers={}),Object.defineProperty(i.triggers,"index",{value:c}),ir(i,"content",l=>{d?l.style.gridColumn=`${c+1}`:l.style.gridRow=`${c+1}`})),c>0&&tr(c-1,e)}}else if(t.isPartition){const c=e.children.lastMergedItem();((r=c==null?void 0:c.instance)===null||r===void 0?void 0:r.driver)===t&&(o=c)}return o}}function Be(n){return!n.isPartition&&n!==Je.splitter&&n!==Je.synthetic}function ir(n,e,t){const i=n[e];n[e]=i!==void 0?(s,r)=>{i(s,r),t(s)}:(s,r)=>{r(),t(s)}}class sr extends g{update(e){const t=super.update(e);return e.owner.element.sealed!==void 0&&(e.element.style.flexGrow="1",R.declare(Je.wrapper,{content:s=>{const r=s.node.owner.owner.element;r.splitView!==void 0?(s.style.display="grid",s.style.flexDirection=""):r.isTable?(s.style.display="contents",s.style.flexDirection=""):(s.style.display="flex",s.style.flexDirection="row"),s.style.position="absolute",s.style.inset="0",s.style.overflow="auto",s.style.gap="inherit"}})),t}provideHost(e){let t;return e.owner.element.sealed!==void 0?t=e.children.firstMergedItem().instance:t=e,t}}const Je={panel:new nr(Te.element,!1,n=>n.kind=h.panel),table:new g(Te.element,!1,n=>n.kind=h.table),note:new g(Te.element,!1,n=>n.kind=h.note),group:new g(Te.group,!1,n=>n.kind=h.group),partition:new sr(Te.partition,!0,n=>n.kind=h.part),wrapper:new g(Te.wrapper,!1,n=>n.kind=h.native),splitter:new g(Te.splitter,!1,n=>n.kind=h.splitter),cursor:new Fi,synthetic:new In("synthetic",!1,n=>n.kind=h.group)},Ci=1e-4;function qt(n,e){return Math.abs(n-e)<=Ci}function mt(n,e){return n-e>Ci}function rr(n,e,t,i,s){var r,o,a,c;s===void 0&&(s=ar(t+1,i.length)),(n.element.splitView===ke.horizontal?(o=(r=n.element.layoutInfo)===null||r===void 0?void 0:r.contentSizeXpx)!==null&&o!==void 0?o:0:(c=(a=n.element.layoutInfo)===null||a===void 0?void 0:a.contentSizeYpx)!==null&&c!==void 0?c:0)>0&&(En(n,e,t+1,s,i,!0),ji(n))}function or(n,e,t,i){var s,r,o,a;const c=n.element.splitView===ke.horizontal?(r=(s=n.element.layoutInfo)===null||s===void 0?void 0:s.contentSizeXpx)!==null&&r!==void 0?r:0:(a=(o=n.element.layoutInfo)===null||o===void 0?void 0:o.contentSizeYpx)!==null&&a!==void 0?a:0;if(c>0){const d=i.reduce((u,p)=>u+p.sizePx,0);let l=c-d;l=En(n,l,i.length,e,i),l<-(1/devicePixelRatio)&&En(n,l,i.length,t,i,!0),ji(n)}}function En(n,e,t,i,s,r=!1){const o=n.element.splitView===ke.horizontal;let a=0;if(s.length>0&&e!==0){let c=0,d=0;for(let O=0;O<t;O++){const D=o?s[O].node.element.widthPx:s[O].node.element.heightPx;c+=D.minPx-s[O].sizePx,d+=D.maxPx-s[O].sizePx}const l=t<s.length;let u=l?0:Number.NEGATIVE_INFINITY,p=l?0:Number.POSITIVE_INFINITY;for(let O=t;O<s.length;O++){const D=o?s[O].node.element.widthPx:s[O].node.element.heightPx;u+=s[O].sizePx-D.maxPx,p+=s[O].sizePx-D.minPx}const v=Math.max(c,u),b=Math.min(d,p),y=jn(e,v,b);y!==0&&(t>0&&(a=ai(1,y,t,i,s,o,r)),l&&ai(-1,y,t,i,s,o,r))}for(let c=0;c<s.length;c++){const d=s[c].node.element;d.layoutInfo.effectiveSizePx=s[c].sizePx}return a}function ji(n){var e,t,i,s,r,o,a;const c=n.element.splitView===ke.horizontal;let d=0,l=!1,u=!1,p=!1;const v=[],b=n.element.layoutInfo;for(const z of n.children.items()){const H=z.instance;if(Be(H.driver)){const B=H.element;if(B.native!==void 0){const Pe=z,de=c?B.widthPx:B.heightPx,C=(t=(e=B.layoutInfo)===null||e===void 0?void 0:e.effectiveSizePx)!==null&&t!==void 0?t:0;d+=C,v.push(C),B.native.setAttribute("rx-max",qt(C,de.maxPx)?"true":"false"),B.native.setAttribute("rx-min",qt(C,de.minPx)?"true":"false"),l||(l=mt(C-de.minPx,0)),u||(u=mt(de.maxPx-C,0));let ln=!1,un=!1;for(const Ji of n.children.items(Pe)){const Wn=Ji.instance;if(Be(Wn.driver)){const Rt=Wn.element;if(Rt.native!==void 0){const Un=c?Rt.widthPx:Rt.heightPx,Gn=(s=(i=Rt.layoutInfo)===null||i===void 0?void 0:i.effectiveSizePx)!==null&&s!==void 0?s:0;if(ln||(ln=mt(Gn-Un.minPx,0)),un||(un=mt(Un.maxPx-Gn,0)),p=u&&ln||un&&l,p)break}}}}}else if(H.driver===Je.splitter){const B=H.element;B.native!==void 0&&(B.style.display=p?"block":"none",c?B.style.left=`${d}px`:B.style.top=`${d}px`)}}const y=(r=c?b==null?void 0:b.contentSizeXpx:b==null?void 0:b.contentSizeYpx)!==null&&r!==void 0?r:0,O=mt(d,y),D=(a=(o=n.children.firstMergedItem())===null||o===void 0?void 0:o.instance.children.firstMergedItem())===null||a===void 0?void 0:a.instance;D!==void 0&&(c?D.element.style.gridTemplateColumns=v.map(z=>`${z}px`).join(" "):D.element.style.gridTemplateRows=v.map(z=>`${z}px`).join(" "),O?c?D.element.style.overflow="scroll visible":D.element.style.overflow="visible scroll":D.element.style.overflow="visible")}function ar(n,e){const t=[];let i=n-1,s=n;for(;i>=0||s<e;)i>=0&&s<e?t.push(1<<i--|1<<s++):i>=0?t.push(1<<i--):t.push(1<<s++);return t}function cr(n,e,t){var i,s;const r=[],o=[],a=Array.from(e.items()).filter(l=>Be(l.instance.driver));for(let l=a.length-1;l>=0;l--){const u=a[l].instance.element,p=(i=n?u.stretchingStrengthHorizontally:u.stretchingStrengthVertically)!==null&&i!==void 0?i:1;t.includes(l)||(p>0?r.push(1<<l):o.push(1<<l))}let c=0,d=0;for(const l of t){const u=a[l].instance.element;((s=n?u.stretchingStrengthHorizontally:u.stretchingStrengthVertically)!==null&&s!==void 0?s:1)>0?c|=1<<l:d|=1<<l}return c>0&&r.push(c),d>0&&o.push(d),{resizable:r,manuallyResizable:o}}function dr(n,e){var t;let i=0,s=0,r=0;for(const o of e.items())if(Be(o.instance.driver)){const a=o.instance.element;((t=n?a.stretchingStrengthHorizontally:a.stretchingStrengthVertically)!==null&&t!==void 0?t:1)>0?i|=1<<r:s|=1<<r,r++}return{resizable:[i],manuallyResizable:[s]}}function lr(n,e,t,i,s=!1){var r;let o=0;for(const a of Ii(t,i)){const c=(r=n?e[a].element.stretchingStrengthHorizontally:e[a].element.stretchingStrengthVertically)!==null&&r!==void 0?r:1;o+=c>0?c:s?1:0}return o}function ur(n,e){return e>0?n/e:0}function*Ii(n,e){let t=0;if(e<0)for(t=-e,n>>>=t;n>0;)n&1&&(yield t),n>>>=1,t++;else for(;t<e;)n&1&&(yield t),n>>>=1,t++}function ai(n,e,t,i,s,r,o){var a,c;for(let d=0;d<i.length;d++){const l=i[d];let u=lr(r,s.map(p=>p.node),l,n*t,o);do{const p=ur(e,u);u=0;for(const v of Ii(l,n*t)){const b=s[v].node,y=s[v].sizePx,O=r?(a=b.element.stretchingStrengthHorizontally)!==null&&a!==void 0?a:1:(c=b.element.stretchingStrengthVertically)!==null&&c!==void 0?c:1,D=O>0?O:o?1:0,z=y+n*(D*p),H=r?s[v].node.element.widthPx:s[v].node.element.heightPx,B=jn(z,H.minPx,H.maxPx);e=e-n*(B-y),s[v].sizePx=B,s[v].sizePx>H.minPx&&s[v].sizePx<H.maxPx&&(u+=D)}}while(!qt(e,0)&&u>0);if(qt(e,0))break}return e}class Mn extends $e{constructor(){super(...arguments),this.revision=0,this.elementDataList=[]}get topElementData(){return this.elementDataList.length>0?this.elementDataList[0]:void 0}}const ci=Symbol("HtmlSensors"),J=Symbol("DataForSensor"),di=Symbol("ResizeObserver"),fr=[];function Re(n,e,t,i,s=!1){let r,o=0,a;for(;o<n.length;){const c=n[o],d=c[t];if(d!==void 0){if(!s){if(a===void 0)a=d.window;else if(a!==d.window)break}if(r===void 0){for(const l of i)if(d[l]!==void 0&&e.includes(c)){r=d;break}}}o++}return{data:r,window:a}}function Ze(n,e,t,i,s=!1,r=()=>!1){let o=i,a=0,c=0,d,l;for(;a<n.length;){let u;const p=n[a],v=p[e];if(v!==void 0){if(!s){if(d===void 0)d=v.window;else if(d!==v.window)break}u=v[t],u!==void 0&&(o!==i?o.push(u):u!==i[c]?(o=i.slice(0,c),o.push(u)):c++)}t==="focus"&&l===void 0&&(r(p)||v!=null&&v.catchChildrenFocus)&&(l=u),a++}return c===0&&o===i&&i.length>0&&(o=fr),{dataList:o,window:d,activeData:l}}var hr=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},vn=function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)};class zn extends Mn{constructor(){super(...arguments),this.activeData=void 0,this.previousActiveData=void 0}setActiveWindow(e,t=""){if(e!==this.activeData){const i=this.activeData;if(i&&Xe(i,"popupToggle")){const s=i.popupToggle;s instanceof xs&&(s.variable=s.valueOff)}this.previousActiveData=i,this.activeData=e}}}hr([P,vn("design:type",Function),vn("design:paramtypes",[Object,String]),vn("design:returntype",void 0)],zn.prototype,"setActiveWindow",null);var en=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},tn=function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)};class He extends Mn{constructor(e,t){super(),this.sourceElement=e,this.windowSensor=t,this.preventDefault=!1,this.stopPropagation=!1}getDefaultSensorData(){return this.sourceElement[J]}setPreventDefaultAndStopPropagation(e){this.preventDefault&&(e.preventDefault(),this.preventDefault=!1),this.stopPropagation&&(e.stopPropagation(),this.stopPropagation=!1)}}en([N,tn("design:type",Object)],He.prototype,"sourceElement",void 0);en([N,tn("design:type",zn)],He.prototype,"windowSensor",void 0);en([N,tn("design:type",Boolean)],He.prototype,"preventDefault",void 0);en([N,tn("design:type",Boolean)],He.prototype,"stopPropagation",void 0);var Nn=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},Ve=function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)},M;(function(n){n[n.none=0]="none",n[n.ctrl=1]="ctrl",n[n.shift=2]="shift",n[n.alt=4]="alt",n[n.meta=8]="meta",n[n.ctrlShift=3]="ctrlShift",n[n.ctrlAlt=5]="ctrlAlt",n[n.ctrlMeta=9]="ctrlMeta",n[n.ctrlShiftAlt=7]="ctrlShiftAlt",n[n.ctrlShiftAltMeta=15]="ctrlShiftAltMeta",n[n.ctrlShiftMeta=11]="ctrlShiftMeta",n[n.shiftAlt=6]="shiftAlt",n[n.shiftMeta=10]="shiftMeta",n[n.shiftAltMeta=14]="shiftAltMeta",n[n.altMeta=12]="altMeta"})(M||(M={}));class nn extends He{constructor(e){super(e),this.down="",this.up="",this.modifiers=M.none}listen(e=!0){const t=S.current;S.outside(()=>{t.whenFinished(!0).then(()=>{const i=this.sourceElement;e?(i.addEventListener("keydown",this.onKeyDown.bind(this),{capture:!0}),i.addEventListener("keyup",this.onKeyUp.bind(this),{capture:!0}),window.addEventListener("blur",this.doWindowBlur.bind(this),{capture:!0})):(i.removeEventListener("keydown",this.onKeyDown.bind(this),{capture:!0}),i.removeEventListener("keyup",this.onKeyUp.bind(this),{capture:!0}),window.removeEventListener("blur",this.doWindowBlur.bind(this),{capture:!0}))},i=>{})})}reset(){this.preventDefault=!1,this.stopPropagation=!1,this.down="",this.up="",this.modifiers=M.none}onKeyDown(e){this.keyDown(e),this.setPreventDefaultAndStopPropagation(e)}onKeyUp(e){this.keyUp(e),this.setPreventDefaultAndStopPropagation(e)}doWindowBlur(e){this.reset()}keyDown(e){this.updateSensorData(e),this.up="",Zn(!0,()=>this.down=e.key)}keyUp(e){this.updateSensorData(e),this.down="",Zn(!0,()=>this.up=e.key)}updateSensorData(e){this.preventDefault=!1,this.stopPropagation=!1;const t=e.composedPath();this.elementDataList=Ze(t,J,"keyboard",this.elementDataList).dataList,this.modifiers=Fe(e),this.revision++}static getKeyAsModifierIfAny(e){let t=M.none;return e==="Control"?t=M.ctrl:e==="Shift"?t=M.shift:e==="Alt"?t=M.alt:e==="Meta"&&(t=M.meta),t}}Nn([P,Ve("design:type",Function),Ve("design:paramtypes",[]),Ve("design:returntype",void 0)],nn.prototype,"reset",null);Nn([P,T({logging:$.Off}),Ve("design:type",Function),Ve("design:paramtypes",[KeyboardEvent]),Ve("design:returntype",void 0)],nn.prototype,"keyDown",null);Nn([P,T({logging:$.Off}),Ve("design:type",Function),Ve("design:paramtypes",[KeyboardEvent]),Ve("design:returntype",void 0)],nn.prototype,"keyUp",null);function Fe(n){let e=M.none;return n.ctrlKey?e|=M.ctrl:e&=~M.ctrl,n.shiftKey?e|=M.shift:e&=~M.shift,n.altKey?e|=M.alt:e&=~M.alt,n.metaKey?e|=M.meta:e&=~M.meta,e}var ye;(function(n){n[n.none=0]="none",n[n.left=1]="left",n[n.right=2]="right",n[n.middle=4]="middle"})(ye||(ye={}));class sn extends He{constructor(e,t){super(e,t),this.positionX=1/0,this.positionY=1/0,this.modifiers=M.none}}function Kt(n){switch(n.button){case 0:return ye.left;case 1:return ye.middle;case 2:return ye.right;default:return ye.none}}function Mi(n,e){return(e&n)!==0}var ce=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},_=function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)};class q extends sn{constructor(e,t){super(e,t),this.hotPositionX=1/0,this.hotPositionY=1/0,this.pointerButton=ye.none,this.tryingDragging=!1,this.clickable=void 0,this.clicking=void 0,this.clicked=void 0,this.clickX=1/0,this.clickY=1/0,this.draggableData=void 0,this.dragSource=void 0,this.dragTarget=void 0,this.dragTargetWindow=void 0,this.previousDragTarget=void 0,this.dragStarted=!1,this.dragFinished=!1,this.startX=1/0,this.startY=1/0,this.draggingData=void 0,this.dropAllowed=!1,this.draggingOver=!1,this.positionX=1/0,this.positionY=1/0,this.modifiers=M.none,this.dropX=1/0,this.dropY=1/0,this.dropped=!1,this.immediatePositionX=1/0,this.immediatePositionY=1/0,this.immediateModifiers=M.none}getData(){return this.draggingData}setData(e){this.draggingData=e}listen(e=!0){const t=S.current;S.outside(()=>{t.whenFinished(!0).then(()=>{const i=this.sourceElement;e&&(i.addEventListener("pointerdown",this.onPointerDown.bind(this),{capture:!0}),i.addEventListener("pointermove",this.onPointerMove.bind(this),{capture:!0}),i.addEventListener("pointerup",this.onPointerUp.bind(this),{capture:!0}),i.addEventListener("lostpointercapture",this.onLostPointerCapture.bind(this),{capture:!0}),i.addEventListener("keydown",this.onKeyDown.bind(this),{capture:!0}))},i=>{})})}onPointerDown(e){var t;(t=this.sourceElement)===null||t===void 0||t.setPointerCapture(e.pointerId);const i=Kt(e);!this.dragStarted&&this.clickable===void 0&&(i===ye.left||i===ye.right)&&this.tryClickingOrDragging(e)}onPointerMove(e){this.moveOver(e),Mi(this.pointerButton,e.buttons)?this.tryingDragging?(Math.abs(e.clientX-this.startX)>q.DraggingThreshold||Math.abs(e.clientY-this.startY)>q.DraggingThreshold)&&this.startDragging(e):this.dragStarted?this.dragOver(e):this.clickable&&this.clickingOver(e):this.dragStarted?(this.cancelDragging(),this.reset()):this.clickable&&this.reset()}onPointerUp(e){var t;(t=this.sourceElement)===null||t===void 0||t.releasePointerCapture(e.pointerId),this.draggingOver?(this.drop(e),this.finishDragging()):this.dragStarted?this.finishDragging():this.clickable&&this.click(e),this.reset()}onLostPointerCapture(e){(this.dragStarted||this.clickable)&&(this.cancelDragging(),this.reset())}onKeyDown(e){e.key==="Escape"&&(this.dragStarted||this.clickable)&&(this.cancelDragging(),this.reset())}moveOver(e){this.immediatePositionX=e.clientX,this.immediatePositionY=e.clientY}tryClickingOrDragging(e){var t,i;this.preventDefault=!1,this.stopPropagation=!1;const s=e.composedPath(),r=document.elementsFromPoint(e.clientX,e.clientY),{data:o,window:a}=Re(s,r,J,["click","draggable"]),c=(t=o==null?void 0:o.click)!==null&&t!==void 0?t:this._getDefaultDataForSensor(e),d=o==null?void 0:o.draggable;(c||d)&&(this.clickable=c,this.clicking=c,this.draggableData=d,this.tryingDragging=d!==void 0,this.dragSource=(i=Re(s,r,J,["drag"],!0).data)===null||i===void 0?void 0:i.drag,this.pointerButton=Kt(e),this.startX=e.clientX,this.startY=e.clientY,this.modifiers=Fe(e),this.positionX=e.clientX,this.positionY=e.clientY,this.dropped=!1,this.dragTarget=void 0,this.dragTargetWindow=void 0,this.previousDragTarget=void 0,S.isolate(()=>{var l;(l=this.windowSensor)===null||l===void 0||l.setActiveWindow(a,"pointer")})),this.revision++}clickingOver(e){this.updateClicking(e),this.revision++}click(e){this.updateClicking(e)&&(this.modifiers=this.immediateModifiers,this.clickX=e.clientX,this.clickY=e.clientY,this.clicked=this.clicking),this.clickable=void 0,this.revision++}startDragging(e){this.updateDragTarget(e),this.clickable=void 0,this.dragStarted=!0,this.dragFinished=!1,this.tryingDragging=!1,this.dropped=!1,this.revision++}dragOver(e){this.updateDragTarget(e),this.draggingOver=!0,this.dropped=!1,this.revision++}drop(e){this.updateDragTarget(e),this.modifiers=this.immediateModifiers,this.dropX=e.clientX,this.dropY=e.clientY,this.dropped=!0,this.revision++}finishDragging(){this.dragFinished=!0,this.tryingDragging=!1,this.revision++}cancelDragging(){this.dragFinished=!0,this.tryingDragging=!1,this.dropped=!1,this.revision++}reset(){this.pointerButton=ye.none,this.clickable=void 0,this.clicking=void 0,this.clicked=void 0,this.clickX=1/0,this.clickY=1/0,this.tryingDragging=!1,this.draggableData=void 0,this.dragSource=void 0,this.dragTarget=void 0,this.dragTargetWindow=void 0,this.previousDragTarget=void 0,this.dragStarted=!1,this.dragFinished=!1,this.startX=1/0,this.startY=1/0,this.draggingData=void 0,this.dropAllowed=!1,this.draggingOver=!1,this.positionX=1/0,this.positionY=1/0,this.modifiers=M.none,this.dropX=1/0,this.dropY=1/0,this.dropped=!1,this.immediatePositionX=1/0,this.immediatePositionY=1/0,this.immediateModifiers=M.none,this.revision++}updateClicking(e){var t;const i=e.composedPath(),s=document.elementsFromPoint(e.clientX,e.clientY);let r=(t=Re(i,s,J,["click"]).data)===null||t===void 0?void 0:t.click;r=r??this._getDefaultDataForSensor(e);const o=this.clickable===r;return o&&(this.clicking=r),this.immediateModifiers=Fe(e),this.immediatePositionX=e.clientX,this.immediatePositionY=e.clientY,o}_getDefaultDataForSensor(e){return e.currentTarget===this.sourceElement?e.currentTarget:void 0}updateDragTarget(e){const t=e.composedPath(),i=document.elementsFromPoint(e.clientX,e.clientY),{data:s,window:r}=Re(t,i,J,["drag"]),o=s==null?void 0:s.drag;o!==this.dragTarget&&(this.previousDragTarget=this.dragTarget,this.dragTarget=o,this.dragTargetWindow=r),this.immediateModifiers=Fe(e),this.immediatePositionX=e.clientX,this.immediatePositionY=e.clientY}whenClickingOrDragging(){(this.draggingOver||this.clickable)&&(this.positionX=this.immediatePositionX,this.positionY=this.immediatePositionY,this.modifiers=this.immediateModifiers)}whenMoving(){Number.isFinite(this.immediatePositionX)&&Number.isFinite(this.immediatePositionY)&&(this.hotPositionX=this.immediatePositionX,this.hotPositionY=this.immediatePositionY)}}q.DraggingThreshold=4;ce([N,_("design:type",Object)],q.prototype,"clickable",void 0);ce([N,_("design:type",Boolean)],q.prototype,"tryingDragging",void 0);ce([N,_("design:type",Object)],q.prototype,"draggingData",void 0);ce([N,_("design:type",Boolean)],q.prototype,"dropAllowed",void 0);ce([P,T({logging:$.Off}),_("design:type",Function),_("design:paramtypes",[PointerEvent]),_("design:returntype",void 0)],q.prototype,"moveOver",null);ce([P,T({logging:$.Off}),_("design:type",Function),_("design:paramtypes",[PointerEvent]),_("design:returntype",void 0)],q.prototype,"tryClickingOrDragging",null);ce([P,T({reentrance:ve.cancelPrevious,logging:$.Off}),_("design:type",Function),_("design:paramtypes",[PointerEvent]),_("design:returntype",void 0)],q.prototype,"clickingOver",null);ce([P,T({logging:$.Off}),_("design:type",Function),_("design:paramtypes",[PointerEvent]),_("design:returntype",void 0)],q.prototype,"click",null);ce([P,T({logging:$.Off}),_("design:type",Function),_("design:paramtypes",[PointerEvent]),_("design:returntype",void 0)],q.prototype,"startDragging",null);ce([P,T({logging:$.Off}),_("design:type",Function),_("design:paramtypes",[PointerEvent]),_("design:returntype",void 0)],q.prototype,"dragOver",null);ce([P,T({logging:$.Off}),_("design:type",Function),_("design:paramtypes",[PointerEvent]),_("design:returntype",void 0)],q.prototype,"drop",null);ce([P,T({logging:$.Off}),_("design:type",Function),_("design:paramtypes",[]),_("design:returntype",void 0)],q.prototype,"finishDragging",null);ce([P,T({logging:$.Off}),_("design:type",Function),_("design:paramtypes",[]),_("design:returntype",void 0)],q.prototype,"cancelDragging",null);ce([P,T({logging:$.Off}),_("design:type",Function),_("design:paramtypes",[]),_("design:returntype",void 0)],q.prototype,"reset",null);ce([ze,T({throttling:0}),_("design:type",Function),_("design:paramtypes",[]),_("design:returntype",void 0)],q.prototype,"whenClickingOrDragging",null);ce([ze,T({throttling:0}),_("design:type",Function),_("design:paramtypes",[]),_("design:returntype",void 0)],q.prototype,"whenMoving",null);var Dt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},le=function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)};class lt extends He{constructor(e,t){super(e,t),this.activeData=void 0,this.oldActiveData=void 0,this.contextElementDataList=[]}setActiveData(e,t=""){var i,s;if(e!==this.activeData){const r=this.activeData;r!==void 0&&Xe(r,"isEditMode")&&(r.isEditMode=!1,(i=r.onFocusOut)===null||i===void 0||i.call(r,this)),e!==void 0&&Xe(e,"isEditMode")&&(e.isEditMode=!0,(s=e.onFocusIn)===null||s===void 0||s.call(e,this)),this.oldActiveData=r,this.activeData=e}}listen(e=!0){const t=S.current;S.outside(()=>{t.whenFinished(!0).then(()=>{const i=this.sourceElement;e?(i.addEventListener("focusin",this.onFocusIn.bind(this),{capture:!0}),i.addEventListener("focusout",this.onFocusOut.bind(this),{capture:!0}),i.addEventListener("mousedown",this.onMouseDown.bind(this),{capture:!0})):(i.removeEventListener("focusin",this.onFocusIn.bind(this),{capture:!0}),i.removeEventListener("focusout",this.onFocusOut.bind(this),{capture:!0}),i.removeEventListener("mousedown",this.onMouseDown.bind(this),{capture:!0}))},i=>{})})}reset(){this.preventDefault=!1,this.stopPropagation=!1,this.revision++}onFocusIn(e){this.doFocusIn(e),this.setPreventDefaultAndStopPropagation(e)}onFocusOut(e){this.doFocusOut(e),this.setPreventDefaultAndStopPropagation(e)}onMouseDown(e){this.doMouseDown(e)}doFocusIn(e){var t;const i=e.composedPath(),{dataList:s,activeData:r,window:o}=Ze(i,J,"focus",this.elementDataList,!1,c=>document.activeElement===c);this.elementDataList=s,this.setActiveData(r),(t=this.windowSensor)===null||t===void 0||t.setActiveWindow(o);const{dataList:a}=Ze(i,J,"context",this.contextElementDataList,!0);this.contextElementDataList=bn(this,this.contextElementDataList,a),this.reset()}doFocusOut(e){var t;if(e.relatedTarget===null){const s=e.composedPath(),{dataList:r}=Ze(s,J,"focus",this.elementDataList,!0);this.elementDataList=r;const o=r.filter(a=>a!==this.activeData);if(o.length>0)this.trySetEditMode(o[0],"  └─");else{const a=this.getDefaultSensorData();(a==null?void 0:a.focus)!==void 0?this.trySetEditMode(a.focus,"    └─"):this.setActiveData(void 0),(t=this.windowSensor)===null||t===void 0||t.setActiveWindow(a==null?void 0:a.window)}this.contextElementDataList=bn(this,this.contextElementDataList,[]),this.reset()}}doMouseDown(e){const t=e.composedPath(),i=t.find(s=>s!==document.body&&s.tabIndex>=0)!==void 0;if(t.length>0&&!i){const{dataList:s}=Ze(t,J,"focus",this.elementDataList,!0);this.elementDataList=s,s.length>0&&(this.trySetEditMode(s[0],"└─"),e.preventDefault());const{dataList:r}=Ze(t,J,"context",this.contextElementDataList,!0);this.contextElementDataList=bn(this,this.contextElementDataList,r),this.reset()}}trySetEditMode(e,t=""){e!==void 0&&Xe(e,"isEditMode")&&(e.isEditMode=!0)}}Dt([P,le("design:type",Function),le("design:paramtypes",[Object,String]),le("design:returntype",void 0)],lt.prototype,"setActiveData",null);Dt([P,le("design:type",Function),le("design:paramtypes",[Boolean]),le("design:returntype",void 0)],lt.prototype,"listen",null);Dt([P,T({logging:$.Off}),le("design:type",Function),le("design:paramtypes",[FocusEvent]),le("design:returntype",void 0)],lt.prototype,"doFocusIn",null);Dt([P,le("design:type",Function),le("design:paramtypes",[FocusEvent]),le("design:returntype",void 0)],lt.prototype,"doFocusOut",null);Dt([P,T({logging:$.Off}),le("design:type",Function),le("design:paramtypes",[MouseEvent]),le("design:returntype",void 0)],lt.prototype,"doMouseDown",null);function bn(n,e,t){return t!==e&&(e.forEach(i=>{var s;Xe(i,"contextToggle")&&i.contextToggle&&i.contextToggle.valueOn!==i.contextToggle.valueOff&&(i.contextToggle.variable=i.contextToggle.valueOff),Xe(i,"onContextOut")&&((s=i.onContextOut)===null||s===void 0||s.call(i,n))}),t.forEach(i=>{var s;Xe(i,"contextToggle")&&i.contextToggle&&(i.contextToggle.variable=i.contextToggle.valueOn),Xe(i,"onContextIn")&&((s=i.onContextIn)===null||s===void 0||s.call(i,n))})),t}var ut=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ie=function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)},se;(function(n){n[n.pressed=0]="pressed",n[n.selecting=1]="selecting",n[n.selected=2]="selected",n[n.released=3]="released"})(se||(se={}));class Qe extends sn{constructor(e,t){super(e,t),this.state=se.released,this.pointerButton=ye.none,this.originData=void 0,this.selectedData=void 0,this.selectedX=1/0,this.selectedY=1/0,this.selected=!1}listen(e=!0){const t=S.current;S.outside(()=>{t.whenFinished(!0).then(()=>{const i=this.sourceElement;e?(i.addEventListener("pointerdown",this.onPointerDown.bind(this),{capture:!0}),i.addEventListener("pointermove",this.onPointerMove.bind(this),{capture:!0}),i.addEventListener("pointerup",this.onPointerUp.bind(this),{capture:!0}),i.addEventListener("lostpointercapture",this.onLostPointerCapture.bind(this),{capture:!0}),i.addEventListener("keydown",this.onKeyDown.bind(this),{capture:!0})):(i.removeEventListener("pointerdown",this.onPointerDown.bind(this),{capture:!0}),i.removeEventListener("pointermove",this.onPointerMove.bind(this),{capture:!0}),i.removeEventListener("pointerup",this.onPointerUp.bind(this),{capture:!0}),i.removeEventListener("lostpointercapture",this.onLostPointerCapture.bind(this),{capture:!0}),i.removeEventListener("keydown",this.onKeyDown.bind(this),{capture:!0}))},i=>{})})}onPointerDown(e){this.state===se.released&&this.pointerButton===ye.none&&this.press(e),this.setPreventDefaultAndStopPropagation(e)}onPointerMove(e){const t=this.state;Mi(this.pointerButton,e.buttons)?(t===se.pressed||t===se.selecting)&&this.selecting(e):t!==se.released&&(this.cancel(),this.reset()),this.setPreventDefaultAndStopPropagation(e)}onPointerUp(e){Kt(e)===this.pointerButton?this.state===se.selecting?(this.select(e),this.release()):this.state===se.pressed&&this.release():this.cancel(),this.reset(),this.setPreventDefaultAndStopPropagation(e)}onLostPointerCapture(e){this.state!==se.released&&(this.cancel(),this.reset())}onKeyDown(e){e.key==="Escape"&&this.state!==se.released&&(this.cancel(),this.reset())}press(e){this.preventDefault=!1,this.stopPropagation=!1;const t=e.composedPath(),i=document.elementsFromPoint(e.clientX,e.clientY),{data:s,window:r}=Re(t,i,J,["button"]),o=s==null?void 0:s.button;o&&(this.state=se.pressed,this.pointerButton=Kt(e),this.originData=o,this.modifiers=Fe(e),this.positionX=e.clientX,this.positionY=e.clientY,this.revision++),S.isolate(()=>{var a;(a=this.windowSensor)===null||a===void 0||a.setActiveWindow(r,"button")})}selecting(e){this.updateSensorData(e),this.state=se.selecting,this.selected=!1}select(e){this.updateSensorData(e),this.state=se.selected,this.selectedX=e.clientX,this.selectedY=e.clientY,this.selected=!0}release(){this.preventDefault=!1,this.stopPropagation=!1,this.state=se.released,this.revision++}cancel(){this.state=se.released,this.selected=!1,this.revision++}reset(){this.preventDefault=!1,this.stopPropagation=!1,this.state=se.released,this.originData=void 0,this.selectedData=void 0,this.pointerButton=ye.none,this.positionX=1/0,this.positionY=1/0,this.selectedX=1/0,this.selectedY=1/0,this.modifiers=M.none,this.selected=!1}updateSensorData(e){this.preventDefault=!1,this.stopPropagation=!1,this.modifiers=Fe(e),this.positionX=e.clientX,this.positionY=e.clientY,this.revision++}}ut([P,T({logging:$.Off}),ie("design:type",Function),ie("design:paramtypes",[PointerEvent]),ie("design:returntype",void 0)],Qe.prototype,"press",null);ut([P,T({reentrance:ve.cancelPrevious,logging:$.Off}),ie("design:type",Function),ie("design:paramtypes",[PointerEvent]),ie("design:returntype",void 0)],Qe.prototype,"selecting",null);ut([P,T({logging:$.Off}),ie("design:type",Function),ie("design:paramtypes",[PointerEvent]),ie("design:returntype",void 0)],Qe.prototype,"select",null);ut([P,T({logging:$.Off}),ie("design:type",Function),ie("design:paramtypes",[]),ie("design:returntype",void 0)],Qe.prototype,"release",null);ut([P,T({logging:$.Off}),ie("design:type",Function),ie("design:paramtypes",[]),ie("design:returntype",void 0)],Qe.prototype,"cancel",null);ut([P,T({logging:$.Off}),ie("design:type",Function),ie("design:paramtypes",[]),ie("design:returntype",void 0)],Qe.prototype,"reset",null);var Tt=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},ue=function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)};class ft extends sn{constructor(e){super(e),this.target=void 0,this.isHovered=!1,this.target=void 0}listen(e=!0){const t=S.current;S.outside(()=>{t.whenFinished(!0).then(()=>{const i=this.sourceElement;e?(i.addEventListener("pointerenter",this.onPointerEnter.bind(this)),i.addEventListener("pointerover",this.onPointerOver.bind(this),{capture:!0}),i.addEventListener("pointermove",this.onPointerMove.bind(this),{capture:!0}),i.addEventListener("pointerleave",this.onPointerLeave.bind(this))):(i.removeEventListener("pointerenter",this.onPointerEnter.bind(this)),i.removeEventListener("pointerover",this.onPointerOver.bind(this),{capture:!0}),i.removeEventListener("pointermove",this.onPointerMove.bind(this),{capture:!0}),i.removeEventListener("pointerleave",this.onPointerLeave.bind(this)))},i=>{})})}onPointerEnter(e){this.doPointerEnter(e)}onPointerOver(e){this.doPointerOver(e)}onPointerMove(e){this.doPointerMove(e)}onPointerLeave(e){this.doPointerLeave(e)}doPointerEnter(e){this.preventDefault=!1,this.stopPropagation=!1,this.isHovered=!0,this.revision++}doPointerOver(e){var t;this.preventDefault=!1,this.stopPropagation=!1;const i=e.composedPath(),s=document.elementsFromPoint(e.clientX,e.clientY);this.target=(t=Re(i,s,J,["hover"]).data)===null||t===void 0?void 0:t.hover,this.modifiers=Fe(e),this.positionX=e.clientX,this.positionY=e.clientY,this.revision++}doPointerMove(e){this.preventDefault=!1,this.stopPropagation=!1,this.modifiers=Fe(e),this.positionX=e.clientX,this.positionY=e.clientY,this.revision++}doPointerLeave(e){this.reset()}reset(){this.preventDefault=!1,this.stopPropagation=!1,this.isHovered=!1,this.target=void 0,this.positionX=1/0,this.positionY=1/0,this.modifiers=M.none}}Tt([P,T({logging:$.Off}),ue("design:type",Function),ue("design:paramtypes",[PointerEvent]),ue("design:returntype",void 0)],ft.prototype,"doPointerEnter",null);Tt([P,T({logging:$.Off}),ue("design:type",Function),ue("design:paramtypes",[PointerEvent]),ue("design:returntype",void 0)],ft.prototype,"doPointerOver",null);Tt([P,T({logging:$.Off}),ue("design:type",Function),ue("design:paramtypes",[PointerEvent]),ue("design:returntype",void 0)],ft.prototype,"doPointerMove",null);Tt([P,T({logging:$.Off}),ue("design:type",Function),ue("design:paramtypes",[PointerEvent]),ue("design:returntype",void 0)],ft.prototype,"doPointerLeave",null);Tt([P,T({logging:$.Off}),ue("design:type",Function),ue("design:paramtypes",[]),ue("design:returntype",void 0)],ft.prototype,"reset",null);var zi=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},nt=function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)};class Ln extends sn{constructor(e){super(e),this.target=void 0,this.target=void 0,this.deltaX=1/0,this.deltaY=1/0}listen(e=!0){const t=S.current;S.outside(()=>{t.whenFinished(!0).then(()=>{const i=this.sourceElement;e?i.addEventListener("wheel",this.onWheel.bind(this),{capture:!0,passive:!0}):i.removeEventListener("wheel",this.onWheel.bind(this),{capture:!0})},i=>{})})}reset(){this.doReset()}onWheel(e){this.doWheel(e)}doWheel(e){this.updateSensorData(e)}doReset(){this.preventDefault=!1,this.stopPropagation=!1,this.modifiers=M.none,this.positionX=1/0,this.positionY=1/0,this.target=void 0,this.deltaX=1/0,this.deltaY=1/0}updateSensorData(e){var t;this.preventDefault=!1,this.stopPropagation=!1;const i=e.composedPath(),s=document.elementsFromPoint(e.clientX,e.clientY);this.target=(t=Re(i,s,J,["wheel"]).data)===null||t===void 0?void 0:t.wheel,this.modifiers=Fe(e),this.positionX=e.clientX,this.positionY=e.clientY,this.deltaX=e.deltaX,this.deltaY=e.deltaY,this.revision++}}zi([P,nt("design:type",Function),nt("design:paramtypes",[]),nt("design:returntype",void 0)],Ln.prototype,"reset",null);zi([P,T({reentrance:ve.cancelPrevious,logging:$.Off}),nt("design:type",Function),nt("design:paramtypes",[WheelEvent]),nt("design:returntype",void 0)],Ln.prototype,"doWheel",null);var Ni=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},it=function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)};class Vn extends Mn{constructor(){super(),this.resizedElements=[],this.observer=new ResizeObserver(this.onResize.bind(this))}reset(){this.doReset()}observeResizing(e,t,i="content-box"){const s=e.native;if(s instanceof Element)t?(s.resizeObserver!==void 0&&s.resizeObserver!==this.observer&&s.resizeObserver.unobserve(s),s.resizeObserver=this.observer,this.observer.observe(s,{box:i})):s.resizeObserver===this.observer&&(this.observer.unobserve(s),s.resizeObserver=void 0);else throw new Error("cannot observe resizing of non-HTML element")}onResize(e){this.resize(e),this.reset()}resize(e){this.revision++,this.resizedElements=e.map(t=>{const i=t.target;return{borderBoxSize:t.borderBoxSize,contentBoxSize:t.contentBoxSize,contentRect:t.contentRect,resizeData:i.dataForSensor.resize}})}doReset(){this.resizedElements=[]}}Ni([P,it("design:type",Function),it("design:paramtypes",[]),it("design:returntype",void 0)],Vn.prototype,"reset",null);Ni([P,T({logging:$.Off}),it("design:type",Function),it("design:paramtypes",[Array]),it("design:returntype",void 0)],Vn.prototype,"resize",null);var ee=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},F=function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)};class Q extends He{constructor(e,t){super(e,t),this.draggable=void 0,this.dragSource=void 0,this.dragTarget=void 0,this.dragTargetWindow=void 0,this.previousDragTarget=void 0,this.dragStarted=!1,this.dragFinished=!1,this.startX=1/0,this.startY=1/0,this.dataByFormat=new Map,this.draggingImage=void 0,this.draggingImageX=1/0,this.draggingImageY=1/0,this.dropEffect="none",this.dataTypesAllowed=[],this.effectAllowed="uninitialized",this.dropAllowed=!1,this.draggingOver=!1,this.draggingDataTypes=[],this.positionX=1/0,this.positionY=1/0,this.modifiers=M.none,this.dropX=1/0,this.dropY=1/0,this.dropped=!1,this.immediatePositionX=1/0,this.immediatePositionY=1/0,this.immediateModifiers=M.none}getData(e){return this.dataByFormat.get(e)}setData(e,t){this.dataByFormat.set(e,t)}clearData(e){e?this.dataByFormat.delete(e):this.dataByFormat.clear()}setDragImage(e,t,i){this.draggingImage=e,this.draggingImageX=t,this.draggingImageY=i}listen(e=!0){const t=S.current;S.outside(()=>{t.whenFinished(!0).then(()=>{const i=this.sourceElement;e?(i.addEventListener("dragstart",this.onDragStart.bind(this),{capture:!0}),i.addEventListener("drag",this.onDrag.bind(this),{capture:!0}),i.addEventListener("dragenter",this.onDragEnter.bind(this),{capture:!1}),i.addEventListener("dragleave",this.onDragLeave.bind(this),{capture:!1}),i.addEventListener("dragover",this.onDragOver.bind(this),{capture:!0}),i.addEventListener("drop",this.onDrop.bind(this),{capture:!0}),i.addEventListener("dragend",this.onDragEnd.bind(this),{capture:!0})):(i.removeEventListener("dragstart",this.onDragStart.bind(this),{capture:!0}),i.removeEventListener("drag",this.onDrag.bind(this),{capture:!0}),i.removeEventListener("dragenter",this.onDragEnter.bind(this),{capture:!1}),i.removeEventListener("dragleave",this.onDragLeave.bind(this),{capture:!1}),i.removeEventListener("dragover",this.onDragOver.bind(this),{capture:!0}),i.removeEventListener("drop",this.onDrop.bind(this),{capture:!0}),i.removeEventListener("dragend",this.onDragEnd.bind(this),{capture:!0}))},i=>{})})}onDragStart(e){this.startDragging(e),this.updateEventOnDragStart(e)}onDrag(e){this.dragging(e)}onDragEnter(e){this.enterTarget(e),this.updateEventOnDropAllowed(e)}onDragLeave(e){this.leaveTarget(e)}onDragOver(e){this.dragOver(e),this.updateEventOnDropAllowed(e)}onDrop(e){this.drop(e)}onDragEnd(e){this.finishDragging(e),this.reset()}startDragging(e){var t;this.preventDefault=!1,this.stopPropagation=!1;const i=e.composedPath(),s=document.elementsFromPoint(e.clientX,e.clientY),{data:r,window:o}=Re(i,s,J,["htmlDraggable"]);this.draggable=r==null?void 0:r.htmlDraggable,this.dragSource=(t=Re(i,s,J,["htmlDrag"],!0).data)===null||t===void 0?void 0:t.htmlDrag,this.dragStarted=!0,this.dragFinished=!1,this.startX=e.clientX,this.startY=e.clientY,this.modifiers=Fe(e),this.positionX=e.clientX,this.positionY=e.clientY,this.dropped=!1,this.dragTarget=void 0,this.dragTargetWindow=void 0,this.previousDragTarget=void 0,this.revision++,S.isolate(()=>{var a;(a=this.windowSensor)===null||a===void 0||a.setActiveWindow(o,"htmlDrag")})}dragging(e){this.dragStarted=!0,this.dragFinished=!1,this.revision++}finishDragging(e){this.dragFinished=!0,this.revision++}enterTarget(e){this.updateDragTarget(e),this.dropped=!1,this.revision++}leaveTarget(e){}dragOver(e){this.updateDragTarget(e),this.dropped=!1,this.revision++}drop(e){this.updateDragTarget(e),this.modifiers=this.immediateModifiers,this.dropX=e.clientX,this.dropY=e.clientY,this.dropped=!0;const t=e.dataTransfer;if(t){let i=this.dataByFormat;t.types.forEach(s=>{if(!i.has(s)){const r=t.getData(s);r!==""&&(this.dataByFormat=i=i.toMutable(),i.set(s,r))}})}this.revision++}updateEventOnDragStart(e){const t=e.dataTransfer;t&&(t.dropEffect=this.dropEffect,t.effectAllowed=this.effectAllowed,this.dataByFormat.forEach((i,s)=>{typeof i=="string"&&t.setData(s,i)}),this.draggingImage&&t.setDragImage(this.draggingImage,this.draggingImageX,this.draggingImageY))}updateEventOnDropAllowed(e){this.dropAllowed&&e.preventDefault()}reset(){this.draggable=void 0,this.dragSource=void 0,this.dragTarget=void 0,this.dragTargetWindow=void 0,this.previousDragTarget=void 0,this.dragStarted=!1,this.dragFinished=!1,this.startX=1/0,this.startY=1/0,this.dataByFormat.clear(),this.draggingImage=void 0,this.draggingImageX=1/0,this.draggingImageY=1/0,this.dropEffect="none",this.dataTypesAllowed=[],this.effectAllowed="uninitialized",this.dropAllowed=!1,this.draggingOver=!1,this.draggingDataTypes=[],this.positionX=1/0,this.positionY=1/0,this.modifiers=M.none,this.dropX=1/0,this.dropY=1/0,this.dropped=!1,this.immediatePositionX=1/0,this.immediatePositionY=1/0,this.immediateModifiers=M.none,this.revision++}updateDragTarget(e){var t;const i=e.composedPath(),s=document.elementsFromPoint(e.clientX,e.clientY),{data:r,window:o}=Re(i,s,J,["htmlDrag"]),a=r==null?void 0:r.htmlDrag;a!==this.dragTarget&&(this.previousDragTarget=this.dragTarget,this.dragTarget=a,this.dragTargetWindow=o);const c=(t=e.dataTransfer)===null||t===void 0?void 0:t.types;if(c&&!gr(c,this.draggingDataTypes)){const d=new Array;for(let l=0;l<c.length;l++)d.push(c[l]);this.draggingDataTypes=d}this.immediateModifiers=Fe(e),this.immediatePositionX=e.clientX,this.immediatePositionY=e.clientY,this.draggingOver=!0}whenDragging(){this.draggingOver&&(this.positionX=this.immediatePositionX,this.positionY=this.immediatePositionY,this.modifiers=this.immediateModifiers)}}ee([N,F("design:type",Map)],Q.prototype,"dataByFormat",void 0);ee([N,F("design:type",Object)],Q.prototype,"draggingImage",void 0);ee([N,F("design:type",Number)],Q.prototype,"draggingImageX",void 0);ee([N,F("design:type",Number)],Q.prototype,"draggingImageY",void 0);ee([N,F("design:type",String)],Q.prototype,"dropEffect",void 0);ee([N,F("design:type",Array)],Q.prototype,"dataTypesAllowed",void 0);ee([N,F("design:type",String)],Q.prototype,"effectAllowed",void 0);ee([N,F("design:type",Boolean)],Q.prototype,"dropAllowed",void 0);ee([P,T({logging:$.Off}),F("design:type",Function),F("design:paramtypes",[DragEvent]),F("design:returntype",void 0)],Q.prototype,"startDragging",null);ee([P,T({logging:$.Off}),F("design:type",Function),F("design:paramtypes",[DragEvent]),F("design:returntype",void 0)],Q.prototype,"dragging",null);ee([P,T({logging:$.Off}),F("design:type",Function),F("design:paramtypes",[DragEvent]),F("design:returntype",void 0)],Q.prototype,"finishDragging",null);ee([P,T({logging:$.Off}),F("design:type",Function),F("design:paramtypes",[DragEvent]),F("design:returntype",void 0)],Q.prototype,"enterTarget",null);ee([P,T({logging:$.Off}),F("design:type",Function),F("design:paramtypes",[DragEvent]),F("design:returntype",void 0)],Q.prototype,"leaveTarget",null);ee([P,T({logging:$.Off}),F("design:type",Function),F("design:paramtypes",[DragEvent]),F("design:returntype",void 0)],Q.prototype,"dragOver",null);ee([P,T({logging:$.Off}),F("design:type",Function),F("design:paramtypes",[DragEvent]),F("design:returntype",void 0)],Q.prototype,"drop",null);ee([P,T({logging:$.Off}),F("design:type",Function),F("design:paramtypes",[DragEvent]),F("design:returntype",void 0)],Q.prototype,"updateEventOnDragStart",null);ee([P,T({logging:$.Off}),F("design:type",Function),F("design:paramtypes",[DragEvent]),F("design:returntype",void 0)],Q.prototype,"updateEventOnDropAllowed",null);ee([P,T({logging:$.Off}),F("design:type",Function),F("design:paramtypes",[]),F("design:returntype",void 0)],Q.prototype,"reset",null);ee([ze,T({throttling:0}),F("design:type",Function),F("design:paramtypes",[]),F("design:returntype",void 0)],Q.prototype,"whenDragging",null);function gr(n,e){let t=!0;for(let i=0;i<n.length;i++)if(n[i]!==e[i]){t=!1;break}return t}var Li=function(n,e,t,i){var s=arguments.length,r=s<3?e:i===null?i=Object.getOwnPropertyDescriptor(e,t):i,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")r=Reflect.decorate(n,e,t,i);else for(var a=n.length-1;a>=0;a--)(o=n[a])&&(r=(s<3?o(r):s>3?o(e,t,r):o(e,t))||r);return s>3&&r&&Object.defineProperty(e,t,r),r},st=function(n,e){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,e)};class Hn extends He{constructor(e){super(e),this.x=1/0,this.y=1/0}listen(e=!0){const t=S.current;S.outside(()=>{t.whenFinished(!0).then(()=>{const i=this.sourceElement;e?i.addEventListener("scroll",this.onScroll.bind(this),{capture:!0,passive:!0}):i.removeEventListener("scroll",this.onScroll.bind(this),{capture:!0})},i=>{})})}reset(){this.doReset()}onScroll(e){this.doScroll(e)}doScroll(e){this.updateSensorData(e)}doReset(){this.preventDefault=!1,this.stopPropagation=!1,this.x=1/0,this.y=1/0}updateSensorData(e){this.preventDefault=!1,this.stopPropagation=!1,this.x=this.sourceElement.scrollLeft,this.y=this.sourceElement.scrollTop,this.revision++}}Li([P,st("design:type",Function),st("design:paramtypes",[]),st("design:returntype",void 0)],Hn.prototype,"reset",null);Li([P,T({reentrance:ve.cancelPrevious,logging:$.Off}),st("design:type",Function),st("design:paramtypes",[Event]),st("design:returntype",void 0)],Hn.prototype,"doScroll",null);class Vi{get window(){return this._window===void 0&&(this._window=new zn),this._window}get focus(){return this._focus===void 0&&(this._focus=new lt(this._element,this.window),this._focus.listen()),this._focus}get hover(){return this._hover===void 0&&(this._hover=new ft(this._element),this._hover.listen()),this._hover}get keyboard(){return this._keyboard===void 0&&(this._keyboard=new nn(this._element),this._keyboard.listen()),this._keyboard}get wheel(){return this._wheel===void 0&&(this._wheel=new Ln(this._element),this._wheel.listen()),this._wheel}get scroll(){return this._scroll===void 0&&(this._scroll=new Hn(this._element),this._scroll.listen()),this._scroll}get resize(){return this._resize===void 0&&(this._resize=new Vn),this._resize}get htmlDrag(){return this._htmlDrag===void 0&&(this._htmlDrag=new Q(this._element,this.window),this._htmlDrag.listen()),this._htmlDrag}get button(){return this._button===void 0&&(this._button=new Qe(this._element,this.window),this._button.listen()),this._button}get pointer(){return this._pointer===void 0&&(this._pointer=new q(this._element,this.window),this._pointer.listen()),this._pointer}constructor(e){this._element=e,this._window=void 0,this._focus=void 0,this._hover=void 0,this._keyboard=void 0,this._wheel=void 0,this._scroll=void 0,this._resize=void 0,this._htmlDrag=void 0,this._button=void 0,this._pointer=void 0}}var pr=Object.defineProperty,rn=(n,e,t,i)=>{for(var s=void 0,r=n.length-1,o;r>=0;r--)(o=n[r])&&(s=o(e,t,s)||s);return s&&pr(e,t,s),s};class At extends $e{constructor(e,t,i){super(),this.link=e,this.hashLink="#"+e,this.linkTitle=t,this.title=i,this.content="",this.isActive=!1}}rn([N],At.prototype,"link");rn([N],At.prototype,"hashLink");rn([N],At.prototype,"linkTitle");rn([N],At.prototype,"title");var mr=Object.defineProperty,vr=Object.getOwnPropertyDescriptor,br=(n,e,t,i)=>{for(var s=vr(e,t),r=n.length-1,o;r>=0;r--)(o=n[r])&&(s=o(e,t,s)||s);return s&&mr(e,t,s),s};class wt extends $e{constructor(e){super(),this.text=e,this.notCompleted=!0,this.isEdit=!1}changeActivity(){this.isEdit||(this.notCompleted=!this.notCompleted)}}br([P],wt.prototype,"changeActivity");var yr=Object.defineProperty,wr=Object.getOwnPropertyDescriptor,xe=(n,e,t,i)=>{for(var s=i>1?void 0:i?wr(e,t):e,r=n.length-1,o;r>=0;r--)(o=n[r])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&yr(e,t,s),s};class me extends $e{constructor(e,t){super(),this.taskList=[],this.completedTasks=0,this.currentItemID=0,this.nextItemId=0,this.version=e,this.sensors=new Vi(t),this.homePage=new At("/home",'<img src="assets/home.svg"/>',"Todo");const i=JSON.parse(localStorage.getItem("tasks"));i!==null&&(this.taskList=i.map(s=>{const r=new wt(s.text);return r.notCompleted=s.notCompleted,r}))}convertLineBreaks(e){for(;e.includes(`
`);)e=e.replace(`
`,"<br />");return e}swapTasks(){if(this.currentItemID!==this.nextItemId){this.taskList=this.taskList.toMutable();const e=this.taskList[this.currentItemID];this.taskList.splice(this.currentItemID,1);const t=this.taskList.slice(this.nextItemId);this.taskList.splice(this.nextItemId),this.taskList.push(e),this.taskList=this.taskList.concat(t)}}addTask(e){this.taskList=this.taskList.toMutable(),this.taskList.push(new wt(this.convertLineBreaks(e)))}deleteTask(e){this.taskList=this.taskList.toMutable(),this.taskList.splice(this.taskList.indexOf(e),1)}editTask(e,t){e.isEdit?(t!=null&&(e.text=this.convertLineBreaks(t)),e.isEdit=!1):e.isEdit=!0}contentTasks(){this.completedTasks=this.taskList.filter(e=>!e.notCompleted).length,localStorage.setItem("tasks",JSON.stringify(this.taskList))}pointerActions(){try{const e=this.sensors.pointer;if(e.clicking!==void 0){const t=e.clicking;t instanceof Function&&Me(()=>t())}}catch(e){console.error(e)}}keyboardActions(){try{const e=this.sensors.keyboard;if(e.down==="Enter"&&e.modifiers!==M.shift){const t=e.elementDataList[0];t instanceof Function&&Me(()=>t()),this.sensors.keyboard.preventDefault=!0}}catch(e){console.error(e)}}handleDragAndDrop(){const e=this.sensors.htmlDrag,t=e.draggable;t&&(e.dragStarted&&(e.effectAllowed="copy",e.draggingOver&&(e.dragTarget instanceof wt?(e.dropAllowed=!0,e.dropEffect="copy"):e.dropAllowed=!1)),e.dragFinished&&e.dropped&&e.dragTarget instanceof wt&&(this.currentItemID=this.taskList.indexOf(t),this.nextItemId=this.taskList.indexOf(e.dragTarget),this.swapTasks()))}}xe([N],me.prototype,"version",2);xe([N],me.prototype,"homePage",2);xe([N],me.prototype,"completedTasks",2);xe([N],me.prototype,"sensors",2);xe([N],me.prototype,"currentItemID",2);xe([N],me.prototype,"nextItemId",2);xe([P],me.prototype,"addTask",1);xe([P],me.prototype,"deleteTask",1);xe([P],me.prototype,"editTask",1);xe([ze],me.prototype,"contentTasks",1);xe([ze,T({logging:$.Off})],me.prototype,"pointerActions",1);xe([ze,T({logging:$.Off})],me.prototype,"keyboardActions",1);xe([ze],me.prototype,"handleDragAndDrop",1);function Ce(n){return R.declare(Ft.div,n)}function kn(n){return R.declare(Ft.img,n)}function xr(n){return R.declare(Ft.li,n)}function Or(n){return R.declare(Ft.textarea,n)}function Sr(n){return R.declare(Ft.ul,n)}const Ft={a:new g("a",!1,n=>n.kind=h.native),abbr:new g("abbr",!1,n=>n.kind=h.native),address:new g("address",!1,n=>n.kind=h.native),area:new g("area",!1,n=>n.kind=h.native),article:new g("article",!1,n=>n.kind=h.native),aside:new g("aside",!1,n=>n.kind=h.native),audio:new g("audio",!1,n=>n.kind=h.native),b:new g("b",!1,n=>n.kind=h.native),base:new g("base",!1,n=>n.kind=h.native),bdi:new g("bdi",!1,n=>n.kind=h.native),bdo:new g("bdo",!1,n=>n.kind=h.native),big:new g("big",!1,n=>n.kind=h.native),blockquote:new g("blockquote",!1,n=>n.kind=h.native),body:new g("body",!1,n=>n.kind=h.native),br:new g("br",!1,n=>n.kind=h.native),button:new g("button",!1,n=>n.kind=h.native),canvas:new g("canvas",!1,n=>n.kind=h.native),caption:new g("caption",!1,n=>n.kind=h.native),cite:new g("cite",!1,n=>n.kind=h.native),code:new g("code",!1,n=>n.kind=h.native),col:new g("col",!1,n=>n.kind=h.native),colgroup:new g("colgroup",!1,n=>n.kind=h.native),data:new g("data",!1,n=>n.kind=h.native),datalist:new g("datalist",!1,n=>n.kind=h.native),dd:new g("dd",!1,n=>n.kind=h.native),del:new g("del",!1,n=>n.kind=h.native),details:new g("details",!1,n=>n.kind=h.native),dfn:new g("dfn",!1,n=>n.kind=h.native),div:new g("div",!1,n=>n.kind=h.native),dl:new g("dl",!1,n=>n.kind=h.native),dt:new g("dt",!1,n=>n.kind=h.native),em:new g("em",!1,n=>n.kind=h.native),embed:new g("embed",!1,n=>n.kind=h.native),fieldset:new g("fieldset",!1,n=>n.kind=h.native),figcaption:new g("figcaption",!1,n=>n.kind=h.native),figure:new g("figure",!1,n=>n.kind=h.native),footer:new g("footer",!1,n=>n.kind=h.native),form:new g("form",!1,n=>n.kind=h.native),h1:new g("h1",!1,n=>n.kind=h.native),h2:new g("h2",!1,n=>n.kind=h.native),h3:new g("h3",!1,n=>n.kind=h.native),h4:new g("h4",!1,n=>n.kind=h.native),h5:new g("h5",!1,n=>n.kind=h.native),h6:new g("h6",!1,n=>n.kind=h.native),head:new g("head",!1,n=>n.kind=h.native),header:new g("header",!1,n=>n.kind=h.native),hgroup:new g("hgroup",!1,n=>n.kind=h.native),hr:new g("hr",!1,n=>n.kind=h.native),html:new g("html",!1,n=>n.kind=h.native),i:new g("i",!1,n=>n.kind=h.native),iframe:new g("iframe",!1,n=>n.kind=h.native),img:new g("img",!1,n=>n.kind=h.native),input:new g("input",!1,n=>n.kind=h.native),ins:new g("ins",!1,n=>n.kind=h.native),kbd:new g("kbd",!1,n=>n.kind=h.native),keygen:new g("keygen",!1,n=>n.kind=h.native),label:new g("label",!1,n=>n.kind=h.native),legend:new g("legend",!1,n=>n.kind=h.native),li:new g("li",!1,n=>n.kind=h.native),link:new g("link",!1,n=>n.kind=h.native),main:new g("main",!1,n=>n.kind=h.native),map:new g("map",!1,n=>n.kind=h.native),mark:new g("mark",!1,n=>n.kind=h.native),menu:new g("menu",!1,n=>n.kind=h.native),menuitem:new g("menuitem",!1,n=>n.kind=h.native),meta:new g("meta",!1,n=>n.kind=h.native),meter:new g("meter",!1,n=>n.kind=h.native),nav:new g("nav",!1,n=>n.kind=h.native),noindex:new g("noindex",!1,n=>n.kind=h.native),noscript:new g("noscript",!1,n=>n.kind=h.native),object:new g("object",!1,n=>n.kind=h.native),ol:new g("ol",!1,n=>n.kind=h.native),optgroup:new g("optgroup",!1,n=>n.kind=h.native),option:new g("option",!1,n=>n.kind=h.native),output:new g("output",!1,n=>n.kind=h.native),p:new g("p",!1,n=>n.kind=h.native),param:new g("param",!1,n=>n.kind=h.native),picture:new g("picture",!1,n=>n.kind=h.native),pre:new g("pre",!1,n=>n.kind=h.native),progress:new g("progress",!1,n=>n.kind=h.native),q:new g("q",!1,n=>n.kind=h.native),rp:new g("rp",!1,n=>n.kind=h.native),rt:new g("rt",!1,n=>n.kind=h.native),ruby:new g("ruby",!1,n=>n.kind=h.native),s:new g("s",!1,n=>n.kind=h.native),samp:new g("samp",!1,n=>n.kind=h.native),script:new g("script",!1,n=>n.kind=h.native),section:new g("section",!1,n=>n.kind=h.native),select:new g("select",!1,n=>n.kind=h.native),small:new g("small",!1,n=>n.kind=h.native),source:new g("source",!1,n=>n.kind=h.native),span:new g("span",!1,n=>n.kind=h.native),strong:new g("strong",!1,n=>n.kind=h.native),style:new g("style",!1,n=>n.kind=h.native),sub:new g("sub",!1,n=>n.kind=h.native),summary:new g("summary",!1,n=>n.kind=h.native),sup:new g("sup",!1,n=>n.kind=h.native),table:new g("table",!1,n=>n.kind=h.native),template:new g("template",!1,n=>n.kind=h.native),tbody:new g("tbody",!1,n=>n.kind=h.native),td:new g("td",!1,n=>n.kind=h.native),textarea:new g("textarea",!1,n=>n.kind=h.native),tfoot:new g("tfoot",!1,n=>n.kind=h.native),th:new g("th",!1,n=>n.kind=h.native),thead:new g("thead",!1,n=>n.kind=h.native),time:new g("time",!1,n=>n.kind=h.native),title:new g("title",!1,n=>n.kind=h.native),tr:new g("tr",!1,n=>n.kind=h.native),track:new g("track",!1,n=>n.kind=h.native),u:new g("u",!1,n=>n.kind=h.native),ul:new g("ul",!1,n=>n.kind=h.native),var:new g("var",!1,n=>n.kind=h.native),video:new g("video",!1,n=>n.kind=h.native),wbr:new g("wbr",!1,n=>n.kind=h.native)},Ct=global.Element;Ct!==void 0&&(Object.defineProperty(Ct.prototype,"sensors",{configurable:!1,enumerable:!1,get(){let n=this[ci];return n===void 0&&(n=this[ci]=new Vi(this)),n}}),Object.defineProperty(Ct.prototype,"dataForSensor",{configurable:!1,enumerable:!1,get(){let n=this[J];return n===void 0&&(n=this[J]={}),n},set(n){this[J]=n}}),Object.defineProperty(Ct.prototype,"resizeObserver",{configurable:!1,enumerable:!1,get(){return this[di]},set(n){this[di]=n}}));var Er=!1;function kr(n){if(n.sheet)return n.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===n)return document.styleSheets[e]}function Pr(n){var e=document.createElement("style");return e.setAttribute("data-emotion",n.key),n.nonce!==void 0&&e.setAttribute("nonce",n.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var Dr=function(){function n(t){var i=this;this._insertTag=function(s){var r;i.tags.length===0?i.insertionPoint?r=i.insertionPoint.nextSibling:i.prepend?r=i.container.firstChild:r=i.before:r=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(s,r),i.tags.push(s)},this.isSpeedy=t.speedy===void 0?!Er:t.speedy,this.tags=[],this.ctr=0,this.nonce=t.nonce,this.key=t.key,this.container=t.container,this.prepend=t.prepend,this.insertionPoint=t.insertionPoint,this.before=null}var e=n.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(Pr(this));var s=this.tags[this.tags.length-1];if(this.isSpeedy){var r=kr(s);try{r.insertRule(i,r.cssRules.length)}catch{}}else s.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){var s;return(s=i.parentNode)==null?void 0:s.removeChild(i)}),this.tags=[],this.ctr=0},n}(),oe="-ms-",Jt="-moz-",j="-webkit-",Hi="comm",Xn="rule",Yn="decl",Tr="@import",Xi="@keyframes",Ar="@layer",Fr=Math.abs,on=String.fromCharCode,$r=Object.assign;function _r(n,e){return re(n,0)^45?(((e<<2^re(n,0))<<2^re(n,1))<<2^re(n,2))<<2^re(n,3):0}function Yi(n){return n.trim()}function Rr(n,e){return(n=e.exec(n))?n[0]:n}function I(n,e,t){return n.replace(e,t)}function Pn(n,e){return n.indexOf(e)}function re(n,e){return n.charCodeAt(e)|0}function kt(n,e,t){return n.slice(e,t)}function _e(n){return n.length}function Bn(n){return n.length}function jt(n,e){return e.push(n),n}function Cr(n,e){return n.map(e).join("")}var an=1,ot=1,Bi=0,pe=0,K=0,ht="";function cn(n,e,t,i,s,r,o){return{value:n,root:e,parent:t,type:i,props:s,children:r,line:an,column:ot,length:o,return:""}}function vt(n,e){return $r(cn("",null,null,"",null,null,0),n,{length:-n.length},e)}function jr(){return K}function Ir(){return K=pe>0?re(ht,--pe):0,ot--,K===10&&(ot=1,an--),K}function we(){return K=pe<Bi?re(ht,pe++):0,ot++,K===10&&(ot=1,an++),K}function Ie(){return re(ht,pe)}function Yt(){return pe}function $t(n,e){return kt(ht,n,e)}function Pt(n){switch(n){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Wi(n){return an=ot=1,Bi=_e(ht=n),pe=0,[]}function Ui(n){return ht="",n}function Bt(n){return Yi($t(pe-1,Dn(n===91?n+2:n===40?n+1:n)))}function Mr(n){for(;(K=Ie())&&K<33;)we();return Pt(n)>2||Pt(K)>3?"":" "}function zr(n,e){for(;--e&&we()&&!(K<48||K>102||K>57&&K<65||K>70&&K<97););return $t(n,Yt()+(e<6&&Ie()==32&&we()==32))}function Dn(n){for(;we();)switch(K){case n:return pe;case 34:case 39:n!==34&&n!==39&&Dn(K);break;case 40:n===41&&Dn(n);break;case 92:we();break}return pe}function Nr(n,e){for(;we()&&n+K!==57;)if(n+K===84&&Ie()===47)break;return"/*"+$t(e,pe-1)+"*"+on(n===47?n:we())}function Lr(n){for(;!Pt(Ie());)we();return $t(n,pe)}function Vr(n){return Ui(Wt("",null,null,null,[""],n=Wi(n),0,[0],n))}function Wt(n,e,t,i,s,r,o,a,c){for(var d=0,l=0,u=o,p=0,v=0,b=0,y=1,O=1,D=1,z=0,H="",B=s,Pe=r,de=i,C=H;O;)switch(b=z,z=we()){case 40:if(b!=108&&re(C,u-1)==58){Pn(C+=I(Bt(z),"&","&\f"),"&\f")!=-1&&(D=-1);break}case 34:case 39:case 91:C+=Bt(z);break;case 9:case 10:case 13:case 32:C+=Mr(b);break;case 92:C+=zr(Yt()-1,7);continue;case 47:switch(Ie()){case 42:case 47:jt(Hr(Nr(we(),Yt()),e,t),c);break;default:C+="/"}break;case 123*y:a[d++]=_e(C)*D;case 125*y:case 59:case 0:switch(z){case 0:case 125:O=0;case 59+l:D==-1&&(C=I(C,/\f/g,"")),v>0&&_e(C)-u&&jt(v>32?ui(C+";",i,t,u-1):ui(I(C," ","")+";",i,t,u-2),c);break;case 59:C+=";";default:if(jt(de=li(C,e,t,d,l,s,a,H,B=[],Pe=[],u),r),z===123)if(l===0)Wt(C,e,de,de,B,r,u,a,Pe);else switch(p===99&&re(C,3)===110?100:p){case 100:case 108:case 109:case 115:Wt(n,de,de,i&&jt(li(n,de,de,0,0,s,a,H,s,B=[],u),Pe),s,Pe,u,a,i?B:Pe);break;default:Wt(C,de,de,de,[""],Pe,0,a,Pe)}}d=l=v=0,y=D=1,H=C="",u=o;break;case 58:u=1+_e(C),v=b;default:if(y<1){if(z==123)--y;else if(z==125&&y++==0&&Ir()==125)continue}switch(C+=on(z),z*y){case 38:D=l>0?1:(C+="\f",-1);break;case 44:a[d++]=(_e(C)-1)*D,D=1;break;case 64:Ie()===45&&(C+=Bt(we())),p=Ie(),l=u=_e(H=C+=Lr(Yt())),z++;break;case 45:b===45&&_e(C)==2&&(y=0)}}return r}function li(n,e,t,i,s,r,o,a,c,d,l){for(var u=s-1,p=s===0?r:[""],v=Bn(p),b=0,y=0,O=0;b<i;++b)for(var D=0,z=kt(n,u+1,u=Fr(y=o[b])),H=n;D<v;++D)(H=Yi(y>0?p[D]+" "+z:I(z,/&\f/g,p[D])))&&(c[O++]=H);return cn(n,e,t,s===0?Xn:a,c,d,l)}function Hr(n,e,t){return cn(n,e,t,Hi,on(jr()),kt(n,2,-2),0)}function ui(n,e,t,i){return cn(n,e,t,Yn,kt(n,0,i),kt(n,i+1,-1),i)}function rt(n,e){for(var t="",i=Bn(n),s=0;s<i;s++)t+=e(n[s],s,n,e)||"";return t}function Xr(n,e,t,i){switch(n.type){case Ar:if(n.children.length)break;case Tr:case Yn:return n.return=n.return||n.value;case Hi:return"";case Xi:return n.return=n.value+"{"+rt(n.children,i)+"}";case Xn:n.value=n.props.join(",")}return _e(t=rt(n.children,i))?n.return=n.value+"{"+t+"}":""}function Yr(n){var e=Bn(n);return function(t,i,s,r){for(var o="",a=0;a<e;a++)o+=n[a](t,i,s,r)||"";return o}}function Br(n){return function(e){e.root||(e=e.return)&&n(e)}}function Wr(n){var e=Object.create(null);return function(t){return e[t]===void 0&&(e[t]=n(t)),e[t]}}var Ur=function(e,t,i){for(var s=0,r=0;s=r,r=Ie(),s===38&&r===12&&(t[i]=1),!Pt(r);)we();return $t(e,pe)},Gr=function(e,t){var i=-1,s=44;do switch(Pt(s)){case 0:s===38&&Ie()===12&&(t[i]=1),e[i]+=Ur(pe-1,t,i);break;case 2:e[i]+=Bt(s);break;case 4:if(s===44){e[++i]=Ie()===58?"&\f":"",t[i]=e[i].length;break}default:e[i]+=on(s)}while(s=we());return e},qr=function(e,t){return Ui(Gr(Wi(e),t))},fi=new WeakMap,Kr=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,i=e.parent,s=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!fi.get(i))&&!s){fi.set(e,!0);for(var r=[],o=qr(t,r),a=i.props,c=0,d=0;c<o.length;c++)for(var l=0;l<a.length;l++,d++)e.props[d]=r[c]?o[c].replace(/&\f/g,a[l]):a[l]+" "+o[c]}}},Jr=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function Gi(n,e){switch(_r(n,e)){case 5103:return j+"print-"+n+n;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return j+n+n;case 5349:case 4246:case 4810:case 6968:case 2756:return j+n+Jt+n+oe+n+n;case 6828:case 4268:return j+n+oe+n+n;case 6165:return j+n+oe+"flex-"+n+n;case 5187:return j+n+I(n,/(\w+).+(:[^]+)/,j+"box-$1$2"+oe+"flex-$1$2")+n;case 5443:return j+n+oe+"flex-item-"+I(n,/flex-|-self/,"")+n;case 4675:return j+n+oe+"flex-line-pack"+I(n,/align-content|flex-|-self/,"")+n;case 5548:return j+n+oe+I(n,"shrink","negative")+n;case 5292:return j+n+oe+I(n,"basis","preferred-size")+n;case 6060:return j+"box-"+I(n,"-grow","")+j+n+oe+I(n,"grow","positive")+n;case 4554:return j+I(n,/([^-])(transform)/g,"$1"+j+"$2")+n;case 6187:return I(I(I(n,/(zoom-|grab)/,j+"$1"),/(image-set)/,j+"$1"),n,"")+n;case 5495:case 3959:return I(n,/(image-set\([^]*)/,j+"$1$`$1");case 4968:return I(I(n,/(.+:)(flex-)?(.*)/,j+"box-pack:$3"+oe+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+j+n+n;case 4095:case 3583:case 4068:case 2532:return I(n,/(.+)-inline(.+)/,j+"$1$2")+n;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(_e(n)-1-e>6)switch(re(n,e+1)){case 109:if(re(n,e+4)!==45)break;case 102:return I(n,/(.+:)(.+)-([^]+)/,"$1"+j+"$2-$3$1"+Jt+(re(n,e+3)==108?"$3":"$2-$3"))+n;case 115:return~Pn(n,"stretch")?Gi(I(n,"stretch","fill-available"),e)+n:n}break;case 4949:if(re(n,e+1)!==115)break;case 6444:switch(re(n,_e(n)-3-(~Pn(n,"!important")&&10))){case 107:return I(n,":",":"+j)+n;case 101:return I(n,/(.+:)([^;!]+)(;|!.+)?/,"$1"+j+(re(n,14)===45?"inline-":"")+"box$3$1"+j+"$2$3$1"+oe+"$2box$3")+n}break;case 5936:switch(re(n,e+11)){case 114:return j+n+oe+I(n,/[svh]\w+-[tblr]{2}/,"tb")+n;case 108:return j+n+oe+I(n,/[svh]\w+-[tblr]{2}/,"tb-rl")+n;case 45:return j+n+oe+I(n,/[svh]\w+-[tblr]{2}/,"lr")+n}return j+n+oe+n+n}return n}var Qr=function(e,t,i,s){if(e.length>-1&&!e.return)switch(e.type){case Yn:e.return=Gi(e.value,e.length);break;case Xi:return rt([vt(e,{value:I(e.value,"@","@"+j)})],s);case Xn:if(e.length)return Cr(e.props,function(r){switch(Rr(r,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return rt([vt(e,{props:[I(r,/:(read-\w+)/,":"+Jt+"$1")]})],s);case"::placeholder":return rt([vt(e,{props:[I(r,/:(plac\w+)/,":"+j+"input-$1")]}),vt(e,{props:[I(r,/:(plac\w+)/,":"+Jt+"$1")]}),vt(e,{props:[I(r,/:(plac\w+)/,oe+"input-$1")]})],s)}return""})}},Zr=[Qr],eo=function(e){var t=e.key;if(t==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(y){var O=y.getAttribute("data-emotion");O.indexOf(" ")!==-1&&(document.head.appendChild(y),y.setAttribute("data-s",""))})}var s=e.stylisPlugins||Zr,r={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(y){for(var O=y.getAttribute("data-emotion").split(" "),D=1;D<O.length;D++)r[O[D]]=!0;a.push(y)});var c,d=[Kr,Jr];{var l,u=[Xr,Br(function(y){l.insert(y)})],p=Yr(d.concat(s,u)),v=function(O){return rt(Vr(O),p)};c=function(O,D,z,H){l=z,v(O?O+"{"+D.styles+"}":D.styles),H&&(b.inserted[D.name]=!0)}}var b={key:t,sheet:new Dr({key:t,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:r,registered:{},insert:c};return b.sheet.hydrate(a),b};function to(n){for(var e=0,t,i=0,s=n.length;s>=4;++i,s-=4)t=n.charCodeAt(i)&255|(n.charCodeAt(++i)&255)<<8|(n.charCodeAt(++i)&255)<<16|(n.charCodeAt(++i)&255)<<24,t=(t&65535)*1540483477+((t>>>16)*59797<<16),t^=t>>>24,e=(t&65535)*1540483477+((t>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(s){case 3:e^=(n.charCodeAt(i+2)&255)<<16;case 2:e^=(n.charCodeAt(i+1)&255)<<8;case 1:e^=n.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var no={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},io=!1,so=/[A-Z]|^ms/g,ro=/_EMO_([^_]+?)_([^]*?)_EMO_/g,qi=function(e){return e.charCodeAt(1)===45},hi=function(e){return e!=null&&typeof e!="boolean"},yn=Wr(function(n){return qi(n)?n:n.replace(so,"-$&").toLowerCase()}),gi=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(ro,function(i,s,r){return Ye={name:s,styles:r,next:Ye},s})}return no[e]!==1&&!qi(e)&&typeof t=="number"&&t!==0?t+"px":t},oo="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Qt(n,e,t){if(t==null)return"";var i=t;if(i.__emotion_styles!==void 0)return i;switch(typeof t){case"boolean":return"";case"object":{var s=t;if(s.anim===1)return Ye={name:s.name,styles:s.styles,next:Ye},s.name;var r=t;if(r.styles!==void 0){var o=r.next;if(o!==void 0)for(;o!==void 0;)Ye={name:o.name,styles:o.styles,next:Ye},o=o.next;var a=r.styles+";";return a}return ao(n,e,t)}}var c=t;if(e==null)return c;var d=e[c];return d!==void 0?d:c}function ao(n,e,t){var i="";if(Array.isArray(t))for(var s=0;s<t.length;s++)i+=Qt(n,e,t[s])+";";else for(var r in t){var o=t[r];if(typeof o!="object"){var a=o;e!=null&&e[a]!==void 0?i+=r+"{"+e[a]+"}":hi(a)&&(i+=yn(r)+":"+gi(r,a)+";")}else{if(r==="NO_COMPONENT_SELECTOR"&&io)throw new Error(oo);if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var c=0;c<o.length;c++)hi(o[c])&&(i+=yn(r)+":"+gi(r,o[c])+";");else{var d=Qt(n,e,o);switch(r){case"animation":case"animationName":{i+=yn(r)+":"+d+";";break}default:i+=r+"{"+d+"}"}}}}return i}var pi=/label:\s*([^\s;{]+)\s*(;|$)/g,Ye;function wn(n,e,t){if(n.length===1&&typeof n[0]=="object"&&n[0]!==null&&n[0].styles!==void 0)return n[0];var i=!0,s="";Ye=void 0;var r=n[0];if(r==null||r.raw===void 0)i=!1,s+=Qt(t,e,r);else{var o=r;s+=o[0]}for(var a=1;a<n.length;a++)if(s+=Qt(t,e,n[a]),i){var c=r;s+=c[a]}pi.lastIndex=0;for(var d="",l;(l=pi.exec(s))!==null;)d+="-"+l[1];var u=to(s)+d;return{name:u,styles:s,next:Ye}}function Ki(n,e,t){var i="";return t.split(" ").forEach(function(s){n[s]!==void 0?e.push(n[s]+";"):s&&(i+=s+" ")}),i}var co=function(e,t,i){var s=e.key+"-"+t.name;e.registered[s]===void 0&&(e.registered[s]=t.styles)},lo=function(e,t,i){co(e,t);var s=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var r=t;do e.insert(t===r?"."+s:"",r,e.sheet,!0),r=r.next;while(r!==void 0)}};function mi(n,e){if(n.inserted[e.name]===void 0)return n.insert("",e,n.sheet,!0)}function vi(n,e,t){var i=[],s=Ki(n,i,t);return i.length<2?t:s+e(i)}var uo=function(e){var t=eo(e);t.sheet.speedy=function(a){this.isSpeedy=a},t.compat=!0;var i=function(){for(var c=arguments.length,d=new Array(c),l=0;l<c;l++)d[l]=arguments[l];var u=wn(d,t.registered,void 0);return lo(t,u),t.key+"-"+u.name},s=function(){for(var c=arguments.length,d=new Array(c),l=0;l<c;l++)d[l]=arguments[l];var u=wn(d,t.registered),p="animation-"+u.name;return mi(t,{name:u.name,styles:"@keyframes "+p+"{"+u.styles+"}"}),p},r=function(){for(var c=arguments.length,d=new Array(c),l=0;l<c;l++)d[l]=arguments[l];var u=wn(d,t.registered);mi(t,u)},o=function(){for(var c=arguments.length,d=new Array(c),l=0;l<c;l++)d[l]=arguments[l];return vi(t.registered,i,fo(d))};return{css:i,cx:o,injectGlobal:r,keyframes:s,hydrate:function(c){c.forEach(function(d){t.inserted[d]=!0})},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:Ki.bind(null,t.registered),merge:vi.bind(null,t.registered,i)}},fo=function n(e){for(var t="",i=0;i<e.length;i++){var s=e[i];if(s!=null){var r=void 0;switch(typeof s){case"boolean":break;case"object":{if(Array.isArray(s))r=n(s);else{r="";for(var o in s)s[o]&&o&&(r&&(r+=" "),r+=o)}break}default:r=s}r&&(t&&(t+=" "),t+=r)}}return t},ho=uo({key:"css"}),fe=ho.css;class go{constructor(){this.name="DarkBlueTheme",this.background="#14344F",this.foreground="#E0E0E0",this.logoBackground="#00B3FF",this.logoForeground="white",this.footerForeground="#777",this.activeItemMarker="#00B3FF",this.itemUnderPointerMarker="#00A4E5",this.emphasizedText="#5DF586",this.titleForeground="#E0E0E0",this.documentHeading1Foreground="#E0E0E0",this.documentHeading2Foreground="white",this.documentTOCBackground="#122F47",this.documentScrollTopButtonBackground="#00A4E5",this.documentCodeInlineForeground="#67E8FF",this.documentCodeInlineBackground="rgba(255, 255, 255, 0.07)",this.documentCodeBlockForeground="#67E8FF",this.documentCodeBlockBackground="transparent",this.playgroundTextAreaBackground="white",this.playgroundTextAreaForeground="#444",this.playgroundTextAreaCaretColor="black",this.playgroundTextLengthForeground="rgb(253, 165, 93)",this.playgroundTextLengthErrorForeground="rgb(253, 93, 93)",this.playgroundWhiteSpaceForeground="lightgrey",this.playgroundFindButtonBackground="#00B831",this.playgroundFindButtonForeground="white",this.playgroundFindButtonCheckMarkBackground="#EEE",this.playgroundFindButtonCheckMarkForeground="#444",this.playgroundFindButtonCheckMarkHoverBackground="#DDD",this.playgroundTagButtonBackground="#AAA",this.playgroundTagButtonActiveForeground="black",this.playgroundTagButtonInactiveForeground="#E0E0E0",this.playgroundTagButtonCounterForeground="grey",this.playgroundReadOnlyPackageUnderPointerMarker="#ECECEC"}}var po=Object.defineProperty,mo=Object.getOwnPropertyDescriptor,dn=(n,e,t,i)=>{for(var s=i>1?void 0:i?mo(e,t):e,r=n.length-1,o;r>=0;r--)(o=n[r])&&(s=(i?o(e,t,s):o(s))||s);return i&&s&&po(e,t,s),s};class _t extends $e{constructor(...e){super(),this.all=[],e.forEach(t=>this.all.push(t)),this.active=e[0]}setActive(e){this.active=e}setActiveByName(e){const t=this.all.findIndex(i=>i.name===e);t>=0&&(this.active=this.all[t])}setNextActive(){const e=(this.all.indexOf(this.active)+1)%this.all.length,t=this.all[e];this.active=t}}dn([N],_t.prototype,"all",2);dn([P],_t.prototype,"setActive",1);dn([P],_t.prototype,"setActiveByName",1);dn([P],_t.prototype,"setNextActive",1);const bi=S.run(null,()=>new _t(new go)),vo=Cn(()=>({Body:fe`
      width: 100%;
      font-size: calc(14px + (20 - 14) * (100vw - 800px) / (1920 - 800));
      font-family: Calibri, Tahoma, Arial, sans-serif;
      background: url("./source/assets/background.jpg");
      background-size: cover;
      color: ${bi.active.foreground};
      min-height: 100vh;

      a {
        text-decoration: none;
        outline: none;
        color: ${bi.active.foreground};
      }
    `}));function bo(n,e,t){return Ce({content(i){i.native,Ce({content(s){const r=s.native;e&&e(r)}})}})}const bt=Cn(()=>({InputTask:fe`
      display: flex;
      justify-content: center;
      align-items: center;
      margin: 0;
      position: fixed;
      font-size: 25px;
      left: 0;
      bottom: 20px;
      width: 100%;
    `,Input:fe`
      margin: 0;
      width: calc(100vw - 100px);
      height: 49px;
      color: #fff;
      font-size: 24px;
      font-family: Calibri, Tahoma, Arial, sans-serif;
      border: none;
      resize: none;
      padding: 6px 10px 0 10px;
      /*padding: 0 10px;*/
      border-radius: 4px 0 0 4px;
      background-color: rgba(0, 0, 0, 0.55);
      backdrop-filter: blur(5px);
      transition: background-color .2s ease;
      :hover, :focus {
        transition: background-color .2s ease;
        background-color: rgba(0, 0, 0, 0.25);
      }
    `,Submit:fe`
      height: 45px;
      user-select: none;
      padding: 5px 15px;
      cursor: pointer;
      border-radius: 0 4px 4px 0;
      background-color: rgba(0, 0, 0, 0.55);
      backdrop-filter: blur(5px);
      transition: background-color .2s ease;
      :hover {
        transition: background-color .2s ease;
        background-color: rgba(0, 0, 0, 0.25);
      }

      img {
        width: 20px;
        filter: invert(100%);
      }
    `,CompletedLabel:fe`
      padding: 7px;
      margin: 5px;
      user-select: none;
      font-size: 90%;
      /*background-color: rgba(0, 0, 0, 0.4);
      border-radius: 5px;
      backdrop-filter: blur(5px);
      width: 10%;*/
    `,List:fe`
      font-size: 110%;
      overflow: auto;
      height: calc(100vh - 91px);
      padding: 20px;
      overflow-y: scroll;
    `})),Ue=Cn(()=>({Delete:fe`
      margin: 0;

      min-height: 45px;
      padding: 9px 15px;

      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      img {
        width: 20px;
        filter: invert(100%);
      }
      border-radius: 0 3px 3px 0;
      background-color: rgba(39, 39, 39, 1);
      transition: background-color .2s ease;
      :hover, :focus {
        transition: background-color .2s ease;
        background-color: rgba(200, 0, 0, 1);
      }
    `,Edit:fe`
      margin: 0;

      min-height: 45px;
      padding: 9px 15px;

      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      img {
        width: 20px;
        filter: invert(100%);
      }
      background-color: rgba(39, 39, 39, 1);
      transition: background-color .2s ease;
      :hover, :focus {
        transition: background-color .2s ease;
        background-color: rgba(105, 153, 0, 1);
      }
    `,InactiveDelete:fe`
      margin: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      padding: 9px 15px;
      img {
          width: 20px;
          filter: invert(100%);
        }
      min-height: 45px;
      border-radius: 0 3px 3px 0;
      background-color: rgba(39, 39, 39, 0.5);
      backdrop-filter: blur(5px);
      transition: background-color .2s ease;
      :hover, :focus {
        transition: background-color .2s ease;
        background-color: rgba(200, 0, 0, 0.5);
      }
    `,Task:fe`
      display: flex;
      cursor: pointer;
      user-select: none;
      margin: 6px 0;
      min-height: 45px;
      @media screen and (max-width: 1000px) {
        min-height: 40px;
      }

      @media screen and (max-width: 600px) {
        min-height: 38px;
      }
    `,TaskElement:fe`
      margin: 0;
      padding: 9px 10px;
      width: 40%;
      word-wrap: break-word;
      flex: 1 0 auto;
      min-height: 45px;
      border-radius: 3px 0 0 3px;
      background-color: rgba(36, 36, 36, 1);
      backdrop-filter: blur(5px);
      transition: background-color .2s ease;
      user-select: none;
      display: flex;
      flex-direction: column;
      justify-content: center;
      :hover {
        transition: background-color .2s ease;
        background-color: rgba(53, 56, 58, 1);
      }
      :active {
        background-color: rgba(36, 36, 36, 1);
      }
    `,InactiveTaskElement:fe`
      text-decoration: line-through;
      margin: 0;
      flex: 1 0 auto;
      min-height: 45px;
      padding: 9px 10px;
      word-wrap: break-word;
      width: 40%;
      border-radius: 3px 0 0 3px;
      backdrop-filter: blur(5px);
      background-color: rgba(36, 36, 36, 0.35);
      transition: background-color .2s ease;
      display: flex;
      flex-direction: column;
      justify-content: center;
      :hover {
        transition: background-color .2s ease;
        background-color: rgba(53, 56, 58, 0.35);
      }
    `,Input:fe`
      margin: 0;
      width: calc(100vw - 145px);
      min-height: 45px;
      overflow: hidden;
      cursor: text;
      padding: 9px 10px;
      display: flex;
      flex-direction: column;
      justify-content: center;
      border-radius: 3px 0 0 3px;
      background-color: rgba(36, 36, 36, 0.55);
      backdrop-filter: blur(5px);
      /*transition: background-color .2s ease;*/
      :hover, :focus {
        transition: background-color .2s ease;
        background-color: rgba(53, 56, 58, 0.25);
      }
    `,Arrow:fe`
      margin: 0;

      min-height: 45px;
      padding: 9px 15px;

      display: flex;
      align-items: center;
      justify-content: center;
      flex-direction: column;
      img {
        width: 20px;
        filter: invert(100%);
      }
      background-color: rgba(39, 39, 39, 1);
      transition: background-color .2s ease;
      :hover, :focus {
        transition: background-color .2s ease;
        background-color: rgba(59, 59, 59, 1);
      }
    `}));function yi(n,e,t){return xr({content(i){const s=i.native;let r;s.className=Ue.class.Task,s.dataForSensor.htmlDraggable=e.notCompleted&&!e.isEdit?e:void 0,s.dataForSensor.htmlDrag=e.notCompleted&&!e.isEdit?e:void 0,s.draggable=!0,e.isEdit?Ce({content(o){const a=o.native;r=a,r.contentEditable="true",r.dataForSensor.keyboard=()=>{r.innerHTML.trim()!==""&&t.editTask(e,r.innerHTML)},a.innerHTML=e.text,a.className=Ue.class.Input}}):Ce({content(o){const a=o.native;a.dataForSensor.click=()=>e.changeActivity(),a.className=e.notCompleted?Ue.class.TaskElement:Ue.class.InactiveTaskElement,a.innerHTML=e.text}}),e.notCompleted&&Ce({content(o){const a=o.native;a.dataForSensor.click=()=>e.isEdit?t.editTask(e,r.innerHTML):t.editTask(e),a.className=Ue.class.Edit,kn({content(c){const d=c.native;d.src=e.isEdit?"./source/assets/check.svg":"./source/assets/pencil.svg"}})}}),Ce({content(o){const a=o.native;a.dataForSensor.click=()=>{t.deleteTask(e)},a.className=e.notCompleted?Ue.class.Delete:Ue.class.InactiveDelete,kn({content(c){const d=c.native;d.src="./source/assets/trash.svg"}})}})}})}function yo(n){return bo(n.homePage,()=>{Sr({content(e){const t=e.native;t.className=bt.class.List;let i=0;n.taskList.forEach(s=>{s.notCompleted&&yi(i.toString(),s,n),i++}),n.completedTasks>0&&Ce({content(s){const r=s.native;r.className=bt.class.CompletedLabel,r.innerHTML="Completed "+n.completedTasks.toString()}}),n.taskList.forEach(s=>{s.notCompleted||yi(i.toString(),s,n),i++})}}),Ce({content(e){const t=e.native;let i;t.className=bt.class.InputTask,Or({content(s){const r=s.native;i=r,r.placeholder="Enter the task",r.className=bt.class.Input,i.dataForSensor.keyboard=()=>{i.value.trim()!=""&&n.addTask(i.value),i.value=""}}}),Ce({content(s){const r=s.native;r.dataForSensor.click=()=>{i.value.trim()!=""&&(n.addTask(i.value),i.value="")},r.className=bt.class.Submit,kn({content(o){const a=o.native;a.src="./source/assets/add.svg"}})}})}})})}function wo(n,e){return Ce({key:n,mode:ge.autonomous,content(t){const i=t.native;i.className=vo.class.Body,yo(e)}})}const xo="$BUILD_TIMESTAMP";Is();Qs({content(n){const e=S.run(null,()=>new me(xo,n.native));wo("App",e)}});
